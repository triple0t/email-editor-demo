(()=>{var e={744:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function a(e,t){return!1!==t.clone&&t.isMergeableObject(e)?r((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function l(e,t,n){return e.concat(t).map((function(e){return a(e,n)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function i(e,t){try{return t in e}catch(e){return!1}}function r(e,n,s){(s=s||{}).arrayMerge=s.arrayMerge||l,s.isMergeableObject=s.isMergeableObject||t,s.cloneUnlessOtherwiseSpecified=a;var c=Array.isArray(n);return c===Array.isArray(e)?c?s.arrayMerge(e,n,s):function(e,t,n){var l={};return n.isMergeableObject(e)&&o(e).forEach((function(t){l[t]=a(e[t],n)})),o(t).forEach((function(o){(function(e,t){return i(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(i(e,o)&&n.isMergeableObject(t[o])?l[o]=function(e,t){if(!t.customMerge)return r;var n=t.customMerge(e);return"function"==typeof n?n:r}(o,n)(e[o],t[o],n):l[o]=a(t[o],n))})),l}(e,n,s):a(n,s)}r.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return r(e,n,t)}),{})};var s=r;e.exports=s},20:(e,t,n)=>{"use strict";var a=n(609),l=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,o={},c=null,m=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(m=t.ref),t)i.call(t,a)&&!s.hasOwnProperty(a)&&(o[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===o[a]&&(o[a]=t[a]);return{$$typeof:l,type:e,key:c,ref:m,props:o,_owner:r.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},848:(e,t,n)=>{"use strict";e.exports=n(20)},609:e=>{"use strict";e.exports=window.React},942:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function l(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return l.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(l.default=l,e.exports=l):void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n)}()}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{closeModal:()=>me,disableComplementaryArea:()=>ae,enableComplementaryArea:()=>ne,openModal:()=>ce,pinItem:()=>le,setDefaultComplementaryArea:()=>te,setFeatureDefaults:()=>se,setFeatureValue:()=>re,toggleFeature:()=>ie,unpinItem:()=>oe});var t={};n.r(t),n.d(t,{getActiveComplementaryArea:()=>pe,isComplementaryAreaLoading:()=>de,isFeatureActive:()=>ge,isItemPinned:()=>ue,isModalActive:()=>_e});var a={};n.r(a),n.d(a,{changePreviewDeviceType:()=>jn,closeSidebar:()=>Vn,openSidebar:()=>Fn,requestSendingNewsletterPreview:()=>Un,saveEditedEmail:()=>zn,setTemplateToPost:()=>Gn,toggleFeature:()=>An,togglePreviewModal:()=>Ln,toggleSettingsSidebarActiveTab:()=>On,updateEmailMailPoetProperty:()=>Hn,updateSendPreviewEmail:()=>Dn});var l={};n.r(l),n.d(l,{getAutosaveInterval:()=>ua,getCdnUrl:()=>ga,getCurrentTemplate:()=>la,getDeviceType:()=>pa,getEditedEmailContent:()=>ta,getEditedPostTemplate:()=>na,getEmailPostId:()=>ia,getEmailTemplates:()=>oa,getInitialEditorSettings:()=>sa,getPaletteColors:()=>ca,getPreviewState:()=>ma,getSettingsSidebarActiveTab:()=>ra,getStyles:()=>da,getTemplateContent:()=>aa,getTheme:()=>ha,getUrls:()=>ya,hasEdits:()=>Zn,hasEmptyContent:()=>Kn,isEmailLoaded:()=>Jn,isEmailSent:()=>ea,isEmpty:()=>Qn,isFeatureActive:()=>qn,isPremiumPluginActive:()=>_a,isSaving:()=>Xn,isSidebarOpened:()=>Yn});var o=n(609);window.wp.formatLibrary;const i=window.wp.data,r=window.wp.element,s=window.wp.blockLibrary,c=window.wp.hooks,m=window.wp.blockEditor,p=window.wp.compose,d=(0,p.createHigherOrderComponent)((e=>function(t){return"core/columns"!==t.name?(0,o.createElement)(e,{...t}):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(e,{...t}),(0,o.createElement)(m.InspectorControls,null,(0,o.createElement)("style",null,"\n      .components-panel__body .components-toggle-control .components-form-toggle { opacity: 0.3; }\n      .components-panel__body .components-toggle-control .components-form-toggle__input { pointer-events: none; }\n      .components-panel__body .components-toggle-control label { pointer-events: none; }\n    ")))}),"columnsEditCallback"),u=window.wp.i18n;function g({layoutClassNames:e}){const t=(0,m.useBlockProps)({className:e});return(0,o.createElement)("div",{...t},(0,o.createElement)("p",null,(0,u.__)("This is the Content block.","mailpoet")),(0,o.createElement)("p",null,(0,u.__)("It will display all the blocks in the email content, which might be only simple text paragraphs. You can enrich your message with images, incorporate data through tables, explore different layout designs with columns, or use any other block type.","mailpoet")))}const _=(0,p.createHigherOrderComponent)((e=>function(t){return"core/image"!==t.name?(0,o.createElement)(e,{...t}):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(e,{...t}),(0,o.createElement)(m.InspectorControls,null,(0,o.createElement)("style",null,"\n        .components-tools-panel .components-toggle-control { display: none; }\n      ")))}),"imageEditCallback"),h=window.wp.richText;var y=n(942),E=n.n(y);const f=window.wp.blocks,v=window.wp.primitives;var b=n(848);const w=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M9 9v6h11V9H9zM4 20h1.5V4H4v16z"})}),S=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M12.5 15v5H11v-5H4V9h7V4h1.5v5h7v6h-7Z"})}),x=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M4 15h11V9H4v6zM18.5 4v16H20V4h-1.5z"})}),k=window.wp.components,T="__experimentalEmailFlexLayout";function C(e){return(0,f.hasBlockSupport)(e,T)}function P({justificationValue:e,onChange:t,isToolbar:n=!1}){const a=[{value:"left",icon:w,label:(0,u.__)("Justify items left","mailpoet")},{value:"center",icon:S,label:(0,u.__)("Justify items center","mailpoet")},{value:"right",icon:x,label:(0,u.__)("Justify items right","mailpoet")}];if(n){const n=a.map((e=>e.value));return(0,o.createElement)(m.JustifyContentControl,{value:e,onChange:t,allowedControls:n,popoverProps:{placement:"bottom-start"}})}return(0,o.createElement)(k.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,label:(0,u.__)("Justification","mailpoet"),value:e,onChange:t,className:"block-editor-hooks__flex-layout-justification-controls"},a.map((({value:e,icon:t,label:n})=>(0,o.createElement)(k.__experimentalToggleGroupControlOptionIcon,{key:e,value:e,icon:t,label:n}))))}function N({setAttributes:e,attributes:t,name:n}){if(!(0,f.getBlockSupport)(n,T,{}))return null;const{justifyContent:a="left"}=t.layout||{},l=n=>{e({layout:{...t.layout,justifyContent:n}})};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(m.InspectorControls,null,(0,o.createElement)(k.PanelBody,{title:(0,u.__)("Layout","mailpoet")},(0,o.createElement)(k.Flex,null,(0,o.createElement)(k.FlexItem,null,(0,o.createElement)(P,{justificationValue:a,onChange:l}))))),(0,o.createElement)(m.BlockControls,{group:"block",__experimentalShareWithChildBlocks:!0},(0,o.createElement)(P,{justificationValue:a,onChange:l,isToolbar:!0})))}function I(e){return C(e.name)?{...e,attributes:{...e.attributes,layout:{type:"object"}}}:e}const M=(0,p.createHigherOrderComponent)((e=>t=>[C(t.name)&&(0,o.createElement)(N,{key:"layout",...t}),(0,o.createElement)(e,{key:"edit",...t})]),"withLayoutControls");function B({block:e,props:t}){const{attributes:n}=t,{layout:a}=n,l=`is-content-justification-${a?.justifyContent||"left"}`,i=E()(l,"is-layout-email-flex is-layout-flex");return(0,o.createElement)(e,{...t,className:i})}const R=(0,p.createHigherOrderComponent)((e=>function(t){return C(t.name)?(0,o.createElement)(B,{block:e,props:t}):(0,o.createElement)(e,{...t})}),"withLayoutStyles"),A=window.wp.editor,j=window.wp.coreData,L="email-editor/editor",D="email",F="block",V=window.wp.privateApis,{lock:O,unlock:z}=(0,V.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/edit-post"),H=window.wp.mediaUtils;function G(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(n=G(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}const U=function(){for(var e,t,n=0,a="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=G(e))&&(a&&(a+=" "),a+=t);return a},W=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),$=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})}),q=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})}),Y=window.wp.viewport,Z=window.wp.preferences,J=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})}),X=window.wp.deprecated;var Q=n.n(X);function K(e){return["core/edit-post","core/edit-site"].includes(e)?(Q()(`${e} interface scope`,{alternative:"core interface scope",hint:"core/edit-post and core/edit-site are merging.",version:"6.6"}),"core"):e}function ee(e,t){return"core"===e&&"edit-site/template"===t?(Q()("edit-site/template sidebar",{alternative:"edit-post/document",version:"6.6"}),"edit-post/document"):"core"===e&&"edit-site/block-inspector"===t?(Q()("edit-site/block-inspector sidebar",{alternative:"edit-post/block",version:"6.6"}),"edit-post/block"):t}const te=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e=K(e),area:t=ee(e,t)}),ne=(e,t)=>({registry:n,dispatch:a})=>{t&&(e=K(e),t=ee(e,t),n.select(Z.store).get(e,"isComplementaryAreaVisible")||n.dispatch(Z.store).set(e,"isComplementaryAreaVisible",!0),a({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},ae=e=>({registry:t})=>{e=K(e),t.select(Z.store).get(e,"isComplementaryAreaVisible")&&t.dispatch(Z.store).set(e,"isComplementaryAreaVisible",!1)},le=(e,t)=>({registry:n})=>{if(!t)return;e=K(e),t=ee(e,t);const a=n.select(Z.store).get(e,"pinnedItems");!0!==a?.[t]&&n.dispatch(Z.store).set(e,"pinnedItems",{...a,[t]:!0})},oe=(e,t)=>({registry:n})=>{if(!t)return;e=K(e),t=ee(e,t);const a=n.select(Z.store).get(e,"pinnedItems");n.dispatch(Z.store).set(e,"pinnedItems",{...a,[t]:!1})};function ie(e,t){return function({registry:n}){Q()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),n.dispatch(Z.store).toggle(e,t)}}function re(e,t,n){return function({registry:a}){Q()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),a.dispatch(Z.store).set(e,t,!!n)}}function se(e,t){return function({registry:n}){Q()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),n.dispatch(Z.store).setDefaults(e,t)}}function ce(e){return{type:"OPEN_MODAL",name:e}}function me(){return{type:"CLOSE_MODAL"}}const pe=(0,i.createRegistrySelector)((e=>(t,n)=>{n=K(n);const a=e(Z.store).get(n,"isComplementaryAreaVisible");if(void 0!==a)return!1===a?null:t?.complementaryAreas?.[n]})),de=(0,i.createRegistrySelector)((e=>(t,n)=>{n=K(n);const a=e(Z.store).get(n,"isComplementaryAreaVisible"),l=t?.complementaryAreas?.[n];return a&&void 0===l})),ue=(0,i.createRegistrySelector)((e=>(t,n,a)=>{var l;a=ee(n=K(n),a);const o=e(Z.store).get(n,"pinnedItems");return null===(l=o?.[a])||void 0===l||l})),ge=(0,i.createRegistrySelector)((e=>(t,n,a)=>(Q()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(Z.store).get(n,a))));function _e(e,t){return e.activeModal===t}const he=(0,i.combineReducers)({complementaryAreas:function(e={},t){switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:a}=t;return e[n]?e:{...e,[n]:a}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:a}=t;return{...e,[n]:a}}}return e},activeModal:function(e=null,t){switch(t.type){case"OPEN_MODAL":return t.name;case"CLOSE_MODAL":return null}return e}}),ye=(0,i.createReduxStore)("core/interface",{reducer:he,actions:e,selectors:t});(0,i.register)(ye);const Ee=(0,window.wp.plugins.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),fe=Ee((function({as:e=k.Button,scope:t,identifier:n,icon:a,selectedIcon:l,name:o,shortcut:r,...s}){const c=e,m=(0,i.useSelect)((e=>e(ye).getActiveComplementaryArea(t)===n),[n,t]),{enableComplementaryArea:p,disableComplementaryArea:d}=(0,i.useDispatch)(ye);return(0,b.jsx)(c,{icon:l&&m?l:a,"aria-controls":n.replace("/",":"),"aria-checked":(u=s.role,["checkbox","option","radio","switch","menuitemcheckbox","menuitemradio","treeitem"].includes(u)?m:void 0),onClick:()=>{m?d(t):p(t,n)},shortcut:r,...s});var u})),ve=({smallScreenTitle:e,children:t,className:n,toggleButtonProps:a})=>{const l=(0,b.jsx)(fe,{icon:J,...a});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"components-panel__header interface-complementary-area-header__small",children:[e&&(0,b.jsx)("h2",{className:"interface-complementary-area-header__small-title",children:e}),l]}),(0,b.jsxs)("div",{className:U("components-panel__header","interface-complementary-area-header",n),tabIndex:-1,children:[t,l]})]})},be=()=>{};function we({name:e,as:t=k.Button,onClick:n,...a}){return(0,b.jsx)(k.Fill,{name:e,children:({onClick:e})=>(0,b.jsx)(t,{onClick:n||e?(...t)=>{(n||be)(...t),(e||be)(...t)}:void 0,...a})})}we.Slot=function({name:e,as:t=k.ButtonGroup,fillProps:n={},bubblesVirtually:a,...l}){return(0,b.jsx)(k.Slot,{name:e,bubblesVirtually:a,fillProps:n,children:e=>{if(!r.Children.toArray(e).length)return null;const n=[];r.Children.forEach(e,(({props:{__unstableExplicitMenuItem:e,__unstableTarget:t}})=>{t&&e&&n.push(t)}));const a=r.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&n.includes(e.props.__unstableTarget)?null:e));return(0,b.jsx)(t,{...l,children:a})}})};const Se=we,xe=({__unstableExplicitMenuItem:e,__unstableTarget:t,...n})=>(0,b.jsx)(k.MenuItem,{...n});function ke({scope:e,target:t,__unstableExplicitMenuItem:n,...a}){return(0,b.jsx)(fe,{as:a=>(0,b.jsx)(Se,{__unstableExplicitMenuItem:n,__unstableTarget:`${e}/${t}`,as:xe,name:`${e}/plugin-more-menu`,...a}),role:"menuitemcheckbox",selectedIcon:W,name:t,scope:e,...a})}function Te({scope:e,...t}){return(0,b.jsx)(k.Fill,{name:`PinnedItems/${e}`,...t})}Te.Slot=function({scope:e,className:t,...n}){return(0,b.jsx)(k.Slot,{name:`PinnedItems/${e}`,...n,children:e=>e?.length>0&&(0,b.jsx)("div",{className:U(t,"interface-pinned-items"),children:e})})};const Ce=Te,Pe={open:{width:280},closed:{width:0},mobileOpen:{width:"100vw"}};function Ne({activeArea:e,isActive:t,scope:n,children:a,className:l,id:o}){const i=(0,p.useReducedMotion)(),s=(0,p.useViewportMatch)("medium","<"),c=(0,p.usePrevious)(e),m=(0,p.usePrevious)(t),[,d]=(0,r.useState)({});(0,r.useEffect)((()=>{d({})}),[t]);const u={type:"tween",duration:i||s||c&&e&&e!==c?0:.3,ease:[.6,0,.4,1]};return(0,b.jsx)(k.Fill,{name:`ComplementaryArea/${n}`,children:(0,b.jsx)(k.__unstableAnimatePresence,{initial:!1,children:(m||t)&&(0,b.jsx)(k.__unstableMotion.div,{variants:Pe,initial:"closed",animate:s?"mobileOpen":"open",exit:"closed",transition:u,className:"interface-complementary-area__fill",children:(0,b.jsx)("div",{id:o,className:l,style:{width:s?"100vw":280},children:a})})})})}const Ie=Ee((function({children:e,className:t,closeLabel:n=(0,u.__)("Close plugin"),identifier:a,header:l,headerClassName:o,icon:s,isPinnable:c=!0,panelClassName:m,scope:p,name:d,smallScreenTitle:g,title:_,toggleShortcut:h,isActiveByDefault:y}){const[E,f]=(0,r.useState)(!1),{isLoading:v,isActive:w,isPinned:S,activeArea:x,isSmall:T,isLarge:C,showIconLabels:P}=(0,i.useSelect)((e=>{const{getActiveComplementaryArea:t,isComplementaryAreaLoading:n,isItemPinned:l}=e(ye),{get:o}=e(Z.store),i=t(p);return{isLoading:n(p),isActive:i===a,isPinned:l(p,a),activeArea:i,isSmall:e(Y.store).isViewportMatch("< medium"),isLarge:e(Y.store).isViewportMatch("large"),showIconLabels:o("core","showIconLabels")}}),[a,p]);!function(e,t,n,a,l){const o=(0,r.useRef)(!1),s=(0,r.useRef)(!1),{enableComplementaryArea:c,disableComplementaryArea:m}=(0,i.useDispatch)(ye);(0,r.useEffect)((()=>{a&&l&&!o.current?(m(e),s.current=!0):s.current&&!l&&o.current?(s.current=!1,c(e,t)):s.current&&n&&n!==t&&(s.current=!1),l!==o.current&&(o.current=l)}),[a,l,e,t,n,m,c])}(p,a,x,w,T);const{enableComplementaryArea:N,disableComplementaryArea:I,pinItem:M,unpinItem:B}=(0,i.useDispatch)(ye);if((0,r.useEffect)((()=>{y&&void 0===x&&!T?N(p,a):void 0===x&&T&&I(p,a),f(!0)}),[x,y,p,a,T,N,I]),E)return(0,b.jsxs)(b.Fragment,{children:[c&&(0,b.jsx)(Ce,{scope:p,children:S&&(0,b.jsx)(fe,{scope:p,identifier:a,isPressed:w&&(!P||C),"aria-expanded":w,"aria-disabled":v,label:_,icon:P?W:s,showTooltip:!P,variant:P?"tertiary":void 0,size:"compact",shortcut:h})}),d&&c&&(0,b.jsx)(ke,{target:d,scope:p,icon:s,children:_}),(0,b.jsxs)(Ne,{activeArea:x,isActive:w,className:U("interface-complementary-area",t),scope:p,id:a.replace("/",":"),children:[(0,b.jsx)(ve,{className:o,closeLabel:n,onClose:()=>I(p),smallScreenTitle:g,toggleButtonProps:{label:n,size:"small",shortcut:h,scope:p,identifier:a},children:l||(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h2",{className:"interface-complementary-area-header__title",children:_}),c&&(0,b.jsx)(k.Button,{className:"interface-complementary-area__pin-unpin-item",icon:S?$:q,label:S?(0,u.__)("Unpin from toolbar"):(0,u.__)("Pin to toolbar"),onClick:()=>(S?B:M)(p,a),isPressed:S,"aria-expanded":S,size:"compact"})]})}),(0,b.jsx)(k.Panel,{className:m,children:e})]})]})}));Ie.Slot=function({scope:e,...t}){return(0,b.jsx)(k.Slot,{name:`ComplementaryArea/${e}`,...t})};const Me=Ie,Be=({isActive:e})=>((0,r.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,r.useEffect)((()=>(e?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{e&&document.body.classList.remove("is-fullscreen-mode")})),[e]),null);function Re({children:e,className:t,ariaLabel:n,as:a="div",...l}){return(0,b.jsx)(a,{className:U("interface-navigable-region",t),"aria-label":n,role:"region",tabIndex:"-1",...l,children:e})}const Ae={type:"tween",duration:.25,ease:[.6,0,.4,1]},je={hidden:{opacity:1,marginTop:-60},visible:{opacity:1,marginTop:0},distractionFreeHover:{opacity:1,marginTop:0,transition:{...Ae,delay:.2,delayChildren:.2}},distractionFreeHidden:{opacity:0,marginTop:-60},distractionFreeDisabled:{opacity:0,marginTop:0,transition:{...Ae,delay:.8,delayChildren:.8}}},Le=(0,r.forwardRef)((function({isDistractionFree:e,footer:t,header:n,editorNotices:a,sidebar:l,secondarySidebar:o,content:i,actions:s,labels:c,className:m,enableRegionNavigation:d=!0,shortcuts:g},_){const[h,y]=(0,p.useResizeObserver)(),E=(0,p.useViewportMatch)("medium","<"),f={type:"tween",duration:(0,p.useReducedMotion)()?0:.25,ease:[.6,0,.4,1]},v=(0,k.__unstableUseNavigateRegions)(g);!function(e){(0,r.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const w={
/* translators: accessibility text for the top bar landmark region. */
header:(0,u._x)("Header","header landmark area"),
/* translators: accessibility text for the content landmark region. */
body:(0,u.__)("Content"),
/* translators: accessibility text for the secondary sidebar landmark region. */
secondarySidebar:(0,u.__)("Block Library"),
/* translators: accessibility text for the settings landmark region. */
sidebar:(0,u.__)("Settings"),
/* translators: accessibility text for the publish landmark region. */
actions:(0,u.__)("Publish"),
/* translators: accessibility text for the footer landmark region. */
footer:(0,u.__)("Footer"),...c};return(0,b.jsxs)("div",{...d?v:{},ref:(0,p.useMergeRefs)([_,d?v.ref:void 0]),className:U(m,"interface-interface-skeleton",v.className,!!t&&"has-footer"),children:[(0,b.jsxs)("div",{className:"interface-interface-skeleton__editor",children:[(0,b.jsx)(k.__unstableAnimatePresence,{initial:!1,children:!!n&&(0,b.jsx)(Re,{as:k.__unstableMotion.div,className:"interface-interface-skeleton__header","aria-label":w.header,initial:e&&!E?"distractionFreeHidden":"hidden",whileHover:e&&!E?"distractionFreeHover":"visible",animate:e&&!E?"distractionFreeDisabled":"visible",exit:e&&!E?"distractionFreeHidden":"hidden",variants:je,transition:f,children:n})}),e&&(0,b.jsx)("div",{className:"interface-interface-skeleton__header",children:a}),(0,b.jsxs)("div",{className:"interface-interface-skeleton__body",children:[(0,b.jsx)(k.__unstableAnimatePresence,{initial:!1,children:!!o&&(0,b.jsx)(Re,{className:"interface-interface-skeleton__secondary-sidebar",ariaLabel:w.secondarySidebar,as:k.__unstableMotion.div,initial:"closed",animate:"open",exit:"closed",variants:{open:{width:y.width},closed:{width:0}},transition:f,children:(0,b.jsxs)(k.__unstableMotion.div,{style:{position:"absolute",width:E?"100vw":"fit-content",height:"100%",left:0},variants:{open:{x:0},closed:{x:"-100%"}},transition:f,children:[h,o]})})}),(0,b.jsx)(Re,{className:"interface-interface-skeleton__content",ariaLabel:w.body,children:i}),!!l&&(0,b.jsx)(Re,{className:"interface-interface-skeleton__sidebar",ariaLabel:w.sidebar,children:l}),!!s&&(0,b.jsx)(Re,{className:"interface-interface-skeleton__actions",ariaLabel:w.actions,children:s})]})]}),!!t&&(0,b.jsx)(Re,{className:"interface-interface-skeleton__footer",ariaLabel:w.footer,children:t})]})}));var De=n(744),Fe=n.n(De);function Ve(){const{templateTheme:e,templateId:t}=(0,i.useSelect)((e=>{let t={},n=null,a="";if("mailpoet_email"===e(A.store).getCurrentPostType()){const l=e(L).getEditedPostTemplate();t=l?.mailpoet_email_theme||{},n=l?.id,a=l?.content}else t=e(A.store).getCurrentPostAttribute("mailpoet_email_theme")||{};return{templateTheme:t,templateId:n,templateContent:a}}),[]);return{templateTheme:e,updateTemplateTheme:(0,r.useCallback)((e=>{t&&(0,i.dispatch)(j.store).editEntityRecord("postType","wp_template",t,{mailpoet_email_theme:e})}),[t])}}const{useGlobalStylesOutputWithConfig:Oe}=z(m.privateApis);function ze(){const{hasEdits:e,autosaveInterval:t}=(0,i.useSelect)((e=>({hasEdits:e(L).hasEdits(),autosaveInterval:e(L).getAutosaveInterval()})),[]),{saveEditedEmail:n}=(0,i.useDispatch)(L);return(0,r.useEffect)((()=>{let a;return e&&t>0&&(a=setTimeout((()=>{n()}),1e3*t)),()=>{a&&clearTimeout(a)}}),[e,t,n]),null}const He=(0,b.jsx)(v.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4 14.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h8v13zm4.5-.5c0 .3-.2.5-.5.5h-2.5v-13H18c.3 0 .5.2.5.5v12z"})}),{Tabs:Ge}=z(k.privateApis),Ue=r.forwardRef((function(e,t){return(0,o.createElement)(Ge.TabList,{ref:t},(0,o.createElement)(Ge.Tab,{tabId:D},(0,u.__)("Email","mailpoet")),(0,o.createElement)(Ge.Tab,{tabId:F},(0,u.__)("Block")))}));function We(){var e,t,n;const[a]=(0,j.useEntityProp)("postType","mailpoet_email","mailpoet_data"),{updateEmailMailPoetProperty:l}=(0,i.useDispatch)(L),s=(0,r.createInterpolateElement)((0,u.__)("Use shortcodes to personalize your email, or learn more about <bestPracticeLink>best practices</bestPracticeLink> and using <emojiLink>emoji in subject lines</emojiLink>.","mailpoet"),{bestPracticeLink:(0,o.createElement)("a",{href:"https://www.mailpoet.com/blog/17-email-subject-line-best-practices-to-boost-engagement/",target:"_blank",rel:"noopener noreferrer"}),emojiLink:(0,o.createElement)("a",{href:"https://www.mailpoet.com/blog/tips-using-emojis-in-subject-lines/",target:"_blank",rel:"noopener noreferrer"})}),c=(0,o.createElement)(o.Fragment,null,(0,o.createElement)("span",null,(0,u.__)("Subject","mailpoet")),(0,o.createElement)(k.ExternalLink,{href:"https://kb.mailpoet.com/article/215-personalize-newsletter-with-shortcodes#list"},(0,u.__)("Shortcode guide","mailpoet"))),m=null!==(e=a?.preheader?.length)&&void 0!==e?e:0,p=(0,o.createElement)(o.Fragment,null,(0,o.createElement)("span",null,(0,u.__)("Preview text","mailpoet")),(0,o.createElement)("span",{className:E()("mailpoet-settings-panel__preview-text-length",{"mailpoet-settings-panel__preview-text-length-warning":m>80,"mailpoet-settings-panel__preview-text-length-error":m>150})},m,"/",150));return(0,o.createElement)(k.PanelBody,{title:(0,u.__)("Details","mailpoet"),className:"mailpoet-email-editor__settings-panel"},(0,o.createElement)(k.TextareaControl,{className:"mailpoet-settings-panel__subject",label:c,placeholder:(0,u.__)("Eg. The summer sale is here!","mailpoet"),value:null!==(t=a?.subject)&&void 0!==t?t:"",onChange:e=>l("subject",e),"data-automation-id":"email_subject"}),(0,o.createElement)("div",{className:"mailpoet-settings-panel__help"},(0,o.createElement)(k.__experimentalText,null,s)),(0,o.createElement)(k.TextareaControl,{className:"mailpoet-settings-panel__preview-text",label:p,placeholder:(0,u.__)("Add a preview text to capture subscribers' attention and increase open rates.","mailpoet"),value:null!==(n=a?.preheader)&&void 0!==n?n:"",onChange:e=>l("preheader",e),"data-automation-id":"email_preview_text"}),(0,o.createElement)("div",{className:"mailpoet-settings-panel__help"},(0,o.createElement)(k.__experimentalText,null,(0,r.createInterpolateElement)((0,u.__)("<link>This text</link> will appear in the inbox, underneath the subject line.","mailpoet"),{link:(0,o.createElement)("a",{href:new URL("article/418-preview-text","https://kb.mailpoet.com/").toString(),key:"preview-text-kb",target:"_blank",rel:"noopener noreferrer"})}))))}const $e=(0,r.forwardRef)((function({icon:e,size:t=24,...n},a){return(0,r.cloneElement)(e,{width:t,height:t,...n,ref:a})})),qe=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"})});function Ye(){return(0,o.createElement)(k.Panel,{className:"mailpoet-email-sidebar__email-type-info"},(0,o.createElement)(k.PanelBody,null,(0,o.createElement)(k.PanelRow,null,(0,o.createElement)("span",{className:"mailpoet-email-type-info__icon"},(0,o.createElement)($e,{icon:qe})),(0,o.createElement)("div",{className:"mailpoet-email-type-info__content"},(0,o.createElement)("h2",null,(0,u.__)("Newsletter","mailpoet")),(0,o.createElement)("span",null,(0,u.__)("Send or schedule a newsletter to connect with your subscribers.","mailpoet"))))))}const Ze=window.wp.htmlEntities,Je=window.wp.notices,Xe=window.wp.apiFetch;var Qe=n.n(Xe);const Ke=window.wp.url;function et(){const{onNavigateToEntityRecord:e,template:t,hasHistory:n}=(0,i.useSelect)((e=>{const{getEditorSettings:t}=z(e(A.store)),n=t();return{onNavigateToEntityRecord:n.onNavigateToEntityRecord,hasHistory:!!n.onNavigateToPreviousEntityRecord,template:e(L).getEditedPostTemplate()}}),[]),{saveEditedEntityRecord:a}=(0,i.useDispatch)(j.store),{createSuccessNotice:l,createErrorNotice:r}=(0,i.useDispatch)(Je.store);return(0,o.createElement)(k.PanelBody,{title:(0,u.__)("Templates Experiment","mailpoet"),className:"mailpoet-email-editor__settings-panel"},(0,o.createElement)("p",null,"Components from this Panel will be placed in different areas of the UI. They are place here in one place just to simplify the experiment."),(0,o.createElement)("hr",null),(0,o.createElement)("h3",null,"Edit template toggle"),t&&!n&&(0,o.createElement)(k.Button,{variant:"primary",onClick:()=>{e({postId:t.id,postType:"wp_template"})},disabled:!t.id},(0,u.__)("Edit template","mailpoet")),(0,o.createElement)("hr",null),(0,o.createElement)("h3",null,"Revert Template"),(0,o.createElement)(k.Button,{variant:"primary",onClick:()=>{!async function(){try{await async function(e){const t=(0,i.select)(j.store).getEntityConfig("postType",e.type),n=(0,Ke.addQueryArgs)(`${t.baseURL}/${e.id}`,{context:"edit",source:"theme"}),a=await Qe()({path:n}),l=(0,f.parse)(a?.content?.raw);(0,i.dispatch)(j.store).editEntityRecord("postType",e.type,a.id,{content:({blocks:e=[]})=>(0,f.__unstableSerializeAndClean)(e),blocks:l,source:"theme"})}(t),await a("postType",t.type,t.id,{}),l((0,u.sprintf)(/* translators: The template/part's name. */ /* translators: The template/part's name. */
(0,u.__)('"%s" reset.',"mailpoet"),(0,Ze.decodeEntities)(t.title)),{type:"snackbar",id:"edit-site-template-reverted"})}catch(e){r((0,u.__)("An error occurred while reverting the template.","mailpoet"),{type:"snackbar"})}}()}},(0,u.__)("Revert customizations","mailpoet")))}function tt(){return(0,o.createElement)(k.Panel,null,(0,o.createElement)(Ye,null),(0,o.createElement)(et,null),(0,o.createElement)(We,null))}const nt=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})});function at(){const e=(0,i.useSelect)((e=>e(L).getCurrentTemplate()),[]);return(0,o.createElement)(k.Panel,{className:"mailpoet-email-sidebar__email-type-info"},(0,o.createElement)(k.PanelBody,null,(0,o.createElement)(k.PanelRow,null,(0,o.createElement)("span",{className:"mailpoet-email-type-info__icon"},(0,o.createElement)($e,{icon:nt})),(0,o.createElement)("div",{className:"mailpoet-email-type-info__content"},(0,o.createElement)("h2",null,e?.title||(0,u.__)("Template","mailpoet")),(0,o.createElement)("span",null,e?.description||"")))))}function lt(){return(0,o.createElement)(k.Panel,null,(0,o.createElement)(at,null),(0,o.createElement)(et,null))}const{Tabs:ot}=z(k.privateApis);function it(e){const{isEditingTemplate:t}=(0,i.useSelect)((e=>({isEditingTemplate:"wp_template"===e(A.store).getCurrentPostType()})),[]),n=(0,r.useRef)(null),a=(0,r.useContext)(ot.Context);return(0,o.createElement)(Me,{identifier:"email-editor/editor/main",headerClassName:"editor-sidebar__panel-tabs",className:"edit-post-sidebar",header:(0,o.createElement)(ot.Context.Provider,{value:a},(0,o.createElement)(Ue,{ref:n})),icon:He,scope:L,smallScreenTitle:(0,u.__)("No title","mailpoet"),isActiveByDefault:!0,...e},(0,o.createElement)(ot.Context.Provider,{value:a},(0,o.createElement)(ot.TabPanel,{tabId:D},t?(0,o.createElement)(lt,null):(0,o.createElement)(tt,null)),(0,o.createElement)(ot.TabPanel,{tabId:F},(0,o.createElement)(m.BlockInspector,null))))}function rt(e){const{toggleSettingsSidebarActiveTab:t}=(0,i.useDispatch)(L),{activeTab:n,selectedBlockId:a}=(0,i.useSelect)((e=>({activeTab:e(L).getSettingsSidebarActiveTab(),selectedBlockId:e(m.store).getSelectedBlockClientId()})),[]);return(0,r.useEffect)((()=>{t(a?F:D)}),[a,t]),(0,o.createElement)(ot,{selectedTabId:n||D,onSelect:e=>t(e)},(0,o.createElement)(it,{...e}))}function st(){const e=(0,i.useSelect)((e=>e("core/block-editor").getSelectedBlock()),[]),t=(0,f.hasBlockSupport)(e?.name,"__experimentalBorder",!1);return(0,o.createElement)(o.Fragment,null,t&&(0,o.createElement)(k.Fill,{name:"InspectorControlsBorder"},(0,o.createElement)(k.Notice,{className:"mailpoet__grid-full-width",status:"warning",isDismissible:!1},(0,u.__)("Border display may vary or be unsupported in some email clients.","mailpoet"))),(e=>{const t=(0,f.getBlockSupport)(e,"background");return t&&!1!==t?.backgroundImage})(e?.name)&&(0,o.createElement)(k.Fill,{name:"InspectorControlsBackground"},(0,o.createElement)(k.Notice,{className:"mailpoet__grid-full-width",status:"warning",isDismissible:!1},(0,u.__)("Select a background color for email clients that do not support background images.","mailpoet"))))}const ct=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),mt=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})}),pt=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})}),dt=(0,b.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)(v.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})}),ut=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z"})}),gt=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M11.6 7l-1.1-1L5 12l5.5 6 1.1-1L7 12l4.6-5zm6 0l-1.1-1-5.5 6 5.5 6 1.1-1-4.6-5 4.6-5z"})}),_t=window.wp.keycodes,ht=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})});function yt({onClose:e,onRemove:t,postId:n}){const{getLastEntityDeleteError:a}=(0,i.useSelect)(j.store),{deleteEntityRecord:l}=(0,i.useDispatch)(j.store),{createErrorNotice:r}=(0,i.useDispatch)(Je.store),s=()=>{e()};return(0,o.createElement)(k.Modal,{className:"mailpoet-move-to-trash-modal",title:(0,u.__)("Move to trash","mailpoet"),onRequestClose:s,focusOnMount:"firstContentElement"},(0,o.createElement)("p",null,(0,u.__)("Are you sure you want to move this email to trash?","mailpoet")),(0,o.createElement)("div",{className:"mailpoet-send-preview-modal-footer"},(0,o.createElement)(k.Button,{variant:"tertiary",onClick:s},(0,u.__)("Cancel","mailpoet")),(0,o.createElement)(k.Button,{variant:"primary",onClick:async()=>{if(await l("postType","mailpoet_email",n,{},{throwOnError:!1}))t();else{const e=a("postType","mailpoet_email",n);if(410===e?.code)t();else{const t=e?.message?e.message:(0,u.__)("An error occurred while moving the email to the trash.","mailpoet");await r(t,{type:"snackbar",isDismissible:!0,context:"email-editor"})}}}},(0,u.__)("Move to trash","mailpoet"))))}function Et(){const[e,t]=(0,r.useState)(!1),{urls:n,postId:a}=(0,i.useSelect)((e=>({urls:e(L).getUrls(),postId:e(L).getEmailPostId()})),[]),[l,s]=(0,j.useEntityProp)("postType","mailpoet_email","status"),{saveEditedEmail:c,updateEmailMailPoetProperty:m}=(0,i.useDispatch)(L);return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(k.DropdownMenu,{className:"edit-site-more-menu",popoverProps:{className:"edit-site-more-menu__content"},icon:ht,label:(0,u.__)("More","mailpoet")},(()=>(0,o.createElement)(o.Fragment,null,(0,o.createElement)(k.MenuGroup,{label:(0,u._x)("View","noun","mailpoet")},(0,o.createElement)(Z.PreferenceToggleMenuItem,{scope:"core",name:"fixedToolbar",label:(0,u.__)("Top toolbar","mailpoet"),info:(0,u.__)("Access all block and document tools in a single place","mailpoet"),messageActivated:(0,u.__)("Top toolbar activated","mailpoet"),messageDeactivated:(0,u.__)("Top toolbar deactivated","mailpoet")}),(0,o.createElement)(Z.PreferenceToggleMenuItem,{scope:"core",name:"focusMode",label:(0,u.__)("Spotlight mode","mailpoet"),info:(0,u.__)("Focus at one block at a time","mailpoet"),messageActivated:(0,u.__)("Spotlight mode activated","mailpoet"),messageDeactivated:(0,u.__)("Spotlight mode deactivated","mailpoet")}),(0,o.createElement)(Z.PreferenceToggleMenuItem,{scope:L,name:"fullscreenMode",label:(0,u.__)("Fullscreen mode","mailpoet"),info:(0,u.__)("Work without distraction","mailpoet"),messageActivated:(0,u.__)("Fullscreen mode activated","mailpoet"),messageDeactivated:(0,u.__)("Fullscreen mode deactivated","mailpoet"),shortcut:_t.displayShortcut.secondary("f")})),(0,o.createElement)(k.MenuGroup,null,"trash"===l?(0,o.createElement)(k.MenuItem,{onClick:async()=>{await s("draft"),await m("deleted_at",""),await c()}},(0,u.__)("Restore from trash","mailpoet")):(0,o.createElement)(k.MenuItem,{onClick:()=>t(!0),isDestructive:!0},(0,u.__)("Move to trash","mailpoet")))))),e&&(0,o.createElement)(yt,{onClose:()=>t(!1),onRemove:()=>{window.location.href=n.listings},postId:a}))}const ft=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})}),vt=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})}),bt=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})});let wt=function(e){return e.SUCCESS="success",e.ERROR="error",e}({});function St(){const e=(0,r.useRef)(null),{requestSendingNewsletterPreview:t,togglePreviewModal:n,updateSendPreviewEmail:a}=(0,i.useDispatch)(L),{toEmail:l,isSendingPreviewEmail:s,sendingPreviewStatus:c,isModalOpened:m}=(0,i.useSelect)((e=>e(L).getPreviewState()),[]),[p]=(0,j.useEntityProp)("postType","mailpoet_email","mailpoet_data"),d=()=>{t(p.id,l)},g=()=>n(!1);return(0,r.useEffect)((()=>{m&&e.current?.focus()}),[m]),m?(0,o.createElement)(k.Modal,{className:"mailpoet-send-preview-email",title:(0,u.__)("Send a test email","mailpoet"),onRequestClose:g,focusOnMount:!1},c===wt.ERROR?(0,o.createElement)("div",{className:"mailpoet-send-preview-modal-notice-error"},(0,u.__)("Sorry, we were unable to send this email.","mailpoet"),(0,o.createElement)("ul",null,(0,o.createElement)("li",null,(0,r.createInterpolateElement)((0,u.__)("Please check your <link>sending method configuration</link> with your hosting provider.","mailpoet"),{link:(0,o.createElement)("a",{href:"admin.php?page=mailpoet-settings#mta",target:"_blank",rel:"noopener noreferrer"})})),(0,o.createElement)("li",null,(0,r.createInterpolateElement)((0,u.__)("Or, sign up for MailPoet Sending Service to easily send emails. <link>Sign up for free</link>","mailpoet"),{link:(0,o.createElement)("a",{href:new URL("free-plan","https://www.mailpoet.com/").toString(),key:"sign-up-for-free",target:"_blank",rel:"noopener noreferrer"})})))):null,(0,o.createElement)("p",null,(0,r.createInterpolateElement)((0,u.__)("Send yourself a test email to test how your email would look like in different email apps. You can also test your spam score by sending a test email to <link1>{$serviceName}</link1>. <link2>Learn more</link2>.","mailpoet").replace("{$serviceName}","Mail Tester"),{link1:(0,o.createElement)("a",{href:"https://www.mail-tester.com/",target:"_blank",rel:"noopener noreferrer"}),link2:(0,o.createElement)("a",{href:"https://kb.mailpoet.com/article/147-test-your-spam-score-with-mail-tester",target:"_blank",rel:"noopener noreferrer"})})),(0,o.createElement)(k.TextControl,{label:(0,u.__)("Send to","mailpoet"),onChange:e=>{a(e)},onKeyDown:e=>{const{keyCode:t}=e;t===_t.ENTER&&(e.preventDefault(),d())},value:l,type:"email",ref:e,required:!0}),c===wt.SUCCESS?(0,o.createElement)("p",{className:"mailpoet-send-preview-modal-notice-success"},(0,o.createElement)($e,{icon:W,style:{fill:"#4AB866"}}),(0,u.__)("Test email sent successfully!","mailpoet")):null,(0,o.createElement)("div",{className:"mailpoet-send-preview-modal-footer"},(0,o.createElement)(k.Button,{variant:"tertiary",onClick:g},(0,u.__)("Close","mailpoet")),(0,o.createElement)(k.Button,{variant:"primary",onClick:d,disabled:s||!(0,Ke.isEmail)(l)},s?(0,u.__)("Sendingâ€¦","mailpoet"):(0,u.__)("Send test email","mailpoet")))):null}function xt(){const[e]=(0,j.useEntityProp)("postType","mailpoet_email","mailpoet_data"),t=(0,i.useSelect)((e=>e(L).getDeviceType()),[]),{changePreviewDeviceType:n,togglePreviewModal:a}=(0,i.useDispatch)(L),l=e?.preview_url||"",r=e=>{n(e)},s={mobile:ft,desktop:vt};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(k.DropdownMenu,{className:"mailpoet-preview-dropdown",label:(0,u.__)("Preview","mailpoet"),icon:s[t.toLowerCase()]},(({onClose:e})=>(0,o.createElement)(o.Fragment,null,(0,o.createElement)(k.MenuGroup,null,(0,o.createElement)(k.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>r("Desktop"),icon:"Desktop"===t&&W},(0,u.__)("Desktop","mailpoet")),(0,o.createElement)(k.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>r("Mobile"),icon:"Mobile"===t&&W},(0,u.__)("Mobile","mailpoet"))),(0,o.createElement)(k.MenuGroup,null,(0,o.createElement)(k.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>{a(!0),e()}},(0,u.__)("Send a test email","mailpoet"))),l?(0,o.createElement)(k.MenuGroup,null,(0,o.createElement)("div",{className:"edit-post-header-preview__grouping-external"},(0,o.createElement)(k.Button,{className:"edit-post-header-preview__button-external components-menu-item__button",onClick:()=>{var e;e=l,window.open(e,"_blank","noreferrer")}},(0,u.__)("Preview in new tab","mailpoet"),(0,o.createElement)($e,{icon:bt})))):null))),(0,o.createElement)(St,null))}const kt=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M17.3 10.1c0-2.5-2.1-4.4-4.8-4.4-2.2 0-4.1 1.4-4.6 3.3h-.2C5.7 9 4 10.7 4 12.8c0 2.1 1.7 3.8 3.7 3.8h9c1.8 0 3.2-1.5 3.2-3.3.1-1.6-1.1-2.9-2.6-3.2zm-.5 5.1h-9c-1.2 0-2.2-1.1-2.2-2.3s1-2.4 2.2-2.4h1.3l.3-1.1c.4-1.3 1.7-2.2 3.2-2.2 1.8 0 3.3 1.3 3.3 2.9v1.3l1.3.2c.8.1 1.4.9 1.4 1.8-.1 1-.9 1.8-1.8 1.8z"})});function Tt(){const{saveEditedEmail:e}=(0,i.useDispatch)(L),{dirtyEntityRecords:t}=(0,A.useEntitiesSavedStatesIsDirty)(),{hasEdits:n,isEmpty:a,isSaving:l}=(0,i.useSelect)((e=>({hasEdits:e(L).hasEdits(),isEmpty:e(L).isEmpty(),isSaving:e(L).isSaving()})),[]),s=(0,r.useRef)(null),c=t.some((e=>"mailpoet_email"!==e.name)),m=!a&&!l&&!n,p=a||l||m;let d=(0,u.__)("Save Draft","mailpoet");return m?d=(0,u.__)("Saved","mailpoet"):l&&(d=(0,u.__)("Saving","mailpoet")),c?(0,o.createElement)("div",{ref:s},(0,o.createElement)(k.Dropdown,{popoverProps:{placement:"bottom",anchor:s.current},contentClassName:"mailpoet-email-editor-save-button__dropdown",renderToggle:({onToggle:e})=>(0,o.createElement)(k.Button,{onClick:e,variant:"tertiary"},n?(0,u.__)("Save email & template","mailpoet"):(0,u.__)("Save template","mailpoet")),renderContent:({onToggle:e})=>(0,o.createElement)(A.EntitiesSavedStates,{close:e})})):(0,o.createElement)(k.Button,{variant:"tertiary",disabled:p,onClick:e},l&&(0,o.createElement)($e,{icon:kt}),m&&(0,o.createElement)($e,{icon:W}),d)}const Ct=(0,b.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)(v.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})});function Pt(){const{showIconLabels:e}=(0,i.useSelect)((e=>({showIconLabels:e(L).isFeatureActive("showIconLabels"),postId:e(L).getEmailPostId()})),[]),[t="",n]=(0,j.useEntityProp)("postType","mailpoet_email","title"),a=(0,r.useRef)(null);return(0,o.createElement)("div",{ref:a,className:"mailpoet-email-editor-campaign-name"},(0,o.createElement)(k.Dropdown,{popoverProps:{placement:"bottom",anchor:a.current},contentClassName:"mailpoet-email-editor-campaign-name__dropdown",renderToggle:({isOpen:n,onToggle:a})=>(0,o.createElement)(o.Fragment,null,(0,o.createElement)(k.Button,{onClick:a,className:"mailpoet-email-campaign-name__link"},(0,o.createElement)(k.__experimentalText,{size:"body",as:"h1"},(0,o.createElement)(k.VisuallyHidden,{as:"span"},(0,u.__)("Editing email:","mailpoet")),t)),(0,o.createElement)(k.Button,{className:"mailpoet-email-campaign-name__toggle",icon:Ct,"aria-expanded":n,"aria-haspopup":"true",onClick:a,label:(0,u.__)("Change campaign name","mailpoet")},e&&(0,u.__)("Rename","mailpoet"))),renderContent:()=>(0,o.createElement)("div",{className:"mailpoet-email-editor-email-title-edit"},(0,o.createElement)(k.TextControl,{label:(0,u.__)("Campaign name","mailpoet"),value:t,onChange:e=>{n(e)},name:"campaign_name",help:(0,u.__)("Name your email campaign to indicate its purpose. This would only be visible to you and not shown to your subscribers.","mailpoet")}))}))}const Nt=window.wp.isShallowEqual;var It=n.n(Nt);function Mt(e){const t=(0,r.useRef)(e);return It()(e,t.current)||(t.current=e),t.current}const Bt=()=>{const e="email-validation",t=(0,i.useSelect)((t=>t(Je.store).getNotices(e)));return{notices:t,hasValidationNotice:(0,r.useCallback)((e=>e?void 0!==t.find((t=>t.id===e)):t?.length>0),[t]),addValidationNotice:(0,r.useCallback)(((t,n,a=[])=>{(0,i.dispatch)(Je.store).createNotice("error",n,{id:t,isDismissible:!1,actions:a,context:e})}),[e]),removeValidationNotice:(0,r.useCallback)((t=>{(0,i.dispatch)(Je.store).removeNotice(t,e)}),[e])}};function Rt(){const[e]=(0,j.useEntityProp)("postType","mailpoet_email","mailpoet_data"),{isDirty:t}=(0,A.useEntitiesSavedStatesIsDirty)(),{validateContent:n,isValid:a}=(()=>{const{contentBlockId:e,hasFooter:t}=(0,i.useSelect)((e=>{const t=e(m.store).getBlocks().filter((e=>"mailpoet/powered-by-mailpoet"!==e.name&&"core/post-content"!==e.name)),n=e(m.store).getBlocksByName("core/post-content");return{contentBlockId:n?.[0],hasFooter:t.length>0}})),{addValidationNotice:n,hasValidationNotice:a,removeValidationNotice:l}=Bt(),{editedContent:o,editedTemplateContent:s,defaultTemplateId:c}=(0,i.useSelect)((e=>({editedContent:e(L).getEditedEmailContent(),editedTemplateContent:e(L).getTemplateContent(),defaultTemplateId:e(j.store).getDefaultTemplateId({slug:"email-general"})}))),p=Mt(o),d=Mt(s),g=`<a href='[link:subscription_unsubscribe_url]'>${(0,u.__)("Unsubscribe","mailpoet")}</a> | <a href='[link:subscription_manage_url]'>${(0,u.__)("Manage subscription","mailpoet")}</a>`,_=(0,r.useMemo)((()=>{const n=(0,f.createBlock)("core/paragraph",{className:"has-small-font-size",content:g});return[{id:"missing-unsubscribe-link",test:e=>!e.includes("[link:subscription_unsubscribe_url]"),message:(0,u.__)('All emails must include an "Unsubscribe" link.',"mailpoet"),actions:[{label:(0,u.__)("Insert link","mailpoet"),onClick:()=>{t?(0,i.dispatch)(j.store).editEntityRecord("postType","wp_template",c,{content:`\n                      ${s}\n                      \x3c!-- wp:paragraph --\x3e\n                      ${g}\n                      \x3c!-- /wp:paragraph --\x3e\n                    `}):(0,i.dispatch)(m.store).insertBlock(n,void 0,e)}}]}]}),[e,t,g,c,s]),h=(0,r.useCallback)((()=>{let e=!0;return _.forEach((({id:t,test:o,message:i,actions:r})=>{o(p+d)?(n(t,i,r),e=!1):a(t)&&l(t)})),e}),[p,d,n,l,a,_]);return(0,i.subscribe)((()=>{a()&&h()}),L),{isValid:a(),validateContent:h}})(),{hasEmptyContent:l,isEmailSent:s,isEditingTemplate:c}=(0,i.useSelect)((e=>({hasEmptyContent:e(L).hasEmptyContent(),isEmailSent:e(L).isEmailSent(),isEditingTemplate:"wp_template"===e(A.store).getCurrentPostType()})),[]),p=c||l||s||a||t,d=e;return(0,o.createElement)(k.Button,{variant:"primary",onClick:()=>{n()&&(window.location.href=`admin.php?page=mailpoet-newsletters#/send/${d.id}`)},disabled:p},(0,u.__)("Send","mailpoet"))}const At=k.ToolbarItem,jt=m.BlockToolbar;function Lt(){const e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useRef)(),a=(0,r.useRef)(),[l,s]=(0,r.useState)(!1),{undo:c,redo:p}=(0,i.useDispatch)(j.store),{setIsInserterOpened:d,setIsListViewOpened:g}=(0,i.useDispatch)(A.store),{isInserterSidebarOpened:_,isListviewSidebarOpened:h,isFixedToolbarActive:y,isBlockSelected:f,hasUndo:v,hasRedo:b,hasDocumentNavigationHistory:w}=(0,i.useSelect)((e=>{const{getEditorSettings:t}=z(e(A.store)),n=t();return{isInserterSidebarOpened:e(A.store).isInserterOpened(),isListviewSidebarOpened:e(A.store).isListViewOpened(),isFixedToolbarActive:e(Z.store).get("core","fixedToolbar"),isBlockSelected:!!e(m.store).getBlockSelectionStart(),hasUndo:e(j.store).hasUndo(),hasRedo:e(j.store).hasRedo(),hasDocumentNavigationHistory:!!n.onNavigateToPreviousEntityRecord}}),[]),S=e=>{e.preventDefault()},x=_?(0,u.__)("Close","mailpoet"):(0,u.__)("Add","mailpoet");return(0,o.createElement)("div",{className:"editor-header edit-post-header"},(0,o.createElement)("div",{className:"editor-header__toolbar"},(0,o.createElement)(m.NavigableToolbar,{className:"editor-document-tools edit-post-header-toolbar is-unstyled","aria-label":(0,u.__)("Email document tools","mailpoet")},(0,o.createElement)("div",{className:"editor-document-tools__left"},(0,o.createElement)(At,{ref:e,as:k.Button,className:"editor-header-toolbar__inserter-toggle edit-post-header-toolbar__inserter-toggle",variant:"primary",isPressed:_,onMouseDown:S,onClick:()=>d(!_),disabled:!1,icon:ct,label:x,showTooltip:!0,"aria-expanded":_}),(0,o.createElement)(At,{ref:n,as:k.Button,className:"editor-history__undo",isPressed:!1,onMouseDown:S,onClick:c,disabled:!v,icon:mt,label:(0,u.__)("Undo","mailpoet"),showTooltip:!0}),(0,o.createElement)(At,{ref:a,as:k.Button,className:"editor-history__redo",isPressed:!1,onMouseDown:S,onClick:p,disabled:!b,icon:pt,label:(0,u.__)("Redo","mailpoet"),showTooltip:!0}),(0,o.createElement)(At,{ref:t,as:k.Button,className:"editor-header-toolbar__document-overview-toggle edit-post-header-toolbar__document-overview-toggle",isPressed:h,onMouseDown:S,onClick:()=>g(!h),disabled:!1,icon:dt,label:(0,u.__)("List view","mailpoet"),showTooltip:!0,"aria-expanded":_}))),y&&f&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{className:E()("editor-collapsible-block-toolbar",{"is-collapsed":l})},(0,o.createElement)(jt,{hideDragHandle:!0})),(0,o.createElement)(k.Button,{className:"editor-header__block-tools-toggle edit-post-header__block-tools-toggle",icon:l?ut:gt,onClick:()=>{s((e=>!e))},label:l?(0,u.__)("Show block tools","mailpoet"):(0,u.__)("Hide block tools","mailpoet")}))),(!y||!f||l)&&(0,o.createElement)("div",{className:"editor-header__center edit-post-header__center"},w?(0,o.createElement)(A.DocumentBar,null):(0,o.createElement)(Pt,null)),(0,o.createElement)("div",{className:"editor-header__settings edit-post-header__settings"},(0,o.createElement)(Tt,null),(0,o.createElement)(xt,null),(0,o.createElement)(Rt,null),(0,o.createElement)(Ce.Slot,{scope:L}),(0,o.createElement)(Et,null)))}function Dt(){return(0,o.createElement)("div",{className:"editor-list-view-sidebar"},(0,o.createElement)(m.__experimentalListView,null))}function Ft(){const{postContentId:e,isEditingEmailContent:t}=(0,i.useSelect)((e=>{const t=e(m.store).getBlocks();return{postContentId:t.find((e=>"core/post-content"===e.name))?.clientId,isEditingEmailContent:"wp_template"!==e(A.store).getCurrentPostType()}})),{setIsInserterOpened:n}=(0,i.useDispatch)(A.store);return(0,o.createElement)("div",{className:"editor-inserter-sidebar"},(0,o.createElement)("div",{className:"editor-inserter-sidebar__content"},(0,o.createElement)(m.__experimentalLibrary,{showMostUsedBlocks:!0,showInserterHelpPanel:!1,rootClientId:t?e:null,onClose:()=>n(!1)})))}function Vt(){const{isEmailSent:e}=(0,i.useSelect)((e=>({isEmailSent:e(L).isEmailSent()})),[]);return(0,r.useEffect)((()=>{e&&(0,i.dispatch)(Je.store).createNotice("warning",(0,u.__)("This email has already been sent. It can be edited, but not sent again. Duplicate this email if you want to send it again.","mailpoet"),{id:"email-sent",isDismissible:!1,context:"email-editor"})}),[e]),null}function Ot(){const{notices:e}=Bt();return 0===e.length?null:(0,o.createElement)(k.Notice,{status:"error",className:"mailpoet-email-editor-validation-errors components-editor-notices__pinned",isDismissible:!1},(0,o.createElement)(o.Fragment,null,(0,o.createElement)("strong",null,(0,u.__)("Fix errors to continue:","mailpoet")),(0,o.createElement)("ul",null,e.map((({id:e,content:t,actions:n})=>(0,o.createElement)("li",{key:e},t,n.length>0?n.map((({label:e,onClick:t})=>(0,o.createElement)(k.Button,{key:e,onClick:t,variant:"link"},e))):null))))))}function zt({context:e="email-editor"}){const{notices:t}=(0,i.useSelect)((t=>({notices:t(Je.store).getNotices(e)})),[]),{removeNotice:n}=(0,i.useDispatch)(Je.store),a=t.filter((({type:e})=>"snackbar"===e));return(0,o.createElement)(k.SnackbarList,{notices:a,className:"components-editor-notices__snackbar",onRemove:t=>n(t,e)})}function Ht(){const{notices:e}=(0,i.useSelect)((e=>({notices:e(Je.store).getNotices("email-editor")})),[]),{removeNotice:t}=(0,i.useDispatch)(Je.store),n=e.filter((({isDismissible:e,type:t})=>e&&"default"===t)),a=e.filter((({isDismissible:e,type:t})=>!e&&"default"===t));return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(k.NoticeList,{notices:a,className:"components-editor-notices__pinned"}),(0,o.createElement)(k.NoticeList,{notices:n,className:"components-editor-notices__dismissible",onRemove:e=>t(e,"email-editor")}),(0,o.createElement)(Ot,null),(0,o.createElement)(zt,{context:"global"}),(0,o.createElement)(zt,{context:"email-editor"}))}const Gt=(0,b.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)(v.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M20 12a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 0 1-6.5 6.5v-13a6.5 6.5 0 0 1 6.5 6.5Z"})}),Ut=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M6.9 7L3 17.8h1.7l1-2.8h4.1l1 2.8h1.7L8.6 7H6.9zm-.7 6.6l1.5-4.3 1.5 4.3h-3zM21.6 17c-.1.1-.2.2-.3.2-.1.1-.2.1-.4.1s-.3-.1-.4-.2c-.1-.1-.1-.3-.1-.6V12c0-.5 0-1-.1-1.4-.1-.4-.3-.7-.5-1-.2-.2-.5-.4-.9-.5-.4 0-.8-.1-1.3-.1s-1 .1-1.4.2c-.4.1-.7.3-1 .4-.2.2-.4.3-.6.5-.1.2-.2.4-.2.7 0 .3.1.5.2.8.2.2.4.3.8.3.3 0 .6-.1.8-.3.2-.2.3-.4.3-.7 0-.3-.1-.5-.2-.7-.2-.2-.4-.3-.6-.4.2-.2.4-.3.7-.4.3-.1.6-.1.8-.1.3 0 .6 0 .8.1.2.1.4.3.5.5.1.2.2.5.2.9v1.1c0 .3-.1.5-.3.6-.2.2-.5.3-.9.4-.3.1-.7.3-1.1.4-.4.1-.8.3-1.1.5-.3.2-.6.4-.8.7-.2.3-.3.7-.3 1.2 0 .6.2 1.1.5 1.4.3.4.9.5 1.6.5.5 0 1-.1 1.4-.3.4-.2.8-.6 1.1-1.1 0 .4.1.7.3 1 .2.3.6.4 1.2.4.4 0 .7-.1.9-.2.2-.1.5-.3.7-.4h-.3zm-3-.9c-.2.4-.5.7-.8.8-.3.2-.6.2-.8.2-.4 0-.6-.1-.9-.3-.2-.2-.3-.6-.3-1.1 0-.5.1-.9.3-1.2s.5-.5.8-.7c.3-.2.7-.3 1-.5.3-.1.6-.3.7-.6v3.4z"})}),Wt=(0,b.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)(v.Path,{d:"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3zm-5.1 7.6c-2.5 0-4.6-2.1-4.6-4.6 0-.3.1-1 .8-2.3.5-.9 1.1-1.9 2-3.1.7-.9 1.3-1.7 1.8-2.3.7.8 1.3 1.6 1.8 2.3.8 1.1 1.5 2.2 2 3.1.7 1.3.8 2 .8 2.3 0 2.5-2.1 4.6-4.6 4.6z"})}),$t={start:{scale:1,opacity:1},hover:{scale:0,opacity:0}},qt={hover:{opacity:1},start:{opacity:.5}},Yt={hover:{scale:1,opacity:1},start:{scale:0,opacity:0}};function Zt({label:e,isFocused:t,withHoverView:n}){const{styles:a,colors:l}=(0,i.useSelect)((e=>({styles:e(L).getStyles(),colors:e(L).getPaletteColors()})),[]),s=a?.color?.background||"#ffffff",c=a?.elements?.heading?.typography?.fontFamily||"inherit",m=a?.elements?.heading?.color?.text||"inherit",p=a?.elements?.heading?.typography?.fontWeight||"inherit",d=l.theme.concat(l.theme),u=d.filter((({color:e})=>e.toLowerCase()!==s.toLowerCase()&&e.toLowerCase()!==m.toLowerCase())).slice(0,2),[g,_]=(0,r.useState)(!1);return(0,o.createElement)("div",{onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1)},(0,o.createElement)(k.__unstableMotion.div,{style:{height:152,width:"100%",background:s,cursor:n?"pointer":void 0},initial:"start",animate:(g||t)&&e?"hover":"start"},(0,o.createElement)(k.__unstableMotion.div,{variants:$t,style:{height:"100%",overflow:"hidden"}},(0,o.createElement)(k.__experimentalHStack,{spacing:10,justify:"center",style:{height:"100%",overflow:"hidden"}},(0,o.createElement)(k.__unstableMotion.div,{style:{fontFamily:c,fontSize:65,color:m,fontWeight:p},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:.3,type:"tween"}},"Aa"),(0,o.createElement)(k.__experimentalVStack,{spacing:4},u.map((({slug:e,color:t},n)=>(0,o.createElement)(k.__unstableMotion.div,{key:e,style:{height:32,width:32,background:t,borderRadius:16},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:1===n?.2:.1}})))))),(0,o.createElement)(k.__unstableMotion.div,{variants:n&&qt,style:{height:"100%",width:"100%",position:"absolute",top:0,overflow:"hidden",filter:"blur(60px)",opacity:.1}},(0,o.createElement)(k.__experimentalHStack,{spacing:0,justify:"flex-start",style:{height:"100%",overflow:"hidden"}},d.slice(0,4).map((({color:e})=>(0,o.createElement)("div",{key:e,style:{height:"100%",background:e,flexGrow:1}}))))),(0,o.createElement)(k.__unstableMotion.div,{variants:Yt,style:{height:"100%",width:"100%",overflow:"hidden",position:"absolute",top:0}},(0,o.createElement)(k.__experimentalVStack,{spacing:3,justify:"center",style:{height:"100%",overflow:"hidden",padding:10,boxSizing:"border-box"}},e&&(0,o.createElement)("div",{style:{fontSize:40,fontFamily:c,color:m,fontWeight:p,lineHeight:"1em",textAlign:"center"}},e)))))}function Jt(){return(0,o.createElement)(k.Card,{size:"small",className:"edit-site-global-styles-screen-root",variant:"primary"},(0,o.createElement)(k.CardBody,null,(0,o.createElement)(k.__experimentalVStack,{spacing:4},(0,o.createElement)(k.Card,null,(0,o.createElement)(k.CardMedia,null,(0,o.createElement)(Zt,null))),(0,o.createElement)(k.__experimentalItemGroup,null,(0,o.createElement)(k.__experimentalNavigatorButton,{path:"/typography"},(0,o.createElement)(k.__experimentalItem,null,(0,o.createElement)(k.__experimentalHStack,{justify:"flex-start"},(0,o.createElement)(k.Icon,{icon:Ut,size:24}),(0,o.createElement)(k.FlexItem,null,(0,u.__)("Typography","mailpoet"))))),(0,o.createElement)(k.__experimentalNavigatorButton,{path:"/colors"},(0,o.createElement)(k.__experimentalItem,null,(0,o.createElement)(k.__experimentalHStack,{justify:"flex-start"},(0,o.createElement)(k.Icon,{icon:Wt,size:24}),(0,o.createElement)(k.FlexItem,null,(0,u.__)("Colors","mailpoet"))))),(0,o.createElement)(k.__experimentalNavigatorButton,{path:"/layout"},(0,o.createElement)(k.__experimentalItem,null,(0,o.createElement)(k.__experimentalHStack,{justify:"flex-start"},(0,o.createElement)(k.Icon,{icon:nt,size:24}),(0,o.createElement)(k.FlexItem,null,(0,u.__)("Layout","mailpoet")))))))))}const Xt=()=>{const{templateTheme:e,updateTemplateTheme:t}=Ve(),n=e?.styles,{styles:a}=(0,i.useSelect)((e=>({styles:e(L).getStyles()}))),l=(0,r.useCallback)((n=>{const a={...e,styles:n};t(a)}),[t,e]),o=(0,r.useCallback)(((n,a)=>{const l=function(e,t,n){const a=Array.isArray(t)?[...t]:[t],l=Array.isArray(e)?[...e]:{...e},o=a.pop();let i=l;return a.forEach((e=>{const t=i[e];i[e]=Array.isArray(t)?[...t]:{...t},i=i[e]})),i[o]=n,l}(e,["styles",...n],a);t(l)}),[t,e]);return{styles:Fe().all([a||{},n||{}]),defaultStyles:a,updateStyleProp:o,updateStyles:l}},Qt={typography:{},color:{}},Kt=(e,t,n="heading",a=!1)=>{switch(t){case"text":return{typography:e.typography,color:e.color};case"heading":return((e,t="heading",n=!1)=>n?Fe().all([Qt,e.elements.heading||{},e.elements[t]||{}]):{...Qt,...e.elements.heading||{},...e.elements[t]||{}})(e,null!=n?n:"heading",a);default:return e.elements[t]||Qt}};function en({element:e,label:t}){const{styles:n}=Xt(),a=Kt(n,e,null,!0),{fontFamily:l,fontStyle:i,fontWeight:r,letterSpacing:s,textDecoration:c,textTransform:m}=a.typography,p=a.color?.text||"inherit",d=a.color?.background||"#f0f0f0",g=(0,u.sprintf)(
// translators: %s: is a subset of Typography, e.g., 'text' or 'links'.
// translators: %s: is a subset of Typography, e.g., 'text' or 'links'.
(0,u.__)("Typography %s styles","mailpoet"),t);return(0,o.createElement)(k.__experimentalItem,null,(0,o.createElement)(k.__experimentalNavigatorButton,{path:`/typography/${e}`,"aria-label":g},(0,o.createElement)(k.__experimentalHStack,{justify:"flex-start"},(0,o.createElement)(k.FlexItem,{className:"edit-site-global-styles-screen-typography__indicator",style:{fontFamily:null!=l?l:"serif",background:d,color:p,fontStyle:null!=i?i:"normal",fontWeight:null!=r?r:"normal",letterSpacing:null!=s?s:"normal",textDecoration:null!=c?c:"link"===e?"underline":"none",textTransform:null!=m?m:"none"}},"Aa"),(0,o.createElement)(k.FlexItem,null,t))))}const tn=function(){return(0,o.createElement)(k.Card,{size:"small",variant:"primary",isBorderless:!0},(0,o.createElement)(k.CardBody,null,(0,o.createElement)(k.__experimentalVStack,{spacing:3},(0,o.createElement)(k.__experimentalHeading,{level:3,className:"edit-site-global-styles-subtitle"},(0,u.__)("Elements","mailpoet")),(0,o.createElement)(k.__experimentalItemGroup,{isBordered:!0,isSeparated:!0,size:"small"},(0,o.createElement)(en,{element:"text",label:(0,u.__)("Text","mailpoet")}),(0,o.createElement)(en,{element:"link",label:(0,u.__)("Links","mailpoet")}),(0,o.createElement)(en,{element:"heading",label:(0,u.__)("Headings","mailpoet")}),(0,o.createElement)(en,{element:"button",label:(0,u.__)("Buttons","mailpoet")})))))},nn=(0,b.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)(v.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})});function an({title:e,description:t,onBack:n}){return(0,o.createElement)(k.__experimentalVStack,{spacing:0},(0,o.createElement)(k.__experimentalView,null,(0,o.createElement)(k.__experimentalSpacer,{marginBottom:0,paddingX:4,paddingY:3},(0,o.createElement)(k.__experimentalHStack,{spacing:2},(0,o.createElement)(k.__experimentalNavigatorToParentButton,{style:{minWidth:24,padding:0},icon:nn,size:"small","aria-label":(0,u.__)("Navigate to the previous view","mailpoet"),onClick:n}),(0,o.createElement)(k.__experimentalSpacer,null,(0,o.createElement)(k.__experimentalHeading,{className:"mailpoet-email-editor__styles-header",level:2,size:13},e))))),t&&(0,o.createElement)("p",{className:"mailpoet-email-editor__styles-header-description"},t))}const ln=an;function on(){return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(ln,{title:(0,u.__)("Typography","mailpoet"),description:(0,u.__)("Manage the typography settings for different elements.","mailpoet")}),(0,o.createElement)(tn,null))}const rn={fontFamily:!0,fontSize:!0,fontAppearance:!0,lineHeight:!0,letterSpacing:!1,textTransform:!1,textDecoration:!1,writingMode:!0,textColumns:!0},sn=function({element:e,headingLevel:t,defaultControls:n=rn}){const[a,l]=(0,m.useSettings)("typography.fontSizes","typography.fontFamilies"),i=l?.default||[],{styles:s,defaultStyles:c,updateStyleProp:p}=Xt(),d=Kt(s,e,t),g=Kt(c,e,t),{fontFamily:_,fontSize:h,fontStyle:y,fontWeight:E,lineHeight:f,letterSpacing:v,textDecoration:b,textTransform:w}=d.typography,{fontFamily:S,fontSize:x,fontStyle:T,fontWeight:C,lineHeight:P,letterSpacing:N,textDecoration:I,textTransform:M}=g.typography,B="heading"!==e||"heading"!==t,R=(0,r.useCallback)(((n,a)=>{p("heading"===e?["elements",t,...n]:"text"===e?[...n]:["elements",e,...n],a)}),[e,p,t]),A=e=>{R(["typography","letterSpacing"],e)},j=e=>{R(["typography","lineHeight"],e)},L=e=>{R(["typography","fontSize"],e)},D=e=>{R(["typography","fontFamily"],e)},F=e=>{R(["typography","textDecoration"],e)},V=e=>{R(["typography","textTransform"],e)},O=({fontStyle:e,fontWeight:t})=>{R(["typography","fontStyle"],e),R(["typography","fontWeight"],t)};return(0,o.createElement)(k.__experimentalToolsPanel,{label:(0,u.__)("Typography","mailpoet"),resetAll:()=>{R(["typography"],g.typography)}},(0,o.createElement)(k.__experimentalToolsPanelItem,{label:(0,u.__)("Font family","mailpoet"),hasValue:()=>_!==S,onDeselect:()=>D(S),isShownByDefault:n.fontFamily},(0,o.createElement)(m.__experimentalFontFamilyControl,{value:_,onChange:D,size:"__unstable-large",fontFamilies:i,__nextHasNoMarginBottom:!0})),B&&(0,o.createElement)(k.__experimentalToolsPanelItem,{label:(0,u.__)("Font size","mailpoet"),hasValue:()=>h!==x,onDeselect:()=>L(x),isShownByDefault:n.fontSize},(0,o.createElement)(k.FontSizePicker,{value:h,onChange:L,fontSizes:a,disableCustomFontSizes:!1,withReset:!1,withSlider:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})),(0,o.createElement)(k.__experimentalToolsPanelItem,{className:"single-column",label:(0,u.__)("Appearance","mailpoet"),hasValue:()=>E!==C||y!==T,onDeselect:()=>{O({fontStyle:T,fontWeight:C})},isShownByDefault:n.fontAppearance},(0,o.createElement)(m.__experimentalFontAppearanceControl,{value:{fontStyle:y,fontWeight:E},onChange:O,hasFontStyles:!0,hasFontWeights:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})),(0,o.createElement)(k.__experimentalToolsPanelItem,{className:"single-column",label:(0,u.__)("Line height","mailpoet"),hasValue:()=>f!==P,onDeselect:()=>j(P),isShownByDefault:n.lineHeight},(0,o.createElement)(m.LineHeightControl,{__nextHasNoMarginBottom:!0,__unstableInputWidth:"auto",value:f,onChange:j,size:"__unstable-large"})),(0,o.createElement)(k.__experimentalToolsPanelItem,{className:"single-column",label:(0,u.__)("Letter spacing","mailpoet"),hasValue:()=>v!==N,onDeselect:()=>A(N),isShownByDefault:n.letterSpacing},(0,o.createElement)(m.__experimentalLetterSpacingControl,{value:v,onChange:A,size:"__unstable-large",__unstableInputWidth:"auto"})),(0,o.createElement)(k.__experimentalToolsPanelItem,{className:"single-column",label:(0,u.__)("Text decoration","mailpoet"),hasValue:()=>b!==I,onDeselect:()=>F(I),isShownByDefault:n.textDecoration},(0,o.createElement)(m.__experimentalTextDecorationControl,{value:b,onChange:F,size:"__unstable-large",__unstableInputWidth:"auto"})),(0,o.createElement)(k.__experimentalToolsPanelItem,{label:(0,u.__)("Letter case","mailpoet"),hasValue:()=>w!==M,onDeselect:()=>V(M),isShownByDefault:n.textTransform},(0,o.createElement)(m.__experimentalTextTransformControl,{value:w,onChange:V,showNone:!0,isBlock:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})))};function cn({element:e,headingLevel:t}){const{styles:n}=Xt(),a=Kt(n,e,t,!0),{fontFamily:l,fontSize:i,fontStyle:r,fontWeight:s,lineHeight:c,letterSpacing:m,textDecoration:p,textTransform:d}=a.typography,u=a.color?.text||"inherit",g=a.color?.background||"#f0f0f0",_="link"===e?{textDecoration:null!=p?p:"underline"}:{};return(0,o.createElement)("div",{className:"edit-site-typography-preview",style:{fontFamily:null!=l?l:"serif",background:g,color:u,lineHeight:c,fontSize:i,fontStyle:r,fontWeight:s,letterSpacing:m,textDecoration:p,textTransform:d,..._}},"Aa")}function mn({element:e}){const[t,n]=(0,r.useState)("heading"),a={text:{title:(0,u.__)("Text","mailpoet"),description:(0,u.__)("Manage the fonts and typography used on text.","mailpoet"),defaultControls:rn},link:{title:(0,u.__)("Links","mailpoet"),description:(0,u.__)("Manage the fonts and typography used on links.","mailpoet"),defaultControls:{...rn,textDecoration:!0}},heading:{title:(0,u.__)("Headings","mailpoet"),description:(0,u.__)("Manage the fonts and typography used on headings.","mailpoet"),defaultControls:{...rn,textTransform:!0}},button:{title:(0,u.__)("Buttons","mailpoet"),description:(0,u.__)("Manage the fonts and typography used on buttons.","mailpoet"),defaultControls:rn}};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(ln,{title:a[e].title,description:a[e].description}),(0,o.createElement)(k.__experimentalSpacer,{marginX:4},(0,o.createElement)(cn,{element:e,headingLevel:t})),"heading"===e&&(0,o.createElement)(k.__experimentalSpacer,{marginX:4,marginBottom:"1em"},(0,o.createElement)(k.__experimentalToggleGroupControl,{label:(0,u.__)("Select heading level","mailpoet"),hideLabelFromVision:!0,value:t,onChange:e=>n(e.toString()),isBlock:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0},(0,o.createElement)(k.__experimentalToggleGroupControlOption,{value:"heading",label:(0,u._x)("All","heading levels","mailpoet")}),(0,o.createElement)(k.__experimentalToggleGroupControlOption,{value:"h1",label:(0,u._x)("H1","Heading Level","mailpoet")}),(0,o.createElement)(k.__experimentalToggleGroupControlOption,{value:"h2",label:(0,u._x)("H2","Heading Level","mailpoet")}),(0,o.createElement)(k.__experimentalToggleGroupControlOption,{value:"h3",label:(0,u._x)("H3","Heading Level","mailpoet")}),(0,o.createElement)(k.__experimentalToggleGroupControlOption,{value:"h4",label:(0,u._x)("H4","Heading Level","mailpoet")}))),(0,o.createElement)(sn,{element:e,headingLevel:t,defaultControls:a[e].defaultControls}))}function pn(){const{ColorPanel:e}=z(m.privateApis),{styles:t,defaultStyles:n,updateStyles:a}=Xt(),l=(0,i.useSelect)((e=>e(L).getTheme()),[]);return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(ln,{title:(0,u.__)("Colors","mailpoet"),description:(0,u.__)("Manage palettes and the default color of different global elements.","mailpoet")}),(0,o.createElement)(e,{value:t,inheritValue:n,onChange:a,settings:l?.settings,panelId:"colors"}))}const dn=window.lodash;function un(){const[e]=(0,m.useSettings)("spacing.units"),t=(0,k.__experimentalUseCustomUnits)({availableUnits:e}),{styles:n,defaultStyles:a,updateStyleProp:l}=Xt();return(0,o.createElement)(k.__experimentalToolsPanel,{label:(0,u.__)("Dimensions","mailpoet"),resetAll:()=>{l(["spacing"],a.spacing)}},(0,o.createElement)(k.__experimentalToolsPanelItem,{isShownByDefault:!0,hasValue:()=>!(0,dn.isEqual)(n.spacing.padding,a.spacing.padding),label:(0,u.__)("Padding","mailpoet"),onDeselect:()=>l(["spacing","padding"],a.spacing.padding),className:"tools-panel-item-spacing"},(0,o.createElement)(m.__experimentalSpacingSizesControl,{allowReset:!0,values:n.spacing.padding,onChange:e=>{l(["spacing","padding"],e)},label:(0,u.__)("Padding","mailpoet"),sides:["horizontal","vertical","top","left","right","bottom"],units:t})),(0,o.createElement)(k.__experimentalToolsPanelItem,{isShownByDefault:!0,label:(0,u.__)("Block spacing","mailpoet"),hasValue:()=>n.spacing.blockGap!==a.spacing.blockGap,onDeselect:()=>l(["spacing","blockGap"],a.spacing.blockGap),className:"tools-panel-item-spacing"},(0,o.createElement)(m.__experimentalSpacingSizesControl,{label:(0,u.__)("Block spacing","mailpoet"),min:0,onChange:e=>{l(["spacing","blockGap"],e.top)},showSideInLabel:!1,sides:["top"],values:{top:n.spacing.blockGap},allowReset:!0})))}function gn(){return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(an,{title:(0,u.__)("Layout","mailpoet")}),(0,o.createElement)(un,null))}function hn(e){return(0,o.createElement)(Me,{identifier:"email-editor/editor/styles",className:"mailpoet-email-editor__styles-panel",header:(0,u.__)("Styles","mailpoet"),icon:Gt,scope:L,smallScreenTitle:(0,u.__)("No title","mailpoet"),...e},(0,o.createElement)(k.__experimentalNavigatorProvider,{initialPath:"/"},(0,o.createElement)(k.__experimentalNavigatorScreen,{path:"/"},(0,o.createElement)(Jt,null)),(0,o.createElement)(k.__experimentalNavigatorScreen,{path:"/typography"},(0,o.createElement)(on,null)),(0,o.createElement)(k.__experimentalNavigatorScreen,{path:"/typography/text"},(0,o.createElement)(mn,{element:"text"})),(0,o.createElement)(k.__experimentalNavigatorScreen,{path:"/typography/link"},(0,o.createElement)(mn,{element:"link"})),(0,o.createElement)(k.__experimentalNavigatorScreen,{path:"/typography/heading"},(0,o.createElement)(mn,{element:"heading"})),(0,o.createElement)(k.__experimentalNavigatorScreen,{path:"/typography/button"},(0,o.createElement)(mn,{element:"button"})),(0,o.createElement)(k.__experimentalNavigatorScreen,{path:"/colors"},(0,o.createElement)(pn,null)),(0,o.createElement)(k.__experimentalNavigatorScreen,{path:"/layout"},(0,o.createElement)(gn,null))))}function yn({contentRef:e}){const{onNavigateToEntityRecord:t,templateId:n}=(0,i.useSelect)((e=>{const{getEditorSettings:t,getCurrentTemplateId:n}=e(A.store);return{onNavigateToEntityRecord:t().onNavigateToEntityRecord,templateId:n()}}),[]),[a,l]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const t=e=>{e.target.classList.contains("is-root-container")&&l(!0)},n=e.current;return n?.addEventListener("dblclick",t),()=>{n?.removeEventListener("dblclick",t)}}),[e]),(0,o.createElement)(k.__experimentalConfirmDialog,{isOpen:a,confirmButtonText:(0,u.__)("Edit template"),onConfirm:()=>{l(!1),t({postId:n,postType:"wp_template"})},onCancel:()=>l(!1),size:"medium"},(0,u.__)("Youâ€™ve tried to select a block that is part of a template, which may be used on other emails. Would you like to edit the template?","mailpoet"))}function En(e,t,n){return Math.min(Math.max(e,t),n)}function fn({isEnabled:e=!0}={}){const{getEnabledClientIdsTree:t,getBlockName:n,getBlockOrder:a}=z((0,i.useSelect)(m.store)),{selectBlock:l}=(0,i.useDispatch)(m.store);return(0,p.useRefEffect)((o=>{if(!e)return null;const i=e=>{(e.target===o||e.target.classList.contains("is-root-container"))&&((e,i)=>{const r=t().flatMap((({clientId:e})=>{const t=n(e);if("core/template-part"===t)return[];if("core/post-content"===t){const t=a(e);if(t.length)return t}return[e]})).reduce(((t,n)=>{const a=o.querySelector(`[data-block="${n}"]`);if(!a)return t;const l=a.getBoundingClientRect(),r=function(e,t,n){const a=e-En(e,Number(n.left),Number(n.right)),l=t-En(t,Number(n.top),Number(n.bottom));return Math.sqrt(a*a+l*l)}(Number(e),Number(i),l);return r<t.distance&&r<500?{clientId:n,distance:r}:t}),{clientId:null,distance:Number.POSITIVE_INFINITY}),s=r?.clientId||"";s&&l(s)})(e.clientX,e.clientY)};return o.addEventListener("click",i),()=>o.removeEventListener("click",i)}),[e])}const vn="wp_block",{ExperimentalBlockCanvas:bn,useFlashEditableBlocks:wn}=z(m.privateApis),Sn=[vn,"wp_template","wp_navigation","wp_template_part"];function xn({styles:e,disableIframe:t=!1,iframeProps:n,contentRef:a,className:l}){var s;const{renderingMode:c,wrapperBlockName:d,wrapperUniqueId:u,deviceType:g,isFocusedEntity:_,layout:h}=(0,i.useSelect)((e=>{const{getCurrentPostId:t,getCurrentPostType:n,getEditorSettings:a,getRenderingMode:l,getDeviceType:o}=e(A.store),i=n(),r=l();let s;i===vn?s="core/block":"post-only"===r&&(s="core/post-content");const c=a();return{renderingMode:r,isDesignPostType:Sn.includes(i),wrapperBlockName:s,wrapperUniqueId:t(),deviceType:o(),isFocusedEntity:!!c.onNavigateToPreviousEntityRecord,postType:i,isPreview:c.__unstableIsPreviewMode,layout:c.__experimentalFeatures.layout}}),[]),y=(0,m.__experimentalUseResizeCanvas)(g),f=h,v=(0,r.useRef)(),b=(0,m.__unstableUseTypewriter)(),w=(0,p.useMergeRefs)([v,a,"post-only"===c?b:null,wn({isEnabled:"template-locked"===c}),fn({isEnabled:"template-locked"===c})]),S=!t||["Tablet","Mobile"].includes(g),x=[...null!==(s=e)&&void 0!==s?s:[],{css:`.is-root-container{display:flow-root; width:${"Desktop"===g?h.contentSize:"100%"}; margin: 0 auto;box-sizing: border-box;}`}];return(0,o.createElement)("div",{className:E()("editor-visual-editor","edit-post-visual-editor",l,{"has-padding":_,"is-iframed":S})},(0,o.createElement)(bn,{shouldIframe:S,contentRef:w,styles:x,height:"100%",iframeProps:{...n,style:{...n?.style,...y}}},(0,o.createElement)(m.RecursionProvider,{blockName:d,uniqueId:u},(0,o.createElement)(m.BlockList,{className:E()(`is-${g.toLowerCase()}-preview`,"has-global-padding"),layout:f,dropZoneElement:t?v.current:v.current?.parentNode,__unstableDisableDropZone:"template-locked"===c}),"template-locked"===c&&(0,o.createElement)(yn,{contentRef:v}))))}const kn=(0,window.wp.priorityQueue.createQueue)();function Tn({children:e,placeholder:t}){const[n,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e={};return kn.add(e,(()=>{(0,r.flushSync)((()=>{a(!0)}))})),()=>{kn.cancel(e)}}),[]),n?e:t}function Cn(e,t){return e.map((e=>"core/post-content"===e.name?{...e,name:"core/group",innerBlocks:t}:e.innerBlocks?.length?{...e,innerBlocks:Cn(e.innerBlocks,t)}:e))}function Pn(){const{templates:e,patterns:t}=(0,i.useSelect)((e=>{const t=e(m.store).getBlocksByName("core/post-content")?.[0];return{templates:e(L).getEmailTemplates(),patterns:e(m.store).getPatternsByBlockTypes(["core/post-content"],t)}}),[]);if(!e||!t.length)return[[]];const n=t.find((e=>e?.templateTypes?.includes("email-general-template")))?.blocks,a=t.find((e=>e?.templateTypes?.includes("email-template")))?.blocks;return[e.map((e=>{let t=(0,f.parse)(e.content?.raw);return t=Cn(t,"email-general"===e.slug?n:a),{slug:e.slug,contentParsed:t,patternParsed:"email-general"===e.slug?n:a,template:e}}))]}function Nn({onSelectCallback:e}){const[t]=Pn(),n=t=>{var n;(0,i.dispatch)(A.store).resetEditorBlocks(t.patternParsed),(0,i.dispatch)(L).setTemplateToPost(t.slug,null!==(n=t.template.mailpoet_email_theme)&&void 0!==n?n:{}),e()};return(0,o.createElement)(k.Modal,{title:"Select a template",onRequestClose:()=>(()=>{const e=t.find((e=>"email-general"===e.slug));e&&n(e)})(),isFullScreen:!0},(0,o.createElement)("div",{className:"block-editor-block-patterns-explorer"},(0,o.createElement)("div",{className:"block-editor-block-patterns-explorer__sidebar"},(0,o.createElement)("div",{className:"block-editor-block-patterns-explorer__sidebar__categories-list"},(0,o.createElement)(k.Button,{key:"category",label:"Category",className:"block-editor-block-patterns-explorer__sidebar__categories-list__item",isPressed:!0,onClick:()=>{}},"Dummy Category"))),(0,o.createElement)("div",{className:"block-editor-block-patterns-explorer__list"},(0,o.createElement)("div",{className:"block-editor-block-patterns-list",role:"listbox"},t.map((e=>(0,o.createElement)("div",{key:e.slug,className:"block-editor-block-patterns-list__list-item"},(0,o.createElement)("div",{className:"block-editor-block-patterns-list__item",role:"button",tabIndex:0,onClick:()=>{n(e)},onKeyPress:t=>{"Enter"!==t.key&&" "!==t.key||n(e)}},(0,o.createElement)(Tn,{placeholder:(0,o.createElement)("p",null,"rendering template")},(0,o.createElement)(m.BlockPreview,{blocks:e.contentParsed,viewportWidth:900,minHeight:300,additionalStyles:[{css:e.template.email_theme_css}]}),(0,o.createElement)(k.__experimentalHStack,{className:"block-editor-patterns__pattern-details"},(0,o.createElement)("div",{className:"block-editor-block-patterns-list__item-title"},e.template.title.rendered)))))))))))}function In(){const[e,t]=(0,r.useState)(!1),{emailContentIsEmpty:n,emailHasEdits:a}=(0,i.useSelect)((e=>({emailContentIsEmpty:e(L).hasEmptyContent(),emailHasEdits:e(L).hasEdits()})),[]);return!n||a||e?null:(0,o.createElement)(Nn,{onSelectCallback:()=>t(!0)})}function Mn(){const{isFullscreenActive:e,isSidebarOpened:t,initialSettings:n,previewDeviceType:a,isInserterSidebarOpened:l,isListviewSidebarOpened:s,canUserEditMedia:c,hasFixedToolbar:p,focusMode:d,styles:u}=(0,i.useSelect)((e=>({isFullscreenActive:e(L).isFeatureActive("fullscreenMode"),isSidebarOpened:e(L).isSidebarOpened(),isInserterSidebarOpened:e(A.store).isInserterOpened(),isListviewSidebarOpened:e(A.store).isListViewOpened(),initialSettings:e(L).getInitialEditorSettings(),previewDeviceType:e(L).getDeviceType(),canUserEditMedia:e(j.store).canUser("create","media"),hasFixedToolbar:e(L).isFeatureActive("fixedToolbar"),focusMode:e(L).isFeatureActive("focusMode"),styles:e(L).getStyles()})),[]),{setIsInserterOpened:g}=(0,i.useDispatch)(A.store),[_]=function(){const{templateTheme:e}=Ve(),{editorTheme:t}=(0,i.useSelect)((e=>({editorTheme:e(L).getTheme()})),[]),n=(0,r.useMemo)((()=>Fe().all([{},t||{},e||{}])),[t,e]),[a]=Oe(n);return[a]}(),h=E()("edit-post-layout",{"is-sidebar-opened":t}),y=(0,r.useRef)(null),f={background:"Desktop"===a?u.color.background:"transparent",fontFamily:u.typography.fontFamily,transition:"all 0.3s ease 0s"},v={...n,mediaUpload:c?H.uploadMedia:null,hasFixedToolbar:p,focusMode:d};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(Be,{isActive:e}),(0,o.createElement)(A.UnsavedChangesWarning,null),(0,o.createElement)(ze,null),(0,o.createElement)(Vt,null),(0,o.createElement)(rt,null),(0,o.createElement)(hn,null),(0,o.createElement)(In,null),(0,o.createElement)(Le,{className:h,header:(0,o.createElement)(Lt,null),editorNotices:(0,o.createElement)(Ht,null),content:(0,o.createElement)(o.Fragment,null,(0,o.createElement)(Ht,null),(0,o.createElement)(m.BlockSelectionClearer,{className:"edit-post-visual-editor",style:f,onClick:()=>{l&&g(!1)}},(0,o.createElement)("div",{className:"visual-editor__email_content_wrapper"},(0,o.createElement)(xn,{disableIframe:!1,styles:[...v.styles,..._],className:"has-global-padding",contentRef:y,iframeProps:{}})))),sidebar:(0,o.createElement)(Me.Slot,{scope:L}),secondarySidebar:l&&(0,o.createElement)(Ft,null)||s&&(0,o.createElement)(Dt,null)}),(0,o.createElement)(st,null))}function Bn({postId:e,postType:t,settings:n,initialEdits:a,...l}){const{currentPost:s,onNavigateToEntityRecord:c,onNavigateToPreviousEntityRecord:m}=function(e,t,n){const[a,l]=(0,r.useReducer)(((e,{type:t,post:n,previousRenderingMode:a})=>"push"===t?[...e,{post:n,previousRenderingMode:a}]:"pop"===t&&e.length>1?e.slice(0,-1):e),[{post:{postId:e,postType:t}}]),{post:o,previousRenderingMode:s}=a[a.length-1],{getRenderingMode:c}=(0,i.useSelect)(A.store),{setRenderingMode:m}=(0,i.useDispatch)(A.store),p=(0,r.useCallback)((e=>{l({type:"push",post:{postId:e.postId,postType:e.postType},previousRenderingMode:c()}),m(n)}),[c,m,n]),d=(0,r.useCallback)((()=>{l({type:"pop"}),s&&m(s)}),[m,s]);return{currentPost:o,onNavigateToEntityRecord:p,onNavigateToPreviousEntityRecord:a.length>1?d:void 0}}(e,t,"post-only"),{post:p,template:d}=(0,i.useSelect)((e=>{const{getEntityRecord:t}=e(j.store),{getEditedPostTemplate:n}=e(L),a=t("postType",s.postType,s.postId);return{template:"wp_template"!==s.postType?n():null,post:a}}),[s.postType,s.postId]),u=(0,i.useSelect)((e=>{const{hasFinishedResolution:t,getBlockPatternsForPostType:n}=z(e(j.store)),a=n(s.postType);return t("getBlockPatterns")?a:void 0}),[s.postType]),g=(0,r.useMemo)((()=>({...n,onNavigateToEntityRecord:c,onNavigateToPreviousEntityRecord:m,defaultRenderingMode:"template-locked",supportsTemplateMode:!0,__experimentalBlockPatterns:u})),[n,c,m,u]);return!p||"wp_template"!==s.postType&&!d?(0,o.createElement)("div",{className:"spinner-container"},(0,o.createElement)(k.Spinner,{style:{width:"80px",height:"80px"}})):(0,o.createElement)(k.SlotFillProvider,null,(0,o.createElement)(A.EditorProvider,{settings:g,post:p,initialEdits:a,useSubRegistry:!1,__unstableTemplate:d,...l},(0,o.createElement)(A.ErrorBoundary,null,(0,o.createElement)(Mn,null),(0,o.createElement)(A.PostLockedModal,null))))}const Rn=window.wp.dataControls,An=e=>({registry:t})=>t.dispatch(Z.store).toggle(L,e),jn=e=>({registry:t})=>{t.dispatch(A.store).setDeviceType(e)};function Ln(e){return{type:"CHANGE_PREVIEW_STATE",state:{isModalOpened:e}}}function Dn(e){return{type:"CHANGE_PREVIEW_STATE",state:{toEmail:e}}}const Fn=(e=D)=>({registry:t})=>t.dispatch(ye).enableComplementaryArea(L,e),Vn=()=>({registry:e})=>e.dispatch(ye).disableComplementaryArea(L);function On(e){return{type:"TOGGLE_SETTINGS_SIDEBAR_ACTIVE_TAB",state:{activeTab:e}}}function*zn(){const e=(0,i.select)(L).getEmailPostId(),t=yield(0,i.dispatch)(j.store).saveEditedEntityRecord("postType","mailpoet_email",e,{throwOnError:!0});t.then((()=>{(0,i.dispatch)(Je.store).createErrorNotice((0,u.__)("Email saved!","mailpoet"),{type:"snackbar",isDismissible:!0,context:"email-editor"})})),t.catch((()=>{(0,i.dispatch)(Je.store).createErrorNotice((0,u.__)("The email could not be saved. Please, clear browser cache and reload the page. If the problem persists, duplicate the email and try again.","mailpoet"),{type:"default",isDismissible:!0,context:"email-editor"})}))}function*Hn(e,t){const n=(0,i.select)(L).getEmailPostId(),a=(0,i.select)(j.store).getEditedEntityRecord("postType","mailpoet_email",n),l=a?.mailpoet_data||{};yield(0,i.dispatch)(j.store).editEntityRecord("postType","mailpoet_email",n,{mailpoet_data:{...l,[e]:t}})}const Gn=(e,t)=>async({registry:n})=>{const a=n.select(L).getEmailPostId();n.dispatch(j.store).editEntityRecord("postType","mailpoet_email",a,{template:e,meta:{mailpoet_email_theme:t}})};function*Un(e,t){if(!(0,i.select)(L).getPreviewState().isSendingPreviewEmail){yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:null,isSendingPreviewEmail:!0}};try{const n=(0,i.select)(L).getEmailPostId();yield(0,Rn.apiFetch)({path:"/mailpoet-email-editor/v1/send_preview_email",method:"POST",data:{newsletterId:e,email:t,postId:n}}),yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:wt.SUCCESS,isSendingPreviewEmail:!1}}}catch(e){yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:wt.ERROR,isSendingPreviewEmail:!1}}}}}function Wn(){const e=new URLSearchParams(window.location.search),t=parseInt(e.get("post"),10);return{inserterSidebar:{isOpened:!1},listviewSidebar:{isOpened:!1},settingsSidebar:{activeTab:D},postId:t,editorSettings:window.MailPoetEmailEditor.editor_settings,theme:window.MailPoetEmailEditor.editor_theme,autosaveInterval:60,cdnUrl:window.MailPoetEmailEditor.cdn_url,isPremiumPluginActive:window.MailPoetEmailEditor.is_premium_plugin_active,urls:window.MailPoetEmailEditor.urls,preview:{deviceType:"Desktop",toEmail:window.MailPoetEmailEditor.current_wp_user_email,isModalOpened:!1,isSendingPreviewEmail:!1,sendingPreviewStatus:null}}}function $n(e,t){switch(t.type){case"CHANGE_PREVIEW_STATE":return{...e,preview:{...e.preview,...t.state}};case"TOGGLE_SETTINGS_SIDEBAR_ACTIVE_TAB":return{...e,settingsSidebar:{...e.settingsSidebar,activeTab:t.state.activeTab}};default:return e}}const qn=(0,i.createRegistrySelector)((e=>(t,n)=>!!e(Z.store).get(L,n))),Yn=(0,i.createRegistrySelector)((e=>()=>!!e(ye).getActiveComplementaryArea(L))),Zn=(0,i.createRegistrySelector)((e=>()=>{const t=e(L).getEmailPostId();return!!e(j.store).hasEditsForEntityRecord("postType","mailpoet_email",t)})),Jn=(0,i.createRegistrySelector)((e=>()=>{const t=e(L).getEmailPostId();return!!e(j.store).getEntityRecord("postType","mailpoet_email",t)})),Xn=(0,i.createRegistrySelector)((e=>()=>{const t=e(L).getEmailPostId();return!!e(j.store).isSavingEntityRecord("postType","mailpoet_email",t)})),Qn=(0,i.createRegistrySelector)((e=>()=>{const t=e(L).getEmailPostId(),n=e(j.store).getEntityRecord("postType","mailpoet_email",t);if(!n)return!0;const{content:a,mailpoet_data:l,title:o}=n;return!(a.raw||l.subject||l.preheader||o.raw)})),Kn=(0,i.createRegistrySelector)((e=>()=>{const t=e(L).getEmailPostId(),n=e(j.store).getEntityRecord("postType","mailpoet_email",t);if(!n)return!0;const{content:a}=n;return!a.raw})),ea=(0,i.createRegistrySelector)((e=>()=>{const t=e(L).getEmailPostId(),n=e(j.store).getEntityRecord("postType","mailpoet_email",t);return!!n&&"sent"===n.status})),ta=(0,i.createRegistrySelector)((e=>()=>{const t=e(L).getEmailPostId(),n=e(j.store).getEditedEntityRecord("postType","mailpoet_email",t);if(n){if(n?.content&&"function"==typeof n.content)return n.content(n);if(n?.blocks)return(0,f.serialize)(n.blocks);if(n?.content)return n.content}return""})),na=(0,i.createRegistrySelector)((e=>()=>{const t=e(A.store).getEditedPostAttribute("template");if(t){const n=e(j.store).getEntityRecords("postType","wp_template",{per_page:-1})?.find((e=>e.slug===t));return n?e(j.store).getEditedEntityRecord("postType","wp_template",n.id):n}const n=e(j.store).getDefaultTemplateId({slug:"email-general"});return e(j.store).getEditedEntityRecord("postType","wp_template",n)})),aa=()=>{const e=na();return e?.content||""},la=(0,i.createRegistrySelector)((e=>()=>{if("wp_template"===e(A.store).getCurrentPostType()){const t=e(A.store).getCurrentPostId();return e(j.store).getEditedEntityRecord("postType","wp_template",t)}return na()})),oa=(0,i.createRegistrySelector)((e=>()=>e(j.store).getEntityRecords("postType","wp_template",{per_page:-1,post_type:"mailpoet_email"})?.filter((e=>"mailpoet/mailpoet"===e.theme))));function ia(e){return e.postId}function ra(e){return e.settingsSidebar.activeTab}function sa(e){return e.editorSettings}function ca(e){return e.editorSettings.__experimentalFeatures.color.palette}function ma(e){return e.preview}const pa=(0,i.createRegistrySelector)((e=>()=>e(A.store).getDeviceType()));function da(e){return e.theme.styles}function ua(e){return e.autosaveInterval}function ga(e){return e.cdnUrl}function _a(e){return e.isPremiumPluginActive}function ha(e){return e.theme}function ya(e){return e.urls}const Ea=window.wp.keyboardShortcuts;function fa(){const{isSidebarOpened:e,hasEdits:t,isSaving:n}=(0,i.useSelect)((e=>({isSidebarOpened:e(L).isSidebarOpened(),isSaving:e(L).isSaving(),hasEdits:e(L).hasEdits()}))),{openSidebar:a,closeSidebar:l,saveEditedEmail:o,toggleFeature:s}=(0,i.useDispatch)(L),{registerShortcut:c}=(0,i.useDispatch)(Ea.store);return(0,r.useEffect)((()=>{c({name:"mailpoet/email-editor/toggle-fullscreen",category:"global",description:(0,u.__)("Toggle fullscreen mode.","mailpoet"),keyCombination:{modifier:"secondary",character:"f"}}),c({name:"mailpoet/email-editor/toggle-sidebar",category:"global",description:(0,u.__)("Show or hide the settings sidebar.","mailpoet"),keyCombination:{modifier:"primaryShift",character:","}}),c({name:"mailpoet/email-editor/save",category:"global",description:(0,u.__)("Save your changes.","mailpoet"),keyCombination:{modifier:"primary",character:"s"}})}),[c]),(0,Ea.useShortcut)("mailpoet/email-editor/toggle-fullscreen",(()=>{s("fullscreenMode")})),(0,Ea.useShortcut)("mailpoet/email-editor/toggle-sidebar",(t=>{t.preventDefault(),e?l():a()})),(0,Ea.useShortcut)("mailpoet/email-editor/save",(e=>{e.preventDefault(),t&&!n&&o()})),null}function va(){const{postId:e,settings:t}=(0,i.useSelect)((e=>({postId:e(L).getEmailPostId(),settings:e(L).getInitialEditorSettings()})),[]);return(0,o.createElement)(r.StrictMode,null,(0,o.createElement)(fa,null),(0,o.createElement)(Bn,{initialEdits:[],postId:e,postType:"mailpoet_email",settings:t}))}function ba(e){const t=document.getElementById(e);t&&((()=>{const e=(0,i.createReduxStore)(L,{actions:a,controls:Rn.controls,selectors:l,reducer:$n,initialState:Wn()});(0,i.register)(e)})(),(0,c.addFilter)("blocks.registerBlockType","mailpoet-email-editor/layout/addAttribute",I),(0,c.addFilter)("editor.BlockListBlock","mailpoet-email-editor/with-layout-styles",R),(0,c.addFilter)("editor.BlockEdit","mailpoet-email-editor/with-inspector-controls",M),(0,c.addFilter)("editor.BlockEdit","mailpoet-email-editor/deactivate-stack-on-mobile",d),(0,c.addFilter)("editor.BlockEdit","mailpoet-email-editor/hide-expand-on-click",_),(0,c.addFilter)("blocks.registerBlockType","mailpoet-email-editor/deactivate-image-filter",((e,t)=>"core/image"===t?{...e,supports:{...e.supports,filter:{duetone:!1}}}:e)),(0,h.unregisterFormatType)("core/image"),(0,h.unregisterFormatType)("core/code"),(0,h.unregisterFormatType)("core/language"),(0,c.addFilter)("blocks.registerBlockType","mailpoet-email-editor/disable-columns-layout",((e,t)=>"core/columns"===t||"core/column"===t?{...e,supports:{...e.supports,layout:!1}}:e)),(0,c.addFilter)("blocks.registerBlockType","mailpoet-email-editor/disable-group-variations",((e,t)=>"core/group"===t?{...e,variations:e.variations.filter((e=>"group"===e.name)),supports:{...e.supports,layout:!1}}:e)),(0,c.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-button",((e,t)=>"core/button"===t?{...e,styles:[]}:e)),(0,c.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-buttons",((e,t)=>"core/buttons"===t?{...e,supports:{...e.supports,layout:!1,__experimentalEmailFlexLayout:!0}}:e)),(0,c.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-column",((e,t)=>"core/column"===t?{...e,supports:{...e.supports,background:{backgroundImage:!0}}}:e)),(0,c.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-columns",((e,t)=>"core/columns"===t?{...e,supports:{...e.supports,background:{backgroundImage:!0}}}:e)),(0,c.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-post-content",((e,t)=>{return"core/post-content"===t?{...e,edit:(n=e.edit,function({context:e,__unstableLayoutClassNames:t}){const{postId:a,postType:l}=e;return a&&l?(0,o.createElement)(n,{context:e,__unstableLayoutClassNames:t}):(0,o.createElement)(g,{layoutClassNames:t})})}:e;var n})),(0,c.addFilter)("blocks.registerBlockType","mailpoet-email-editor/block-support",(e=>e.supports?.shadow?{...e,supports:{...e.supports,shadow:!1}}:e)),(0,s.registerCoreBlocks)(),(0,c.addFilter)("editor.MediaUpload","mailpoet/email-editor/replace-media-upload",(()=>H.MediaUpload)),(0,r.createRoot)(t).render((0,o.createElement)(va,null)))}window.addEventListener("DOMContentLoaded",(()=>{ba("mailpoet-email-editor")}))})()})();