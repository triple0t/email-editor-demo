{"version":3,"file":"index.js","mappings":"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B;;;;;;;;;;;;;;;;;;ACbA;AACA;AACA;AACkD;AACF;AAChD,0BAA0B,sDAAI,CAAC,sDAAG;AAClC;AACA;AACA,yBAAyB,sDAAI,CAAC,uDAAI;AAClC;AACA,GAAG;AACH,CAAC;AACD,iEAAe,IAAI,EAAC;AACpB;;;;;;;;;;;;;;;;;;;;ACbA;AACA;AACA;AACA;AACwE;AAC1B;AACE;AAChD;AACA;AACA;AACA,kBAAkB,8DAAW;AAC7B,gBAAgB;AAChB;AACA;AACA,CAAC;AACD,sBAAsB,sDAAI,CAAC,uDAAI;AAC/B;AACA;AACA;AACA;AACA,WAAW,wDAAQ;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,wDAAQ;AACd;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP,uBAAuB,wDAAQ;AAC/B;AACA;AACA;AACA;AACA,OAAO;AACP,0BAA0B,sDAAI;AAC9B;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA,kBAAkB,yDAAM;AACxB;AACA;AACA,CAAC;AACD,sBAAsB,sDAAI,CAAC,uDAAI;AAC/B;AACA;AACA;AACA,KAAK;AACL,0BAA0B,sDAAI;AAC9B;AACA;AACA;AACA,UAAU;AACV;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA,iEAAe,UAAU,EAAC;AAC1B;;;;;;;;;;;;;;;;;;;AC5EA;AACA;AACA;AACwB;;AAExB;AACA;AACA;AAC8C;;AAE9C;AACA;AACA;AACmE;AACJ;AAC/D;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC,sDAAI,CAAC,kEAAuB;AAChE,UAAU,wDAAU;AACpB;AACA,GAAG;AACH,sBAAsB,uDAAK;AAC3B,eAAe,gDAAI;AACnB;AACA;AACA,GAAG;AACH;AACA,iEAAe,uBAAuB,EAAC;AACvC;;;;;;;;;;;;;;;;;;;;;AC/BA;AACA;AACA;AACyC;AACQ;;AAEjD;AACA;AACA;AACmE;AAC3B;AACQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,sDAAI,CAAC,2DAAQ;AAChC;AACA,CAAC;AACc;AACf;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB,sDAAI,CAAC,kEAAuB;AAClD;AACA,0BAA0B,sDAAI,CAAC,oDAAU;AACzC;AACA,6BAA6B,MAAM,GAAG,OAAO;AAC7C;AACA,iBAAiB,MAAM;AACvB;AACA,OAAO;AACP,KAAK;AACL;AACA,kBAAkB,wDAAK;AACvB;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;;;;;;;;;;;;AC7CA;AACA;AACA;AAC+C;AACU;AACH;;AAEtD;AACA;AACA;AACsD;;AAEtD;AACA;AACA;AACA,WAAW,0BAA0B;AACrC,YAAY,SAAS;AACrB;AACA;AACgD;AAChD;AACA;AACA;AACe;AACf,OAAO,yDAAM;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,kBAAkB,oEAAgB;AAClC;AACA,0CAA0C,aAAa,GAAG,KAAK;AAC/D,qBAAqB,0DAAS,kBAAkB,yCAAc;AAC9D;AACA;AACA;AACA,IAAI,EAAE,4DAAW,CAAC,yCAAc;AAChC,sBAAsB,sDAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3DA;AACA;AACA;AACwB;;AAExB;AACA;AACA;AAC4I;AACnF;AACpB;AAC2B;AACC;AACJ;AACM;AACkB;AAC/B;;AAEtD;AACA;AACA;AACmE;AACc;AACd;AACzB;AACY;AACgC;AACtF;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB,uDAAI,CAAC,uDAAI;AAC/B,+BAA+B,MAAM;AACrC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB,oEAAgB;AACxC,2BAA2B,oEAAgB;AAC3C;AACA;AACA;AACA;AACA,6BAA6B,+DAAW;AACxC,2BAA2B,+DAAW;AACtC,uBAAuB,4DAAQ,GAAG;AAClC,EAAE,6DAAS;AACX,eAAe;AACf,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,sBAAsB,uDAAI,CAAC,uDAAI;AAC/B,+BAA+B,MAAM;AACrC,2BAA2B,uDAAI,CAAC,4EAAe;AAC/C;AACA,+DAA+D,uDAAI,CAAC,mEAAM;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uDAAI;AACnC;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;AACA,6BAA6B,0DAAM;AACnC,oCAAoC,0DAAM;AAC1C;AACA;AACA;AACA,IAAI,EAAE,4DAAW,CAAC,yCAAc;AAChC,EAAE,6DAAS;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,eAAe,mDAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB,oEAAgB;AAClC;AACA,0CAA0C,aAAa,GAAG,KAAK;;AAE/D;AACA;AACA;AACA;AACA,gCAAgC,4DAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,EAAE,0DAAS;AACf;AACA;AACA;AACA;AACA,MAAM,SAAS,yCAAc;AAC7B;AACA;AACA,MAAM,SAAS,yDAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAa;AACnC,sBAAsB,sDAAa;AACnC;AACA;AACA,GAAG;AACH,2BAA2B,oEAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,EAAE,4DAAW,CAAC,yCAAc;AAChC,EAAE,6DAAS;AACX;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,sBAAsB,wDAAK,CAAC,wDAAS;AACrC,0CAA0C,uDAAI,CAAC,sDAAW;AAC1D;AACA,yCAAyC,uDAAI,CAAC,mEAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,yDAAK;AACpC;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK,sCAAsC,uDAAI,CAAC,2EAA6B;AAC7E;AACA;AACA;AACA;AACA,KAAK,gBAAgB,wDAAK;AAC1B;AACA;AACA,iBAAiB,gDAAI;AACrB;AACA;AACA,8BAA8B,uDAAI,CAAC,mEAAuB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,yCAAyC,wDAAK,CAAC,wDAAS;AACxD,kCAAkC,uDAAI;AACtC;AACA;AACA,WAAW,mDAAmD,uDAAI,CAAC,yDAAM;AACzE;AACA,6BAA6B,yDAAU,GAAG,yDAAS;AACnD,8BAA8B,mDAAE,yBAAyB,mDAAE;AAC3D;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO,gBAAgB,uDAAI,CAAC,wDAAK;AACjC;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;AACA,iEAAe,iBAAiB,EAAC;AACjC;;;;;;;;;;;;;;;;;AC5QA;AACA;AACA;AAC+C;AAC/C;AACA;AACA,CAAC;AACD,EAAE,6DAAS;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE,6DAAS;AACX;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,iEAAe,cAAc,EAAC;AAC9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtCoE;AAC2B;AACjC;AACM;AACZ;AACF;AACU;AAChE;;;;;;;;;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACwB;;AAExB;AACA;AACA;AAC2D;AACsD;AACxE;AACkD;;AAE3F;AACA;AACA;AACkD;AACa;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,6DAAS;AACX,oEAAoE,UAAU;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iEAAiE,qEAAiB;AAClF,2BAA2B,oEAAgB;AAC3C,wBAAwB,oEAAgB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAE;AACd;AACA,UAAU,mDAAE;AACZ;AACA,sBAAsB,mDAAE;AACxB;AACA,aAAa,mDAAE;AACf;AACA,aAAa,mDAAE;AACf;AACA,YAAY,mDAAE;AACd;AACA;AACA;AACA;AACA;AACA,sBAAsB,uDAAK;AAC3B;AACA,eAAe,gDAAI;AACnB,4BAA4B,uDAAK;AACjC;AACA,8BAA8B,sDAAI,CAAC,4EAAe;AAClD;AACA,2CAA2C,sDAAI,CAAC,yDAAe;AAC/D,cAAc,mEAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,qCAAqC,sDAAI;AAChD;AACA;AACA,OAAO,gBAAgB,uDAAK;AAC5B;AACA,gCAAgC,sDAAI,CAAC,4EAAe;AACpD;AACA,uDAAuD,sDAAI,CAAC,yDAAe;AAC3E;AACA;AACA,gBAAgB,mEAAM;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,aAAa;AACb;AACA,mCAAmC,uDAAK,CAAC,mEAAM;AAC/C;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS,gBAAgB,sDAAI,CAAC,yDAAe;AAC7C;AACA;AACA;AACA,SAAS,6BAA6B,sDAAI,CAAC,yDAAe;AAC1D;AACA;AACA;AACA,SAAS,6BAA6B,sDAAI,CAAC,yDAAe;AAC1D;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK,4BAA4B,sDAAI,CAAC,yDAAe;AACrD;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,iEAAe,8DAAU,mBAAmB,EAAC;AAC7C;;;;;;;;;;;;;;;;;;;AC9LA;AACA;AACA;AACgD;;AAEhD;AACA;AACA;AACwB;AACwB;AAChD,wBAAwB,8DAAU;AAClC;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB,sDAAI;AAC1B;AACA,eAAe,gDAAI;AACnB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA,iEAAe,eAAe,EAAC;AAC/B;;;;;;;;;;;;;;;;;;;AC7BA;AACA;AACA;AACwB;;AAExB;AACA;AACA;AACmD;AACH;AAChD;AACA;AACA;AACA,CAAC;AACD,sBAAsB,sDAAI,CAAC,uDAAI;AAC/B,yBAAyB,MAAM;AAC/B;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB,sDAAI,CAAC,uDAAI;AAC/B,yBAAyB,MAAM;AAC/B;AACA,yDAAyD,sDAAI;AAC7D,iBAAiB,gDAAI;AACrB;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,iEAAe,WAAW,EAAC;AAC3B;;;;;;;;;;;;;;;;;;;;;;;;ACnC6B;AACG;AAChC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AAC+C;AACoB;;AAEnE;AACA;AACA;AAC+F;;AAE/F;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,YAAY,QAAQ;AACpB;AACO;AACP,UAAU,4EAA+B;AACzC,SAAS,2EAA8B;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACO;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,UAAU,4EAA+B;AACzC,SAAS,2EAA8B;AACvC,qDAAqD,yDAAgB;AACrE;AACA,sBAAsB,yDAAgB;AACtC;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACO;AACP;AACA,CAAC;AACD,UAAU,4EAA+B;AACzC,qDAAqD,yDAAgB;AACrE;AACA,sBAAsB,yDAAgB;AACtC;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,YAAY,QAAQ;AACpB;AACO;AACP;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,UAAU,4EAA+B;AACzC,SAAS,2EAA8B;AACvC,sCAAsC,yDAAgB;;AAEtD;AACA;AACA;AACA;AACA,oBAAoB,yDAAgB;AACpC;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACO;AACP;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,UAAU,4EAA+B;AACzC,SAAS,2EAA8B;AACvC,sCAAsC,yDAAgB;AACtD,oBAAoB,yDAAgB;AACpC;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACO;AACP;AACA;AACA,GAAG;AACH,IAAI,4DAAU;AACd;AACA;AACA,KAAK;AACL,sBAAsB,yDAAgB;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB;AACA,YAAY,QAAQ;AACpB;AACO;AACP;AACA;AACA,GAAG;AACH,IAAI,4DAAU;AACd;AACA;AACA,KAAK;AACL,sBAAsB,yDAAgB;AACtC;AACA;;AAEA;AACA;AACA;AACA,WAAW,yBAAyB;AACpC,WAAW,yBAAyB;AACpC;AACA,YAAY,QAAQ;AACpB;AACO;AACP;AACA;AACA,GAAG;AACH,IAAI,4DAAU;AACd;AACA;AACA,KAAK;AACL,sBAAsB,yDAAgB;AACtC;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,YAAY,QAAQ;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC9MA;AACA;AACA;AACA,UAAU;AACV;AACO;AACP;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AAC+C;AACxC;AACP;AACA,IAAI,4DAAU,IAAI,OAAO;AACzB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACO;AACP;AACA,IAAI,4DAAU;AACd;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI,4DAAU;AACd;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AChCA;AACA;AACA;AAC6D;;AAE7D;AACA;AACA;AACqC;AACI;AACT;AACS;;AAEzC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACO,cAAc,iEAAgB,CAAC,kDAAU;AAChD,SAAS;AACT,SAAS;AACT,WAAW;AACX,CAAC;;AAED;AACA;AACA,yDAAQ;AACR;;;;;;;;;;;;;;;;;;;AC7BA;AACA;AACA;AACkD;AAC3C,sCAAsC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,YAAY,QAAQ;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,gEAAe;AAC9B;AACA;AACA,CAAC,CAAC,EAAC;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;AC1DA;AACA;AACA;AACyD;AACV;AACoB;;AAEnE;AACA;AACA;AAC+F;;AAE/F;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,YAAY,2BAA2B;AACvC;AACO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AEa;;AAEb,IAAI,IAAqC;AACzC;AACA;;AAEA,YAAY,mBAAO,CAAC,oBAAO;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iGAAiG,eAAe;AAChH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;;;AAGN;AACA;AACA,KAAK,GAAG;;AAER,kDAAkD;AAClD;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,4BAA4B;AAC5B;AACA,qCAAqC;;AAErC,gCAAgC;AAChC;AACA;;AAEA,gCAAgC;;AAEhC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,sBAAsB;AACtB;AACA,SAAS;AACT,uBAAuB;AACvB;AACA,SAAS;AACT,uBAAuB;AACvB;AACA,SAAS;AACT,wBAAwB;AACxB;AACA,SAAS;AACT,wBAAwB;AACxB;AACA,SAAS;AACT,iCAAiC;AACjC;AACA,SAAS;AACT,2BAA2B;AAC3B;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;;;AAGN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2DAA2D;;AAE3D;AACA;;AAEA;AACA,yDAAyD;AACzD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,kBAAkB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA;AACA;AACA,gFAAgF;AAChF;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;;;AAGlB;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;;;AAGJ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2HAA2H;AAC3H;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA;AACA;;AAEA,oEAAoE;;AAEpE;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC;;AAEjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,GAAG;AACd,WAAW,GAAG;AACd,WAAW,eAAe;AAC1B,WAAW,GAAG;AACd,WAAW,GAAG;AACd;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;;AAER;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;;AAEA;AACA;AACA,kBAAkB;;AAElB;AACA;AACA,oBAAoB;AACpB,2DAA2D,UAAU;AACrE,yBAAyB,UAAU;AACnC;AACA,aAAa,UAAU;AACvB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;;;AAGN;AACA;AACA;AACA;AACA,MAAM;;;AAGN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,YAAY,SAAS;AACrB;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,GAAG;AACd;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,6DAA6D;AAC7D;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,GAAG;AACd;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN,4CAA4C;;AAE5C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB;;;AAGA;AACA;AACA;;AAEA,oBAAoB,iBAAiB;AACrC;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C;AAC9C;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,QAAQ;AA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","sources":["webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/icon/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/block-default.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/check.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/chevron-down.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/chevron-left.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/close-small.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/cloud.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/color.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/desktop.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/drawer-right.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/external.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/info.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/justify-center.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/justify-left.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/justify-right.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/layout.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/list-view.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/megaphone.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/mobile.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/more-vertical.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/next.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/plus.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/previous.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/redo.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/star-empty.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/star-filled.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/styles.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/typography.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/icons/build-module/library/undo.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/components/action-item/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/components/complementary-area-header/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/components/complementary-area-more-menu-item/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/components/complementary-area-toggle/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/components/complementary-area/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/components/fullscreen-mode/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/components/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/components/interface-skeleton/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/components/navigable-region/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/components/pinned-items/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/store/actions.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/store/constants.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/store/deprecated.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/store/index.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/store/reducer.js","webpack://@mailpoet/email-editor/./node_modules/@wordpress/interface/build-module/store/selectors.js","webpack://@mailpoet/email-editor/./src/blocks/core/button.ts","webpack://@mailpoet/email-editor/./src/blocks/core/buttons.ts","webpack://@mailpoet/email-editor/./src/blocks/core/column.ts","webpack://@mailpoet/email-editor/./src/blocks/core/columns.tsx","webpack://@mailpoet/email-editor/./src/blocks/core/general-block-support.ts","webpack://@mailpoet/email-editor/./src/blocks/core/group.tsx","webpack://@mailpoet/email-editor/./src/blocks/core/image.tsx","webpack://@mailpoet/email-editor/./src/blocks/core/post-content.tsx","webpack://@mailpoet/email-editor/./src/blocks/core/rich-text.tsx","webpack://@mailpoet/email-editor/./src/blocks/index.ts","webpack://@mailpoet/email-editor/./src/components/autosave/autosave-monitor.tsx","webpack://@mailpoet/email-editor/./src/components/block-editor/editor.tsx","webpack://@mailpoet/email-editor/./src/components/block-editor/layout.tsx","webpack://@mailpoet/email-editor/./src/components/block-editor/visual-editor/edit-template-blocks-notification.tsx","webpack://@mailpoet/email-editor/./src/components/block-editor/visual-editor/use-select-nearest-editable-block.ts","webpack://@mailpoet/email-editor/./src/components/block-editor/visual-editor/visual-editor.tsx","webpack://@mailpoet/email-editor/./src/components/header/campaign-name.tsx","webpack://@mailpoet/email-editor/./src/components/header/header.tsx","webpack://@mailpoet/email-editor/./src/components/header/more-menu.tsx","webpack://@mailpoet/email-editor/./src/components/header/save-all-button.tsx","webpack://@mailpoet/email-editor/./src/components/header/save-email-button.tsx","webpack://@mailpoet/email-editor/./src/components/header/send-button.tsx","webpack://@mailpoet/email-editor/./src/components/header/trash-modal.tsx","webpack://@mailpoet/email-editor/./src/components/inserter-sidebar/inserter-sidebar.tsx","webpack://@mailpoet/email-editor/./src/components/keybord-shortcuts/index.tsx","webpack://@mailpoet/email-editor/./src/components/listview-sidebar/listview-sidebar.tsx","webpack://@mailpoet/email-editor/./src/components/notices/notices.tsx","webpack://@mailpoet/email-editor/./src/components/notices/sent-email-notice.tsx","webpack://@mailpoet/email-editor/./src/components/notices/snackbars.tsx","webpack://@mailpoet/email-editor/./src/components/notices/validation-notices.tsx","webpack://@mailpoet/email-editor/./src/components/personalization-tags/category-menu.tsx","webpack://@mailpoet/email-editor/./src/components/personalization-tags/category-section.tsx","webpack://@mailpoet/email-editor/./src/components/personalization-tags/link-modal.tsx","webpack://@mailpoet/email-editor/./src/components/personalization-tags/personalization-tags-link-popover.tsx","webpack://@mailpoet/email-editor/./src/components/personalization-tags/personalization-tags-modal.tsx","webpack://@mailpoet/email-editor/./src/components/personalization-tags/personalization-tags-popover.tsx","webpack://@mailpoet/email-editor/./src/components/personalization-tags/rich-text-utils.ts","webpack://@mailpoet/email-editor/./src/components/personalization-tags/rich-text-with-button.tsx","webpack://@mailpoet/email-editor/./src/components/preview/preview-dropdown.tsx","webpack://@mailpoet/email-editor/./src/components/preview/send-preview-email.tsx","webpack://@mailpoet/email-editor/./src/components/sidebar/block-compatibility-warnings.tsx","webpack://@mailpoet/email-editor/./src/components/sidebar/details-panel.tsx","webpack://@mailpoet/email-editor/./src/components/sidebar/edit-template-modal.tsx","webpack://@mailpoet/email-editor/./src/components/sidebar/email-settings.tsx","webpack://@mailpoet/email-editor/./src/components/sidebar/email-type-info.tsx","webpack://@mailpoet/email-editor/./src/components/sidebar/header.tsx","webpack://@mailpoet/email-editor/./src/components/sidebar/sidebar.tsx","webpack://@mailpoet/email-editor/./src/components/sidebar/template-info.tsx","webpack://@mailpoet/email-editor/./src/components/sidebar/template-revert-modal.tsx","webpack://@mailpoet/email-editor/./src/components/sidebar/template-settings.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/panels/dimensions-panel.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/panels/typography-element-panel.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/panels/typography-panel.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/previews/typography-preview.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/screens/preview.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/screens/screen-colors.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/screens/screen-header.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/screens/screen-layout.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/screens/screen-root.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/screens/screen-typography-element.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/screens/screen-typography.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/styles-sidebar.tsx","webpack://@mailpoet/email-editor/./src/components/styles-sidebar/utils.ts","webpack://@mailpoet/email-editor/./src/components/template-select/async.ts","webpack://@mailpoet/email-editor/./src/components/template-select/select-modal.tsx","webpack://@mailpoet/email-editor/./src/components/template-select/template-categories-list-sidebar.tsx","webpack://@mailpoet/email-editor/./src/components/template-select/template-list.tsx","webpack://@mailpoet/email-editor/./src/components/template-select/template-selection.tsx","webpack://@mailpoet/email-editor/./src/editor-hooks.ts","webpack://@mailpoet/email-editor/./src/editor.tsx","webpack://@mailpoet/email-editor/./src/events/event-collector.ts","webpack://@mailpoet/email-editor/./src/events/event-pipeline.ts","webpack://@mailpoet/email-editor/./src/hooks/use-content-validation.ts","webpack://@mailpoet/email-editor/./src/hooks/use-editor-mode.ts","webpack://@mailpoet/email-editor/./src/hooks/use-email-css.ts","webpack://@mailpoet/email-editor/./src/hooks/use-email-styles.ts","webpack://@mailpoet/email-editor/./src/hooks/use-navigate-to-entity-record.js","webpack://@mailpoet/email-editor/./src/hooks/use-preview-templates.ts","webpack://@mailpoet/email-editor/./src/hooks/use-shallow-equal.ts","webpack://@mailpoet/email-editor/./src/hooks/use-user-theme.ts","webpack://@mailpoet/email-editor/./src/hooks/use-validation-notices.ts","webpack://@mailpoet/email-editor/./src/layouts/flex-email.tsx","webpack://@mailpoet/email-editor/./src/private-apis/index.ts","webpack://@mailpoet/email-editor/./src/store/actions.ts","webpack://@mailpoet/email-editor/./src/store/constants.ts","webpack://@mailpoet/email-editor/./src/store/initial-state.ts","webpack://@mailpoet/email-editor/./src/store/reducer.ts","webpack://@mailpoet/email-editor/./src/store/resolvers.ts","webpack://@mailpoet/email-editor/./src/store/selectors.ts","webpack://@mailpoet/email-editor/./src/store/settings.ts","webpack://@mailpoet/email-editor/./src/store/store.ts","webpack://@mailpoet/email-editor/./src/store/types.ts","webpack://@mailpoet/email-editor/./node_modules/deepmerge/dist/cjs.js","webpack://@mailpoet/email-editor/./src/components/block-editor/index.scss?0a3d","webpack://@mailpoet/email-editor/./src/components/personalization-tags/index.scss?4cf3","webpack://@mailpoet/email-editor/./src/components/sidebar/index.scss?603e","webpack://@mailpoet/email-editor/./src/index.scss?bb7c","webpack://@mailpoet/email-editor/./node_modules/react/cjs/react-jsx-runtime.development.js","webpack://@mailpoet/email-editor/./node_modules/react/jsx-runtime.js","webpack://@mailpoet/email-editor/external window \"React\"","webpack://@mailpoet/email-editor/external window \"lodash\"","webpack://@mailpoet/email-editor/external window [\"wp\",\"apiFetch\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"blockEditor\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"blockLibrary\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"blocks\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"components\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"compose\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"coreData\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"data\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"dataControls\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"deprecated\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"editor\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"element\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"formatLibrary\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"hooks\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"htmlEntities\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"i18n\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"isShallowEqual\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"keyboardShortcuts\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"keycodes\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"mediaUtils\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"notices\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"plugins\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"preferences\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"primitives\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"priorityQueue\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"privateApis\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"richText\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"url\"]","webpack://@mailpoet/email-editor/external window [\"wp\",\"viewport\"]","webpack://@mailpoet/email-editor/./node_modules/classnames/index.js","webpack://@mailpoet/email-editor/./node_modules/clsx/dist/clsx.mjs","webpack://@mailpoet/email-editor/webpack/bootstrap","webpack://@mailpoet/email-editor/webpack/runtime/compat get default export","webpack://@mailpoet/email-editor/webpack/runtime/define property getters","webpack://@mailpoet/email-editor/webpack/runtime/hasOwnProperty shorthand","webpack://@mailpoet/email-editor/webpack/runtime/make namespace object","webpack://@mailpoet/email-editor/./src/index.ts"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { cloneElement, forwardRef } from '@wordpress/element';\n\n/** @typedef {{icon: JSX.Element, size?: number} & import('@wordpress/primitives').SVGProps} IconProps */\n\n/**\n * Return an SVG icon.\n *\n * @param {IconProps}                                 props icon is the SVG component to render\n *                                                          size is a number specifiying the icon size in pixels\n *                                                          Other props will be passed to wrapped SVG component\n * @param {import('react').ForwardedRef<HTMLElement>} ref   The forwarded ref to the SVG element.\n *\n * @return {JSX.Element}  Icon component\n */\nfunction Icon({\n  icon,\n  size = 24,\n  ...props\n}, ref) {\n  return cloneElement(icon, {\n    width: size,\n    height: size,\n    ...props,\n    ref\n  });\n}\nexport default forwardRef(Icon);\n//# sourceMappingURL=index.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst blockDefault = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z\"\n  })\n});\nexport default blockDefault;\n//# sourceMappingURL=block-default.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst check = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z\"\n  })\n});\nexport default check;\n//# sourceMappingURL=check.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst chevronDown = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z\"\n  })\n});\nexport default chevronDown;\n//# sourceMappingURL=chevron-down.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst chevronLeft = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z\"\n  })\n});\nexport default chevronLeft;\n//# sourceMappingURL=chevron-left.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst closeSmall = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z\"\n  })\n});\nexport default closeSmall;\n//# sourceMappingURL=close-small.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst cloud = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M17.3 10.1c0-2.5-2.1-4.4-4.8-4.4-2.2 0-4.1 1.4-4.6 3.3h-.2C5.7 9 4 10.7 4 12.8c0 2.1 1.7 3.8 3.7 3.8h9c1.8 0 3.2-1.5 3.2-3.3.1-1.6-1.1-2.9-2.6-3.2zm-.5 5.1h-9c-1.2 0-2.2-1.1-2.2-2.3s1-2.4 2.2-2.4h1.3l.3-1.1c.4-1.3 1.7-2.2 3.2-2.2 1.8 0 3.3 1.3 3.3 2.9v1.3l1.3.2c.8.1 1.4.9 1.4 1.8-.1 1-.9 1.8-1.8 1.8z\"\n  })\n});\nexport default cloud;\n//# sourceMappingURL=cloud.js.map","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst color = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3zm-5.1 7.6c-2.5 0-4.6-2.1-4.6-4.6 0-.3.1-1 .8-2.3.5-.9 1.1-1.9 2-3.1.7-.9 1.3-1.7 1.8-2.3.7.8 1.3 1.6 1.8 2.3.8 1.1 1.5 2.2 2 3.1.7 1.3.8 2 .8 2.3 0 2.5-2.1 4.6-4.6 4.6z\"\n  })\n});\nexport default color;\n//# sourceMappingURL=color.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst desktop = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z\"\n  })\n});\nexport default desktop;\n//# sourceMappingURL=desktop.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst drawerRight = /*#__PURE__*/_jsx(SVG, {\n  width: \"24\",\n  height: \"24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4 14.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h8v13zm4.5-.5c0 .3-.2.5-.5.5h-2.5v-13H18c.3 0 .5.2.5.5v12z\"\n  })\n});\nexport default drawerRight;\n//# sourceMappingURL=drawer-right.js.map","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst external = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z\"\n  })\n});\nexport default external;\n//# sourceMappingURL=external.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst info = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z\"\n  })\n});\nexport default info;\n//# sourceMappingURL=info.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst justifyCenter = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M12.5 15v5H11v-5H4V9h7V4h1.5v5h7v6h-7Z\"\n  })\n});\nexport default justifyCenter;\n//# sourceMappingURL=justify-center.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst justifyLeft = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M9 9v6h11V9H9zM4 20h1.5V4H4v16z\"\n  })\n});\nexport default justifyLeft;\n//# sourceMappingURL=justify-left.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst justifyRight = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M4 15h11V9H4v6zM18.5 4v16H20V4h-1.5z\"\n  })\n});\nexport default justifyRight;\n//# sourceMappingURL=justify-right.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst layout = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z\"\n  })\n});\nexport default layout;\n//# sourceMappingURL=layout.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst listView = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z\"\n  })\n});\nexport default listView;\n//# sourceMappingURL=list-view.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst megaphone = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    fillRule: \"evenodd\",\n    d: \"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z\",\n    clipRule: \"evenodd\"\n  })\n});\nexport default megaphone;\n//# sourceMappingURL=megaphone.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst mobile = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z\"\n  })\n});\nexport default mobile;\n//# sourceMappingURL=mobile.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst moreVertical = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z\"\n  })\n});\nexport default moreVertical;\n//# sourceMappingURL=more-vertical.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst next = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z\"\n  })\n});\nexport default next;\n//# sourceMappingURL=next.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst plus = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z\"\n  })\n});\nexport default plus;\n//# sourceMappingURL=plus.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst previous = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M11.6 7l-1.1-1L5 12l5.5 6 1.1-1L7 12l4.6-5zm6 0l-1.1-1-5.5 6 5.5 6 1.1-1-4.6-5 4.6-5z\"\n  })\n});\nexport default previous;\n//# sourceMappingURL=previous.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst redo = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z\"\n  })\n});\nexport default redo;\n//# sourceMappingURL=redo.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst starEmpty = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    fillRule: \"evenodd\",\n    d: \"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z\",\n    clipRule: \"evenodd\"\n  })\n});\nexport default starEmpty;\n//# sourceMappingURL=star-empty.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst starFilled = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z\"\n  })\n});\nexport default starFilled;\n//# sourceMappingURL=star-filled.js.map","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const styles = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M20 12a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 0 1-6.5 6.5v-13a6.5 6.5 0 0 1 6.5 6.5Z\"\n  })\n});\nexport default styles;\n//# sourceMappingURL=styles.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst typography = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M6.9 7L3 17.8h1.7l1-2.8h4.1l1 2.8h1.7L8.6 7H6.9zm-.7 6.6l1.5-4.3 1.5 4.3h-3zM21.6 17c-.1.1-.2.2-.3.2-.1.1-.2.1-.4.1s-.3-.1-.4-.2c-.1-.1-.1-.3-.1-.6V12c0-.5 0-1-.1-1.4-.1-.4-.3-.7-.5-1-.2-.2-.5-.4-.9-.5-.4 0-.8-.1-1.3-.1s-1 .1-1.4.2c-.4.1-.7.3-1 .4-.2.2-.4.3-.6.5-.1.2-.2.4-.2.7 0 .3.1.5.2.8.2.2.4.3.8.3.3 0 .6-.1.8-.3.2-.2.3-.4.3-.7 0-.3-.1-.5-.2-.7-.2-.2-.4-.3-.6-.4.2-.2.4-.3.7-.4.3-.1.6-.1.8-.1.3 0 .6 0 .8.1.2.1.4.3.5.5.1.2.2.5.2.9v1.1c0 .3-.1.5-.3.6-.2.2-.5.3-.9.4-.3.1-.7.3-1.1.4-.4.1-.8.3-1.1.5-.3.2-.6.4-.8.7-.2.3-.3.7-.3 1.2 0 .6.2 1.1.5 1.4.3.4.9.5 1.6.5.5 0 1-.1 1.4-.3.4-.2.8-.6 1.1-1.1 0 .4.1.7.3 1 .2.3.6.4 1.2.4.4 0 .7-.1.9-.2.2-.1.5-.3.7-.4h-.3zm-3-.9c-.2.4-.5.7-.8.8-.3.2-.6.2-.8.2-.4 0-.6-.1-.9-.3-.2-.2-.3-.6-.3-1.1 0-.5.1-.9.3-1.2s.5-.5.8-.7c.3-.2.7-.3 1-.5.3-.1.6-.3.7-.6v3.4z\"\n  })\n});\nexport default typography;\n//# sourceMappingURL=typography.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst undo = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z\"\n  })\n});\nexport default undo;\n//# sourceMappingURL=undo.js.map","/* wp:polyfill */\n/**\n * WordPress dependencies\n */\nimport { ButtonGroup, Button, Slot, Fill } from '@wordpress/components';\nimport { Children } from '@wordpress/element';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst noop = () => {};\nfunction ActionItemSlot({\n  name,\n  as: Component = ButtonGroup,\n  fillProps = {},\n  bubblesVirtually,\n  ...props\n}) {\n  return /*#__PURE__*/_jsx(Slot, {\n    name: name,\n    bubblesVirtually: bubblesVirtually,\n    fillProps: fillProps,\n    children: fills => {\n      if (!Children.toArray(fills).length) {\n        return null;\n      }\n\n      // Special handling exists for backward compatibility.\n      // It ensures that menu items created by plugin authors aren't\n      // duplicated with automatically injected menu items coming\n      // from pinnable plugin sidebars.\n      // @see https://github.com/WordPress/gutenberg/issues/14457\n      const initializedByPlugins = [];\n      Children.forEach(fills, ({\n        props: {\n          __unstableExplicitMenuItem,\n          __unstableTarget\n        }\n      }) => {\n        if (__unstableTarget && __unstableExplicitMenuItem) {\n          initializedByPlugins.push(__unstableTarget);\n        }\n      });\n      const children = Children.map(fills, child => {\n        if (!child.props.__unstableExplicitMenuItem && initializedByPlugins.includes(child.props.__unstableTarget)) {\n          return null;\n        }\n        return child;\n      });\n      return /*#__PURE__*/_jsx(Component, {\n        ...props,\n        children: children\n      });\n    }\n  });\n}\nfunction ActionItem({\n  name,\n  as: Component = Button,\n  onClick,\n  ...props\n}) {\n  return /*#__PURE__*/_jsx(Fill, {\n    name: name,\n    children: ({\n      onClick: fpOnClick\n    }) => {\n      return /*#__PURE__*/_jsx(Component, {\n        onClick: onClick || fpOnClick ? (...args) => {\n          (onClick || noop)(...args);\n          (fpOnClick || noop)(...args);\n        } : undefined,\n        ...props\n      });\n    }\n  });\n}\nActionItem.Slot = ActionItemSlot;\nexport default ActionItem;\n//# sourceMappingURL=index.js.map","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { closeSmall } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport ComplementaryAreaToggle from '../complementary-area-toggle';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst ComplementaryAreaHeader = ({\n  children,\n  className,\n  toggleButtonProps\n}) => {\n  const toggleButton = /*#__PURE__*/_jsx(ComplementaryAreaToggle, {\n    icon: closeSmall,\n    ...toggleButtonProps\n  });\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: clsx('components-panel__header', 'interface-complementary-area-header', className),\n    tabIndex: -1,\n    children: [children, toggleButton]\n  });\n};\nexport default ComplementaryAreaHeader;\n//# sourceMappingURL=index.js.map","/**\n * WordPress dependencies\n */\nimport { check } from '@wordpress/icons';\nimport { MenuItem } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport ComplementaryAreaToggle from '../complementary-area-toggle';\nimport ActionItem from '../action-item';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst PluginsMenuItem = ({\n  // Menu item is marked with unstable prop for backward compatibility.\n  // They are removed so they don't leak to DOM elements.\n  // @see https://github.com/WordPress/gutenberg/issues/14457\n  __unstableExplicitMenuItem,\n  __unstableTarget,\n  ...restProps\n}) => /*#__PURE__*/_jsx(MenuItem, {\n  ...restProps\n});\nexport default function ComplementaryAreaMoreMenuItem({\n  scope,\n  target,\n  __unstableExplicitMenuItem,\n  ...props\n}) {\n  return /*#__PURE__*/_jsx(ComplementaryAreaToggle, {\n    as: toggleProps => {\n      return /*#__PURE__*/_jsx(ActionItem, {\n        __unstableExplicitMenuItem: __unstableExplicitMenuItem,\n        __unstableTarget: `${scope}/${target}`,\n        as: PluginsMenuItem,\n        name: `${scope}/plugin-more-menu`,\n        ...toggleProps\n      });\n    },\n    role: \"menuitemcheckbox\",\n    selectedIcon: check,\n    name: target,\n    scope: scope,\n    ...props\n  });\n}\n//# sourceMappingURL=index.js.map","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { usePluginContext } from '@wordpress/plugins';\n\n/**\n * Internal dependencies\n */\nimport { store as interfaceStore } from '../../store';\n\n/**\n * Whether the role supports checked state.\n *\n * @param {import('react').AriaRole} role Role.\n * @return {boolean} Whether the role supports checked state.\n * @see https://www.w3.org/TR/wai-aria-1.1/#aria-checked\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction roleSupportsCheckedState(role) {\n  return ['checkbox', 'option', 'radio', 'switch', 'menuitemcheckbox', 'menuitemradio', 'treeitem'].includes(role);\n}\nexport default function ComplementaryAreaToggle({\n  as = Button,\n  scope,\n  identifier: identifierProp,\n  icon: iconProp,\n  selectedIcon,\n  name,\n  shortcut,\n  ...props\n}) {\n  const ComponentToUse = as;\n  const context = usePluginContext();\n  const icon = iconProp || context.icon;\n  const identifier = identifierProp || `${context.name}/${name}`;\n  const isSelected = useSelect(select => select(interfaceStore).getActiveComplementaryArea(scope) === identifier, [identifier, scope]);\n  const {\n    enableComplementaryArea,\n    disableComplementaryArea\n  } = useDispatch(interfaceStore);\n  return /*#__PURE__*/_jsx(ComponentToUse, {\n    icon: selectedIcon && isSelected ? selectedIcon : icon,\n    \"aria-controls\": identifier.replace('/', ':')\n    // Make sure aria-checked matches spec https://www.w3.org/TR/wai-aria-1.1/#aria-checked\n    ,\n    \"aria-checked\": roleSupportsCheckedState(props.role) ? isSelected : undefined,\n    onClick: () => {\n      if (isSelected) {\n        disableComplementaryArea(scope);\n      } else {\n        enableComplementaryArea(scope, identifier);\n      }\n    },\n    shortcut: shortcut,\n    ...props\n  });\n}\n//# sourceMappingURL=index.js.map","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { Button, Panel, Slot, Fill, __unstableMotion as motion, __unstableAnimatePresence as AnimatePresence } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { check, starEmpty, starFilled } from '@wordpress/icons';\nimport { useEffect, useRef, useState } from '@wordpress/element';\nimport { store as viewportStore } from '@wordpress/viewport';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { useReducedMotion, useViewportMatch, usePrevious } from '@wordpress/compose';\nimport { usePluginContext } from '@wordpress/plugins';\n\n/**\n * Internal dependencies\n */\nimport ComplementaryAreaHeader from '../complementary-area-header';\nimport ComplementaryAreaMoreMenuItem from '../complementary-area-more-menu-item';\nimport ComplementaryAreaToggle from '../complementary-area-toggle';\nimport PinnedItems from '../pinned-items';\nimport { store as interfaceStore } from '../../store';\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst ANIMATION_DURATION = 0.3;\nfunction ComplementaryAreaSlot({\n  scope,\n  ...props\n}) {\n  return /*#__PURE__*/_jsx(Slot, {\n    name: `ComplementaryArea/${scope}`,\n    ...props\n  });\n}\nconst SIDEBAR_WIDTH = 280;\nconst variants = {\n  open: {\n    width: SIDEBAR_WIDTH\n  },\n  closed: {\n    width: 0\n  },\n  mobileOpen: {\n    width: '100vw'\n  }\n};\nfunction ComplementaryAreaFill({\n  activeArea,\n  isActive,\n  scope,\n  children,\n  className,\n  id\n}) {\n  const disableMotion = useReducedMotion();\n  const isMobileViewport = useViewportMatch('medium', '<');\n  // This is used to delay the exit animation to the next tick.\n  // The reason this is done is to allow us to apply the right transition properties\n  // When we switch from an open sidebar to another open sidebar.\n  // we don't want to animate in this case.\n  const previousActiveArea = usePrevious(activeArea);\n  const previousIsActive = usePrevious(isActive);\n  const [, setState] = useState({});\n  useEffect(() => {\n    setState({});\n  }, [isActive]);\n  const transition = {\n    type: 'tween',\n    duration: disableMotion || isMobileViewport || !!previousActiveArea && !!activeArea && activeArea !== previousActiveArea ? 0 : ANIMATION_DURATION,\n    ease: [0.6, 0, 0.4, 1]\n  };\n  return /*#__PURE__*/_jsx(Fill, {\n    name: `ComplementaryArea/${scope}`,\n    children: /*#__PURE__*/_jsx(AnimatePresence, {\n      initial: false,\n      children: (previousIsActive || isActive) && /*#__PURE__*/_jsx(motion.div, {\n        variants: variants,\n        initial: \"closed\",\n        animate: isMobileViewport ? 'mobileOpen' : 'open',\n        exit: \"closed\",\n        transition: transition,\n        className: \"interface-complementary-area__fill\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          id: id,\n          className: className,\n          style: {\n            width: isMobileViewport ? '100vw' : SIDEBAR_WIDTH\n          },\n          children: children\n        })\n      })\n    })\n  });\n}\nfunction useAdjustComplementaryListener(scope, identifier, activeArea, isActive, isSmall) {\n  const previousIsSmallRef = useRef(false);\n  const shouldOpenWhenNotSmallRef = useRef(false);\n  const {\n    enableComplementaryArea,\n    disableComplementaryArea\n  } = useDispatch(interfaceStore);\n  useEffect(() => {\n    // If the complementary area is active and the editor is switching from\n    // a big to a small window size.\n    if (isActive && isSmall && !previousIsSmallRef.current) {\n      disableComplementaryArea(scope);\n      // Flag the complementary area to be reopened when the window size\n      // goes from small to big.\n      shouldOpenWhenNotSmallRef.current = true;\n    } else if (\n    // If there is a flag indicating the complementary area should be\n    // enabled when we go from small to big window size and we are going\n    // from a small to big window size.\n    shouldOpenWhenNotSmallRef.current && !isSmall && previousIsSmallRef.current) {\n      // Remove the flag indicating the complementary area should be\n      // enabled.\n      shouldOpenWhenNotSmallRef.current = false;\n      enableComplementaryArea(scope, identifier);\n    } else if (\n    // If the flag is indicating the current complementary should be\n    // reopened but another complementary area becomes active, remove\n    // the flag.\n    shouldOpenWhenNotSmallRef.current && activeArea && activeArea !== identifier) {\n      shouldOpenWhenNotSmallRef.current = false;\n    }\n    if (isSmall !== previousIsSmallRef.current) {\n      previousIsSmallRef.current = isSmall;\n    }\n  }, [isActive, isSmall, scope, identifier, activeArea, disableComplementaryArea, enableComplementaryArea]);\n}\nfunction ComplementaryArea({\n  children,\n  className,\n  closeLabel = __('Close plugin'),\n  identifier: identifierProp,\n  header,\n  headerClassName,\n  icon: iconProp,\n  isPinnable = true,\n  panelClassName,\n  scope,\n  name,\n  title,\n  toggleShortcut,\n  isActiveByDefault\n}) {\n  const context = usePluginContext();\n  const icon = iconProp || context.icon;\n  const identifier = identifierProp || `${context.name}/${name}`;\n\n  // This state is used to delay the rendering of the Fill\n  // until the initial effect runs.\n  // This prevents the animation from running on mount if\n  // the complementary area is active by default.\n  const [isReady, setIsReady] = useState(false);\n  const {\n    isLoading,\n    isActive,\n    isPinned,\n    activeArea,\n    isSmall,\n    isLarge,\n    showIconLabels\n  } = useSelect(select => {\n    const {\n      getActiveComplementaryArea,\n      isComplementaryAreaLoading,\n      isItemPinned\n    } = select(interfaceStore);\n    const {\n      get\n    } = select(preferencesStore);\n    const _activeArea = getActiveComplementaryArea(scope);\n    return {\n      isLoading: isComplementaryAreaLoading(scope),\n      isActive: _activeArea === identifier,\n      isPinned: isItemPinned(scope, identifier),\n      activeArea: _activeArea,\n      isSmall: select(viewportStore).isViewportMatch('< medium'),\n      isLarge: select(viewportStore).isViewportMatch('large'),\n      showIconLabels: get('core', 'showIconLabels')\n    };\n  }, [identifier, scope]);\n  const isMobileViewport = useViewportMatch('medium', '<');\n  useAdjustComplementaryListener(scope, identifier, activeArea, isActive, isSmall);\n  const {\n    enableComplementaryArea,\n    disableComplementaryArea,\n    pinItem,\n    unpinItem\n  } = useDispatch(interfaceStore);\n  useEffect(() => {\n    // Set initial visibility: For large screens, enable if it's active by\n    // default. For small screens, always initially disable.\n    if (isActiveByDefault && activeArea === undefined && !isSmall) {\n      enableComplementaryArea(scope, identifier);\n    } else if (activeArea === undefined && isSmall) {\n      disableComplementaryArea(scope, identifier);\n    }\n    setIsReady(true);\n  }, [activeArea, isActiveByDefault, scope, identifier, isSmall, enableComplementaryArea, disableComplementaryArea]);\n  if (!isReady) {\n    return;\n  }\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [isPinnable && /*#__PURE__*/_jsx(PinnedItems, {\n      scope: scope,\n      children: isPinned && /*#__PURE__*/_jsx(ComplementaryAreaToggle, {\n        scope: scope,\n        identifier: identifier,\n        isPressed: isActive && (!showIconLabels || isLarge),\n        \"aria-expanded\": isActive,\n        \"aria-disabled\": isLoading,\n        label: title,\n        icon: showIconLabels ? check : icon,\n        showTooltip: !showIconLabels,\n        variant: showIconLabels ? 'tertiary' : undefined,\n        size: \"compact\",\n        shortcut: toggleShortcut\n      })\n    }), name && isPinnable && /*#__PURE__*/_jsx(ComplementaryAreaMoreMenuItem, {\n      target: name,\n      scope: scope,\n      icon: icon,\n      children: title\n    }), /*#__PURE__*/_jsxs(ComplementaryAreaFill, {\n      activeArea: activeArea,\n      isActive: isActive,\n      className: clsx('interface-complementary-area', className),\n      scope: scope,\n      id: identifier.replace('/', ':'),\n      children: [/*#__PURE__*/_jsx(ComplementaryAreaHeader, {\n        className: headerClassName,\n        closeLabel: closeLabel,\n        onClose: () => disableComplementaryArea(scope),\n        toggleButtonProps: {\n          label: closeLabel,\n          size: 'compact',\n          shortcut: toggleShortcut,\n          scope,\n          identifier\n        },\n        children: header || /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"h2\", {\n            className: \"interface-complementary-area-header__title\",\n            children: title\n          }), isPinnable && !isMobileViewport && /*#__PURE__*/_jsx(Button, {\n            className: \"interface-complementary-area__pin-unpin-item\",\n            icon: isPinned ? starFilled : starEmpty,\n            label: isPinned ? __('Unpin from toolbar') : __('Pin to toolbar'),\n            onClick: () => (isPinned ? unpinItem : pinItem)(scope, identifier),\n            isPressed: isPinned,\n            \"aria-expanded\": isPinned,\n            size: \"compact\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Panel, {\n        className: panelClassName,\n        children: children\n      })]\n    })]\n  });\n}\nComplementaryArea.Slot = ComplementaryAreaSlot;\nexport default ComplementaryArea;\n//# sourceMappingURL=index.js.map","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nconst FullscreenMode = ({\n  isActive\n}) => {\n  useEffect(() => {\n    let isSticky = false;\n    // `is-fullscreen-mode` is set in PHP as a body class by Gutenberg, and this causes\n    // `sticky-menu` to be applied by WordPress and prevents the admin menu being scrolled\n    // even if `is-fullscreen-mode` is then removed. Let's remove `sticky-menu` here as\n    // a consequence of the FullscreenMode setup.\n    if (document.body.classList.contains('sticky-menu')) {\n      isSticky = true;\n      document.body.classList.remove('sticky-menu');\n    }\n    return () => {\n      if (isSticky) {\n        document.body.classList.add('sticky-menu');\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (isActive) {\n      document.body.classList.add('is-fullscreen-mode');\n    } else {\n      document.body.classList.remove('is-fullscreen-mode');\n    }\n    return () => {\n      if (isActive) {\n        document.body.classList.remove('is-fullscreen-mode');\n      }\n    };\n  }, [isActive]);\n  return null;\n};\nexport default FullscreenMode;\n//# sourceMappingURL=index.js.map","export { default as ComplementaryArea } from './complementary-area';\nexport { default as ComplementaryAreaMoreMenuItem } from './complementary-area-more-menu-item';\nexport { default as FullscreenMode } from './fullscreen-mode';\nexport { default as InterfaceSkeleton } from './interface-skeleton';\nexport { default as PinnedItems } from './pinned-items';\nexport { default as ActionItem } from './action-item';\nexport { default as NavigableRegion } from './navigable-region';\n//# sourceMappingURL=index.js.map","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { forwardRef, useEffect } from '@wordpress/element';\nimport { __unstableMotion as motion, __unstableAnimatePresence as AnimatePresence } from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\nimport { useReducedMotion, useViewportMatch, useResizeObserver } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport NavigableRegion from '../navigable-region';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst ANIMATION_DURATION = 0.25;\nconst commonTransition = {\n  type: 'tween',\n  duration: ANIMATION_DURATION,\n  ease: [0.6, 0, 0.4, 1]\n};\nfunction useHTMLClass(className) {\n  useEffect(() => {\n    const element = document && document.querySelector(`html:not(.${className})`);\n    if (!element) {\n      return;\n    }\n    element.classList.toggle(className);\n    return () => {\n      element.classList.toggle(className);\n    };\n  }, [className]);\n}\nconst headerVariants = {\n  hidden: {\n    opacity: 1,\n    marginTop: -60\n  },\n  visible: {\n    opacity: 1,\n    marginTop: 0\n  },\n  distractionFreeHover: {\n    opacity: 1,\n    marginTop: 0,\n    transition: {\n      ...commonTransition,\n      delay: 0.2,\n      delayChildren: 0.2\n    }\n  },\n  distractionFreeHidden: {\n    opacity: 0,\n    marginTop: -60\n  },\n  distractionFreeDisabled: {\n    opacity: 0,\n    marginTop: 0,\n    transition: {\n      ...commonTransition,\n      delay: 0.8,\n      delayChildren: 0.8\n    }\n  }\n};\nfunction InterfaceSkeleton({\n  isDistractionFree,\n  footer,\n  header,\n  editorNotices,\n  sidebar,\n  secondarySidebar,\n  content,\n  actions,\n  labels,\n  className\n}, ref) {\n  const [secondarySidebarResizeListener, secondarySidebarSize] = useResizeObserver();\n  const isMobileViewport = useViewportMatch('medium', '<');\n  const disableMotion = useReducedMotion();\n  const defaultTransition = {\n    type: 'tween',\n    duration: disableMotion ? 0 : ANIMATION_DURATION,\n    ease: [0.6, 0, 0.4, 1]\n  };\n  useHTMLClass('interface-interface-skeleton__html-container');\n  const defaultLabels = {\n    /* translators: accessibility text for the top bar landmark region. */\n    header: _x('Header', 'header landmark area'),\n    /* translators: accessibility text for the content landmark region. */\n    body: __('Content'),\n    /* translators: accessibility text for the secondary sidebar landmark region. */\n    secondarySidebar: __('Block Library'),\n    /* translators: accessibility text for the settings landmark region. */\n    sidebar: _x('Settings', 'settings landmark area'),\n    /* translators: accessibility text for the publish landmark region. */\n    actions: __('Publish'),\n    /* translators: accessibility text for the footer landmark region. */\n    footer: __('Footer')\n  };\n  const mergedLabels = {\n    ...defaultLabels,\n    ...labels\n  };\n  return /*#__PURE__*/_jsxs(\"div\", {\n    ref: ref,\n    className: clsx(className, 'interface-interface-skeleton', !!footer && 'has-footer'),\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"interface-interface-skeleton__editor\",\n      children: [/*#__PURE__*/_jsx(AnimatePresence, {\n        initial: false,\n        children: !!header && /*#__PURE__*/_jsx(NavigableRegion, {\n          as: motion.div,\n          className: \"interface-interface-skeleton__header\",\n          \"aria-label\": mergedLabels.header,\n          initial: isDistractionFree && !isMobileViewport ? 'distractionFreeHidden' : 'hidden',\n          whileHover: isDistractionFree && !isMobileViewport ? 'distractionFreeHover' : 'visible',\n          animate: isDistractionFree && !isMobileViewport ? 'distractionFreeDisabled' : 'visible',\n          exit: isDistractionFree && !isMobileViewport ? 'distractionFreeHidden' : 'hidden',\n          variants: headerVariants,\n          transition: defaultTransition,\n          children: header\n        })\n      }), isDistractionFree && /*#__PURE__*/_jsx(\"div\", {\n        className: \"interface-interface-skeleton__header\",\n        children: editorNotices\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"interface-interface-skeleton__body\",\n        children: [/*#__PURE__*/_jsx(AnimatePresence, {\n          initial: false,\n          children: !!secondarySidebar && /*#__PURE__*/_jsx(NavigableRegion, {\n            className: \"interface-interface-skeleton__secondary-sidebar\",\n            ariaLabel: mergedLabels.secondarySidebar,\n            as: motion.div,\n            initial: \"closed\",\n            animate: \"open\",\n            exit: \"closed\",\n            variants: {\n              open: {\n                width: secondarySidebarSize.width\n              },\n              closed: {\n                width: 0\n              }\n            },\n            transition: defaultTransition,\n            children: /*#__PURE__*/_jsxs(motion.div, {\n              style: {\n                position: 'absolute',\n                width: isMobileViewport ? '100vw' : 'fit-content',\n                height: '100%',\n                left: 0\n              },\n              variants: {\n                open: {\n                  x: 0\n                },\n                closed: {\n                  x: '-100%'\n                }\n              },\n              transition: defaultTransition,\n              children: [secondarySidebarResizeListener, secondarySidebar]\n            })\n          })\n        }), /*#__PURE__*/_jsx(NavigableRegion, {\n          className: \"interface-interface-skeleton__content\",\n          ariaLabel: mergedLabels.body,\n          children: content\n        }), !!sidebar && /*#__PURE__*/_jsx(NavigableRegion, {\n          className: \"interface-interface-skeleton__sidebar\",\n          ariaLabel: mergedLabels.sidebar,\n          children: sidebar\n        }), !!actions && /*#__PURE__*/_jsx(NavigableRegion, {\n          className: \"interface-interface-skeleton__actions\",\n          ariaLabel: mergedLabels.actions,\n          children: actions\n        })]\n      })]\n    }), !!footer && /*#__PURE__*/_jsx(NavigableRegion, {\n      className: \"interface-interface-skeleton__footer\",\n      ariaLabel: mergedLabels.footer,\n      children: footer\n    })]\n  });\n}\nexport default forwardRef(InterfaceSkeleton);\n//# sourceMappingURL=index.js.map","/**\n * WordPress dependencies\n */\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst NavigableRegion = forwardRef(({\n  children,\n  className,\n  ariaLabel,\n  as: Tag = 'div',\n  ...props\n}, ref) => {\n  return /*#__PURE__*/_jsx(Tag, {\n    ref: ref,\n    className: clsx('interface-navigable-region', className),\n    \"aria-label\": ariaLabel,\n    role: \"region\",\n    tabIndex: \"-1\",\n    ...props,\n    children: children\n  });\n});\nNavigableRegion.displayName = 'NavigableRegion';\nexport default NavigableRegion;\n//# sourceMappingURL=index.js.map","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { Slot, Fill } from '@wordpress/components';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction PinnedItems({\n  scope,\n  ...props\n}) {\n  return /*#__PURE__*/_jsx(Fill, {\n    name: `PinnedItems/${scope}`,\n    ...props\n  });\n}\nfunction PinnedItemsSlot({\n  scope,\n  className,\n  ...props\n}) {\n  return /*#__PURE__*/_jsx(Slot, {\n    name: `PinnedItems/${scope}`,\n    ...props,\n    children: fills => fills?.length > 0 && /*#__PURE__*/_jsx(\"div\", {\n      className: clsx(className, 'interface-pinned-items'),\n      children: fills\n    })\n  });\n}\nPinnedItems.Slot = PinnedItemsSlot;\nexport default PinnedItems;\n//# sourceMappingURL=index.js.map","export * from './components';\nexport { store } from './store';\n//# sourceMappingURL=index.js.map","/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport { normalizeComplementaryAreaScope, normalizeComplementaryAreaName } from './deprecated';\n\n/**\n * Set a default complementary area.\n *\n * @param {string} scope Complementary area scope.\n * @param {string} area  Area identifier.\n *\n * @return {Object} Action object.\n */\nexport const setDefaultComplementaryArea = (scope, area) => {\n  scope = normalizeComplementaryAreaScope(scope);\n  area = normalizeComplementaryAreaName(scope, area);\n  return {\n    type: 'SET_DEFAULT_COMPLEMENTARY_AREA',\n    scope,\n    area\n  };\n};\n\n/**\n * Enable the complementary area.\n *\n * @param {string} scope Complementary area scope.\n * @param {string} area  Area identifier.\n */\nexport const enableComplementaryArea = (scope, area) => ({\n  registry,\n  dispatch\n}) => {\n  // Return early if there's no area.\n  if (!area) {\n    return;\n  }\n  scope = normalizeComplementaryAreaScope(scope);\n  area = normalizeComplementaryAreaName(scope, area);\n  const isComplementaryAreaVisible = registry.select(preferencesStore).get(scope, 'isComplementaryAreaVisible');\n  if (!isComplementaryAreaVisible) {\n    registry.dispatch(preferencesStore).set(scope, 'isComplementaryAreaVisible', true);\n  }\n  dispatch({\n    type: 'ENABLE_COMPLEMENTARY_AREA',\n    scope,\n    area\n  });\n};\n\n/**\n * Disable the complementary area.\n *\n * @param {string} scope Complementary area scope.\n */\nexport const disableComplementaryArea = scope => ({\n  registry\n}) => {\n  scope = normalizeComplementaryAreaScope(scope);\n  const isComplementaryAreaVisible = registry.select(preferencesStore).get(scope, 'isComplementaryAreaVisible');\n  if (isComplementaryAreaVisible) {\n    registry.dispatch(preferencesStore).set(scope, 'isComplementaryAreaVisible', false);\n  }\n};\n\n/**\n * Pins an item.\n *\n * @param {string} scope Item scope.\n * @param {string} item  Item identifier.\n *\n * @return {Object} Action object.\n */\nexport const pinItem = (scope, item) => ({\n  registry\n}) => {\n  // Return early if there's no item.\n  if (!item) {\n    return;\n  }\n  scope = normalizeComplementaryAreaScope(scope);\n  item = normalizeComplementaryAreaName(scope, item);\n  const pinnedItems = registry.select(preferencesStore).get(scope, 'pinnedItems');\n\n  // The item is already pinned, there's nothing to do.\n  if (pinnedItems?.[item] === true) {\n    return;\n  }\n  registry.dispatch(preferencesStore).set(scope, 'pinnedItems', {\n    ...pinnedItems,\n    [item]: true\n  });\n};\n\n/**\n * Unpins an item.\n *\n * @param {string} scope Item scope.\n * @param {string} item  Item identifier.\n */\nexport const unpinItem = (scope, item) => ({\n  registry\n}) => {\n  // Return early if there's no item.\n  if (!item) {\n    return;\n  }\n  scope = normalizeComplementaryAreaScope(scope);\n  item = normalizeComplementaryAreaName(scope, item);\n  const pinnedItems = registry.select(preferencesStore).get(scope, 'pinnedItems');\n  registry.dispatch(preferencesStore).set(scope, 'pinnedItems', {\n    ...pinnedItems,\n    [item]: false\n  });\n};\n\n/**\n * Returns an action object used in signalling that a feature should be toggled.\n *\n * @param {string} scope       The feature scope (e.g. core/edit-post).\n * @param {string} featureName The feature name.\n */\nexport function toggleFeature(scope, featureName) {\n  return function ({\n    registry\n  }) {\n    deprecated(`dispatch( 'core/interface' ).toggleFeature`, {\n      since: '6.0',\n      alternative: `dispatch( 'core/preferences' ).toggle`\n    });\n    registry.dispatch(preferencesStore).toggle(scope, featureName);\n  };\n}\n\n/**\n * Returns an action object used in signalling that a feature should be set to\n * a true or false value\n *\n * @param {string}  scope       The feature scope (e.g. core/edit-post).\n * @param {string}  featureName The feature name.\n * @param {boolean} value       The value to set.\n *\n * @return {Object} Action object.\n */\nexport function setFeatureValue(scope, featureName, value) {\n  return function ({\n    registry\n  }) {\n    deprecated(`dispatch( 'core/interface' ).setFeatureValue`, {\n      since: '6.0',\n      alternative: `dispatch( 'core/preferences' ).set`\n    });\n    registry.dispatch(preferencesStore).set(scope, featureName, !!value);\n  };\n}\n\n/**\n * Returns an action object used in signalling that defaults should be set for features.\n *\n * @param {string}                  scope    The feature scope (e.g. core/edit-post).\n * @param {Object<string, boolean>} defaults A key/value map of feature names to values.\n *\n * @return {Object} Action object.\n */\nexport function setFeatureDefaults(scope, defaults) {\n  return function ({\n    registry\n  }) {\n    deprecated(`dispatch( 'core/interface' ).setFeatureDefaults`, {\n      since: '6.0',\n      alternative: `dispatch( 'core/preferences' ).setDefaults`\n    });\n    registry.dispatch(preferencesStore).setDefaults(scope, defaults);\n  };\n}\n\n/**\n * Returns an action object used in signalling that the user opened a modal.\n *\n * @param {string} name A string that uniquely identifies the modal.\n *\n * @return {Object} Action object.\n */\nexport function openModal(name) {\n  return {\n    type: 'OPEN_MODAL',\n    name\n  };\n}\n\n/**\n * Returns an action object signalling that the user closed a modal.\n *\n * @return {Object} Action object.\n */\nexport function closeModal() {\n  return {\n    type: 'CLOSE_MODAL'\n  };\n}\n//# sourceMappingURL=actions.js.map","/**\n * The identifier for the data store.\n *\n * @type {string}\n */\nexport const STORE_NAME = 'core/interface';\n//# sourceMappingURL=constants.js.map","/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\nexport function normalizeComplementaryAreaScope(scope) {\n  if (['core/edit-post', 'core/edit-site'].includes(scope)) {\n    deprecated(`${scope} interface scope`, {\n      alternative: 'core interface scope',\n      hint: 'core/edit-post and core/edit-site are merging.',\n      version: '6.6'\n    });\n    return 'core';\n  }\n  return scope;\n}\nexport function normalizeComplementaryAreaName(scope, name) {\n  if (scope === 'core' && name === 'edit-site/template') {\n    deprecated(`edit-site/template sidebar`, {\n      alternative: 'edit-post/document',\n      version: '6.6'\n    });\n    return 'edit-post/document';\n  }\n  if (scope === 'core' && name === 'edit-site/block-inspector') {\n    deprecated(`edit-site/block-inspector sidebar`, {\n      alternative: 'edit-post/block',\n      version: '6.6'\n    });\n    return 'edit-post/block';\n  }\n  return name;\n}\n//# sourceMappingURL=deprecated.js.map","/**\n * WordPress dependencies\n */\nimport { createReduxStore, register } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport * as actions from './actions';\nimport * as selectors from './selectors';\nimport reducer from './reducer';\nimport { STORE_NAME } from './constants';\n\n/**\n * Store definition for the interface namespace.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\n *\n * @type {Object}\n */\nexport const store = createReduxStore(STORE_NAME, {\n  reducer,\n  actions,\n  selectors\n});\n\n// Once we build a more generic persistence plugin that works across types of stores\n// we'd be able to replace this with a register call.\nregister(store);\n//# sourceMappingURL=index.js.map","/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@wordpress/data';\nexport function complementaryAreas(state = {}, action) {\n  switch (action.type) {\n    case 'SET_DEFAULT_COMPLEMENTARY_AREA':\n      {\n        const {\n          scope,\n          area\n        } = action;\n\n        // If there's already an area, don't overwrite it.\n        if (state[scope]) {\n          return state;\n        }\n        return {\n          ...state,\n          [scope]: area\n        };\n      }\n    case 'ENABLE_COMPLEMENTARY_AREA':\n      {\n        const {\n          scope,\n          area\n        } = action;\n        return {\n          ...state,\n          [scope]: area\n        };\n      }\n  }\n  return state;\n}\n\n/**\n * Reducer for storing the name of the open modal, or null if no modal is open.\n *\n * @param {Object} state  Previous state.\n * @param {Object} action Action object containing the `name` of the modal\n *\n * @return {Object} Updated state\n */\nexport function activeModal(state = null, action) {\n  switch (action.type) {\n    case 'OPEN_MODAL':\n      return action.name;\n    case 'CLOSE_MODAL':\n      return null;\n  }\n  return state;\n}\nexport default combineReducers({\n  complementaryAreas,\n  activeModal\n});\n//# sourceMappingURL=reducer.js.map","/**\n * WordPress dependencies\n */\nimport { createRegistrySelector } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport { normalizeComplementaryAreaScope, normalizeComplementaryAreaName } from './deprecated';\n\n/**\n * Returns the complementary area that is active in a given scope.\n *\n * @param {Object} state Global application state.\n * @param {string} scope Item scope.\n *\n * @return {string | null | undefined} The complementary area that is active in the given scope.\n */\nexport const getActiveComplementaryArea = createRegistrySelector(select => (state, scope) => {\n  scope = normalizeComplementaryAreaScope(scope);\n  const isComplementaryAreaVisible = select(preferencesStore).get(scope, 'isComplementaryAreaVisible');\n\n  // Return `undefined` to indicate that the user has never toggled\n  // visibility, this is the vanilla default. Other code relies on this\n  // nuance in the return value.\n  if (isComplementaryAreaVisible === undefined) {\n    return undefined;\n  }\n\n  // Return `null` to indicate the user hid the complementary area.\n  if (isComplementaryAreaVisible === false) {\n    return null;\n  }\n  return state?.complementaryAreas?.[scope];\n});\nexport const isComplementaryAreaLoading = createRegistrySelector(select => (state, scope) => {\n  scope = normalizeComplementaryAreaScope(scope);\n  const isVisible = select(preferencesStore).get(scope, 'isComplementaryAreaVisible');\n  const identifier = state?.complementaryAreas?.[scope];\n  return isVisible && identifier === undefined;\n});\n\n/**\n * Returns a boolean indicating if an item is pinned or not.\n *\n * @param {Object} state Global application state.\n * @param {string} scope Scope.\n * @param {string} item  Item to check.\n *\n * @return {boolean} True if the item is pinned and false otherwise.\n */\nexport const isItemPinned = createRegistrySelector(select => (state, scope, item) => {\n  var _pinnedItems$item;\n  scope = normalizeComplementaryAreaScope(scope);\n  item = normalizeComplementaryAreaName(scope, item);\n  const pinnedItems = select(preferencesStore).get(scope, 'pinnedItems');\n  return (_pinnedItems$item = pinnedItems?.[item]) !== null && _pinnedItems$item !== void 0 ? _pinnedItems$item : true;\n});\n\n/**\n * Returns a boolean indicating whether a feature is active for a particular\n * scope.\n *\n * @param {Object} state       The store state.\n * @param {string} scope       The scope of the feature (e.g. core/edit-post).\n * @param {string} featureName The name of the feature.\n *\n * @return {boolean} Is the feature enabled?\n */\nexport const isFeatureActive = createRegistrySelector(select => (state, scope, featureName) => {\n  deprecated(`select( 'core/interface' ).isFeatureActive( scope, featureName )`, {\n    since: '6.0',\n    alternative: `select( 'core/preferences' ).get( scope, featureName )`\n  });\n  return !!select(preferencesStore).get(scope, featureName);\n});\n\n/**\n * Returns true if a modal is active, or false otherwise.\n *\n * @param {Object} state     Global application state.\n * @param {string} modalName A string that uniquely identifies the modal.\n *\n * @return {boolean} Whether the modal is active.\n */\nexport function isModalActive(state, modalName) {\n  return state.activeModal === modalName;\n}\n//# sourceMappingURL=selectors.js.map","/**\n * External dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { Block } from '@wordpress/blocks/index';\n\n/**\n * Disables Styles for button\n * Currently we are not able to read these styles in renderer\n */\nfunction enhanceButtonBlock() {\n\taddFilter(\n\t\t'blocks.registerBlockType',\n\t\t'mailpoet-email-editor/change-button',\n\t\t( settings: Block, name ) => {\n\t\t\tif ( name === 'core/button' ) {\n\t\t\t\treturn { ...settings, styles: [] };\n\t\t\t}\n\t\t\treturn settings;\n\t\t}\n\t);\n}\n\nexport { enhanceButtonBlock };\n","/**\n * External dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { Block } from '@wordpress/blocks/index';\n\n/**\n * Switch layout to reduced flex email layout\n * Email render engine can't handle full flex layout se we need to switch to reduced flex layout\n */\nfunction enhanceButtonsBlock() {\n\taddFilter(\n\t\t'blocks.registerBlockType',\n\t\t'mailpoet-email-editor/change-buttons',\n\t\t( settings: Block, name ) => {\n\t\t\tif ( name === 'core/buttons' ) {\n\t\t\t\treturn {\n\t\t\t\t\t...settings,\n\t\t\t\t\tsupports: {\n\t\t\t\t\t\t...settings.supports,\n\t\t\t\t\t\tlayout: false, // disable block editor's layouts\n\t\t\t\t\t\t// enable MailPoet's reduced flex email layout\n\t\t\t\t\t\t__experimentalEmailFlexLayout: true, // eslint-disable-line\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn settings;\n\t\t}\n\t);\n}\n\nexport { enhanceButtonsBlock };\n","/**\n * External dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { Block } from '@wordpress/blocks/index';\n\nfunction enhanceColumnBlock() {\n\taddFilter(\n\t\t'blocks.registerBlockType',\n\t\t'mailpoet-email-editor/change-column',\n\t\t( settings: Block, name ) => {\n\t\t\tif ( name === 'core/column' ) {\n\t\t\t\treturn {\n\t\t\t\t\t...settings,\n\t\t\t\t\tsupports: {\n\t\t\t\t\t\t...settings.supports,\n\t\t\t\t\t\tbackground: {\n\t\t\t\t\t\t\tbackgroundImage: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn settings;\n\t\t}\n\t);\n}\n\nexport { enhanceColumnBlock };\n","/**\n * External dependencies\n */\nimport { InspectorControls } from '@wordpress/block-editor';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { Block } from '@wordpress/blocks/index';\nimport { addFilter } from '@wordpress/hooks';\n\nconst columnsEditCallback = createHigherOrderComponent(\n\t( BlockEdit ) =>\n\t\tfunction alterBlocksEdits( props ) {\n\t\t\tif ( props.name !== 'core/columns' ) {\n\t\t\t\treturn <BlockEdit { ...props } />;\n\t\t\t}\n\t\t\t// CSS sets opacity by the class is-disabled by the toggle component from the Gutenberg package\n\t\t\t// To deactivating the input we use CSS pointer-events because we want to avoid JavaScript hacks\n\t\t\tconst deactivateToggleCss = `\n      .components-panel__body .components-toggle-control .components-form-toggle { opacity: 0.3; }\n      .components-panel__body .components-toggle-control .components-form-toggle__input { pointer-events: none; }\n      .components-panel__body .components-toggle-control label { pointer-events: none; }\n    `;\n\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<BlockEdit { ...props } />\n\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t<style>{ deactivateToggleCss }</style>\n\t\t\t\t\t</InspectorControls>\n\t\t\t\t</>\n\t\t\t);\n\t\t},\n\t'columnsEditCallback'\n);\n\nfunction deactivateStackOnMobile() {\n\taddFilter(\n\t\t'editor.BlockEdit',\n\t\t'mailpoet-email-editor/deactivate-stack-on-mobile',\n\t\tcolumnsEditCallback\n\t);\n}\n\n/**\n * Disables layout support for columns and column blocks because\n * the default layout `flex` add gaps between columns that it is not possible to support in emails.\n */\nfunction disableColumnsLayout() {\n\taddFilter(\n\t\t'blocks.registerBlockType',\n\t\t'mailpoet-email-editor/disable-columns-layout',\n\t\t( settings, name ) => {\n\t\t\tif ( name === 'core/columns' || name === 'core/column' ) {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\t\t\t\treturn {\n\t\t\t\t\t...settings,\n\t\t\t\t\tsupports: {\n\t\t\t\t\t\t...settings.supports,\n\t\t\t\t\t\tlayout: false,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\t\t\treturn settings;\n\t\t}\n\t);\n}\n\nfunction enhanceColumnsBlock() {\n\taddFilter(\n\t\t'blocks.registerBlockType',\n\t\t'mailpoet-email-editor/change-columns',\n\t\t( settings: Block, name ) => {\n\t\t\tif ( name === 'core/columns' ) {\n\t\t\t\treturn {\n\t\t\t\t\t...settings,\n\t\t\t\t\tsupports: {\n\t\t\t\t\t\t...settings.supports,\n\t\t\t\t\t\tbackground: {\n\t\t\t\t\t\t\tbackgroundImage: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn settings;\n\t\t}\n\t);\n}\n\nexport { deactivateStackOnMobile, disableColumnsLayout, enhanceColumnsBlock };\n","/**\n * External dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport {\n\tBlock as WPBlock,\n\tBlockSupports as WPBlockSupports,\n} from '@wordpress/blocks/index';\n\n// Extend the BlockSupports type to include shadow\n// The shadow is not included in WP6.4 but it is in WP6.5\n// We can remove it once we upgrade packages to WP6.5\ntype BlockSupports = WPBlockSupports & { shadow: boolean };\ntype Block = WPBlock & { supports?: BlockSupports };\n\n/**\n * Disables Shadow Support for all blocks\n * Currently we are not able to read these styles in renderer\n */\nfunction alterSupportConfiguration() {\n\taddFilter(\n\t\t'blocks.registerBlockType',\n\t\t'mailpoet-email-editor/block-support',\n\t\t( settings: Block ) => {\n\t\t\tif ( settings.supports?.shadow ) {\n\t\t\t\treturn {\n\t\t\t\t\t...settings,\n\t\t\t\t\tsupports: { ...settings.supports, shadow: false },\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn settings;\n\t\t}\n\t);\n}\n\nexport { alterSupportConfiguration };\n","/**\n * External dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Disables layout support for group blocks because the default layout `flex` add gaps between columns that it is not possible to support in emails.\n */\nfunction disableGroupVariations() {\n\taddFilter(\n\t\t'blocks.registerBlockType',\n\t\t'mailpoet-email-editor/disable-group-variations',\n\t\t( settings, name ) => {\n\t\t\tif ( name === 'core/group' ) {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\t\t\t\treturn {\n\t\t\t\t\t...settings,\n\t\t\t\t\tvariations: settings.variations.filter(\n\t\t\t\t\t\t( variation ) => variation.name === 'group'\n\t\t\t\t\t),\n\t\t\t\t\tsupports: {\n\t\t\t\t\t\t...settings.supports,\n\t\t\t\t\t\tlayout: false,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\t\t\treturn settings;\n\t\t}\n\t);\n}\n\nexport { disableGroupVariations };\n","/**\n * External dependencies\n */\nimport { InspectorControls } from '@wordpress/block-editor';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { Block } from '@wordpress/blocks/index';\n\nconst imageEditCallback = createHigherOrderComponent(\n\t( BlockEdit ) =>\n\t\tfunction alterBlocksEdits( props ) {\n\t\t\tif ( props.name !== 'core/image' ) {\n\t\t\t\treturn <BlockEdit { ...props } />;\n\t\t\t}\n\t\t\t// Because we cannot support displaying the modal with image after clicking in the email we have to hide the toggle\n\t\t\tconst deactivateToggleCss = `\n        .components-tools-panel .components-toggle-control { display: none; }\n      `;\n\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<BlockEdit { ...props } />\n\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t<style>{ deactivateToggleCss }</style>\n\t\t\t\t\t</InspectorControls>\n\t\t\t\t</>\n\t\t\t);\n\t\t},\n\t'imageEditCallback'\n);\n\n/**\n * Because CSS property filter is not supported in almost 50% of email clients we have to disable it\n */\nfunction disableImageFilter() {\n\taddFilter(\n\t\t'blocks.registerBlockType',\n\t\t'mailpoet-email-editor/deactivate-image-filter',\n\t\t( settings: Block, name ) => {\n\t\t\tif ( name === 'core/image' ) {\n\t\t\t\treturn {\n\t\t\t\t\t...settings,\n\t\t\t\t\tsupports: {\n\t\t\t\t\t\t...settings.supports,\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tduetone: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn settings;\n\t\t}\n\t);\n}\n\nfunction hideExpandOnClick() {\n\taddFilter(\n\t\t'editor.BlockEdit',\n\t\t'mailpoet-email-editor/hide-expand-on-click',\n\t\timageEditCallback\n\t);\n}\n\nexport { hideExpandOnClick, disableImageFilter };\n","/**\n * External dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { Block } from '@wordpress/blocks/index';\nimport { __ } from '@wordpress/i18n';\nimport { useBlockProps } from '@wordpress/block-editor';\n\nfunction Placeholder( { layoutClassNames } ) {\n\tconst blockProps = useBlockProps( { className: layoutClassNames } );\n\treturn (\n\t\t<div { ...blockProps }>\n\t\t\t<p>{ __( 'This is the Content block.', 'mailpoet' ) }</p>\n\t\t\t<p>\n\t\t\t\t{ __(\n\t\t\t\t\t'It will display all the blocks in the email content, which might be only simple text paragraphs. You can enrich your message with images, incorporate data through tables, explore different layout designs with columns, or use any other block type.',\n\t\t\t\t\t'mailpoet'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n\n// Curried function to add a custom placeholder to the post content block, or just use the original Edit component.\nfunction PostContentEdit( OriginalEditComponent ) {\n\treturn function Edit( {\n\t\tcontext,\n\t\t__unstableLayoutClassNames: layoutClassNames,\n\t} ) {\n\t\tconst { postId: contextPostId, postType: contextPostType } = context;\n\t\tconst hasContent = contextPostId && contextPostType;\n\n\t\tif ( hasContent ) {\n\t\t\treturn (\n\t\t\t\t<OriginalEditComponent\n\t\t\t\t\t{ ...{\n\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t__unstableLayoutClassNames: layoutClassNames,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn <Placeholder layoutClassNames={ layoutClassNames } />;\n\t};\n}\n\nfunction enhancePostContentBlock() {\n\taddFilter(\n\t\t'blocks.registerBlockType',\n\t\t'mailpoet-email-editor/change-post-content',\n\t\t( settings: Block, name ) => {\n\t\t\tif ( name === 'core/post-content' ) {\n\t\t\t\treturn {\n\t\t\t\t\t...settings,\n\t\t\t\t\tedit: PostContentEdit( settings.edit ),\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn settings;\n\t\t}\n\t);\n}\n\nexport { enhancePostContentBlock };\n","/**\n * External dependencies\n */\nimport {\n\tregisterFormatType,\n\tunregisterFormatType,\n\tapplyFormat,\n\tinsert,\n\tcreate,\n\ttoHTMLString,\n} from '@wordpress/rich-text';\nimport { __ } from '@wordpress/i18n';\nimport { BlockControls } from '@wordpress/block-editor';\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useCallback, useState } from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport * as React from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetCursorPosition,\n\treplacePersonalizationTagsWithHTMLComments,\n} from '../../components/personalization-tags/rich-text-utils';\nimport { PersonalizationTagsModal } from '../../components/personalization-tags/personalization-tags-modal';\nimport { storeName } from '../../store';\nimport { PersonalizationTagsPopover } from '../../components/personalization-tags/personalization-tags-popover';\nimport { PersonalizationTagsLinkPopover } from '../../components/personalization-tags/personalization-tags-link-popover';\nimport { recordEvent } from '../../events';\n\n/**\n * Disable Rich text formats we currently cannot support\n * Note: This will remove its support for all blocks in the email editor e.g., p, h1,h2, etc\n */\nfunction disableCertainRichTextFormats() {\n\t// remove support for inline image - We can't use it\n\tunregisterFormatType( 'core/image' );\n\n\t// remove support for Inline code - Not well formatted\n\tunregisterFormatType( 'core/code' );\n\n\t// remove support for Language - Not supported for now\n\tunregisterFormatType( 'core/language' );\n}\n\ntype Props = {\n\tcontentRef: React.RefObject< HTMLElement >;\n};\n\n/**\n * A button to the rich text editor to open modal with registered personalization tags.\n *\n * @param root0\n * @param root0.contentRef\n */\nfunction PersonalizationTagsButton( { contentRef }: Props ) {\n\tconst [ isModalOpened, setIsModalOpened ] = useState( false );\n\tconst selectedBlockId = useSelect( ( select ) =>\n\t\tselect( 'core/block-editor' ).getSelectedBlockClientId()\n\t);\n\n\tconst { updateBlockAttributes } = useDispatch( 'core/block-editor' );\n\n\t// Get the current block content\n\tconst blockContent: string = useSelect( ( select ) => {\n\t\tconst attributes =\n\t\t\t// @ts-expect-error getBlockAttributes expects one argument, but TS thinks it expects none\n\t\t\tselect( 'core/block-editor' ).getBlockAttributes( selectedBlockId );\n\t\treturn attributes?.content?.originalHTML || attributes?.content || ''; // After first saving the content does not have property originalHTML, so we need to check for content as well\n\t} );\n\n\tconst handleInsert = useCallback(\n\t\t( tag: string, linkText: string | null ) => {\n\t\t\tlet { start, end } = getCursorPosition( contentRef, blockContent );\n\n\t\t\tlet updatedContent = '';\n\t\t\t// When we pass linkText, we want to insert the tag as a link\n\t\t\tif ( linkText ) {\n\t\t\t\tlet richTextValue = create( { html: blockContent } );\n\n\t\t\t\t// Insert the new text into the current selection or at the cursor\n\t\t\t\trichTextValue = insert( richTextValue, linkText, start, end );\n\n\t\t\t\tend = start + linkText.length;\n\t\t\t\t// The link is inserted via registered format type to avoid breaking the content\n\t\t\t\trichTextValue = applyFormat(\n\t\t\t\t\trichTextValue,\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'mailpoet-email-editor/link-shortcode',\n\t\t\t\t\t\t// @ts-expect-error attributes property is missing in build type for WPFormat type\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t'data-link-href': tag,\n\t\t\t\t\t\t\tcontenteditable: 'false',\n\t\t\t\t\t\t\tstyle: 'text-decoration: underline;',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tstart,\n\t\t\t\t\tend\n\t\t\t\t);\n\t\t\t\tupdatedContent = toHTMLString( { value: richTextValue } );\n\t\t\t} else {\n\t\t\t\tlet richTextValue = create( { html: blockContent } );\n\t\t\t\trichTextValue = insert(\n\t\t\t\t\trichTextValue,\n\t\t\t\t\tcreate( { html: `<!--${ tag }-->&nbsp;` } ), // Add a non-breaking space to avoid an issue when WP renderer removes blog containing only a comment\n\t\t\t\t\tstart,\n\t\t\t\t\tend\n\t\t\t\t);\n\t\t\t\tupdatedContent = toHTMLString( { value: richTextValue } );\n\t\t\t}\n\n\t\t\tupdateBlockAttributes( selectedBlockId, {\n\t\t\t\tcontent: updatedContent,\n\t\t\t} );\n\t\t},\n\t\t[ blockContent, contentRef, selectedBlockId, updateBlockAttributes ]\n\t);\n\n\treturn (\n\t\t<BlockControls>\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon=\"shortcode\"\n\t\t\t\t\ttitle={ __( 'Personalization Tags', 'mailpoet' ) }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tsetIsModalOpened( true );\n\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t'block_controls_personalization_tags_button_clicked'\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<PersonalizationTagsPopover\n\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t\tonUpdate={ ( originalTag, updatedTag ) => {\n\t\t\t\t\t\t// When we update the tag, we need to add brackets to the tag, because the popover removes them\n\t\t\t\t\t\tconst updatedContent = blockContent.replace(\n\t\t\t\t\t\t\t`<!--[${ originalTag }]-->`,\n\t\t\t\t\t\t\t`<!--[${ updatedTag }]-->`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tupdateBlockAttributes( selectedBlockId, {\n\t\t\t\t\t\t\tcontent: updatedContent,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<PersonalizationTagsLinkPopover\n\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t\tonUpdate={ ( htmlElement, newTag, newText ) => {\n\t\t\t\t\t\tconst oldTag = htmlElement\n\t\t\t\t\t\t\t.getAttribute( 'data-link-href' )\n\t\t\t\t\t\t\t.replace( /[.*+?^${}()|[\\]\\\\]/g, '\\\\$&' );\n\t\t\t\t\t\tconst regex = new RegExp(\n\t\t\t\t\t\t\t`<a([^>]*?)data-link-href=\"${ oldTag }\"([^>]*?)>${ htmlElement.textContent }</a>`,\n\t\t\t\t\t\t\t'gi'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Replace the matched link with the new link\n\t\t\t\t\t\tconst updatedContent = blockContent.replace(\n\t\t\t\t\t\t\tregex,\n\t\t\t\t\t\t\t( _, beforeAttrs, afterAttrs ) => {\n\t\t\t\t\t\t\t\t// Construct the new <a> tag\n\t\t\t\t\t\t\t\treturn `<a${ beforeAttrs }data-link-href=\"${ newTag }\"${ afterAttrs }>${ newText }</a>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tupdateBlockAttributes( selectedBlockId, {\n\t\t\t\t\t\t\tcontent: updatedContent,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<PersonalizationTagsModal\n\t\t\t\t\tisOpened={ isModalOpened }\n\t\t\t\t\tonInsert={ ( value, linkText ) => {\n\t\t\t\t\t\thandleInsert( value, linkText );\n\t\t\t\t\t\tsetIsModalOpened( false );\n\t\t\t\t\t} }\n\t\t\t\t\tcloseCallback={ () => setIsModalOpened( false ) }\n\t\t\t\t\tcanInsertLink\n\t\t\t\t\topenedBy=\"block-controls\"\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t</BlockControls>\n\t);\n}\n\n/**\n * Extend the rich text formats with a button for personalization tags.\n */\nfunction extendRichTextFormats() {\n\tregisterFormatType( 'mailpoet-email-editor/shortcode', {\n\t\tname: 'mailpoet-email-editor/shortcode',\n\t\ttitle: __( 'Personalization Tags', 'mailpoet' ),\n\t\tclassName: 'mailpoet-email-editor-personalization-tags',\n\t\ttagName: 'span',\n\t\t// @ts-expect-error attributes property is missing in build type for WPFormat type\n\t\tattributes: {},\n\t\tedit: PersonalizationTagsButton,\n\t} );\n\n\t// Register format type for using personalization tags as link attributes\n\tregisterFormatType( 'mailpoet-email-editor/link-shortcode', {\n\t\tname: 'mailpoet-email-editor/link-shortcode',\n\t\ttitle: __( 'Personalization Tags Link', 'mailpoet' ),\n\t\tclassName: 'mailpoet-email-editor__personalization-tags-link',\n\t\ttagName: 'a',\n\t\t// @ts-expect-error attributes property is missing in build type for WPFormat type\n\t\tattributes: {\n\t\t\t'data-link-href': 'data-link-href',\n\t\t\tcontenteditable: 'contenteditable',\n\t\t\tstyle: 'style',\n\t\t},\n\t\tedit: null,\n\t} );\n}\n\nconst personalizationTagsLiveContentUpdate = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tconst { attributes, setAttributes, name } = props;\n\t\tconst { content } = attributes;\n\n\t\t// Fetch the personalization tags list\n\t\tconst list = useSelect(\n\t\t\t( select ) => select( storeName ).getPersonalizationTagsList(),\n\t\t\t[]\n\t\t);\n\n\t\t// Memoized function to replace content tags\n\t\tconst updateContent = useCallback( () => {\n\t\t\tif ( ! content ) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn replacePersonalizationTagsWithHTMLComments( content, list );\n\t\t}, [ content, list ] );\n\n\t\t// Handle content updates\n\t\tconst handleSetAttributes = useCallback(\n\t\t\t( newAttributes ) => {\n\t\t\t\tif ( newAttributes.content !== undefined ) {\n\t\t\t\t\tconst replacedContent =\n\t\t\t\t\t\treplacePersonalizationTagsWithHTMLComments(\n\t\t\t\t\t\t\tnewAttributes.content,\n\t\t\t\t\t\t\tlist\n\t\t\t\t\t\t);\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t...newAttributes,\n\t\t\t\t\t\tcontent: replacedContent,\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tsetAttributes( newAttributes );\n\t\t\t\t}\n\t\t\t},\n\t\t\t[ list, setAttributes ]\n\t\t);\n\n\t\t// Only process supported blocks\n\t\tif (\n\t\t\tname === 'core/paragraph' ||\n\t\t\tname === 'core/heading' ||\n\t\t\tname === 'core/list-item'\n\t\t) {\n\t\t\treturn (\n\t\t\t\t<BlockEdit\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tattributes={ {\n\t\t\t\t\t\t...attributes,\n\t\t\t\t\t\tcontent: updateContent(),\n\t\t\t\t\t} }\n\t\t\t\t\tsetAttributes={ handleSetAttributes }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\t// Return default for unsupported blocks\n\t\treturn <BlockEdit { ...props } />;\n\t},\n\t'personalizationTagsLiveContentUpdate'\n);\n\n/**\n * Replace written personalization tags with HTML comments in real-time.\n */\nfunction activatePersonalizationTagsReplacing() {\n\taddFilter(\n\t\t'editor.BlockEdit',\n\t\t'mailpoet-email-editor/with-live-content-update',\n\t\tpersonalizationTagsLiveContentUpdate\n\t);\n}\n\nexport {\n\tdisableCertainRichTextFormats,\n\textendRichTextFormats,\n\tactivatePersonalizationTagsReplacing,\n};\n","/**\n * External dependencies\n */\nimport { registerCoreBlocks } from '@wordpress/block-library';\n\n/**\n * Internal dependencies\n */\nimport { enhanceColumnBlock } from './core/column';\nimport {\n\tdisableColumnsLayout,\n\tdeactivateStackOnMobile,\n\tenhanceColumnsBlock,\n} from './core/columns';\nimport { enhancePostContentBlock } from './core/post-content';\nimport { disableGroupVariations } from './core/group';\nimport { disableImageFilter, hideExpandOnClick } from './core/image';\nimport {\n\tdisableCertainRichTextFormats,\n\textendRichTextFormats,\n\tactivatePersonalizationTagsReplacing,\n} from './core/rich-text';\nimport { enhanceButtonBlock } from './core/button';\nimport { enhanceButtonsBlock } from './core/buttons';\nimport { alterSupportConfiguration } from './core/general-block-support';\n\nexport function initBlocks() {\n\tdeactivateStackOnMobile();\n\thideExpandOnClick();\n\tdisableImageFilter();\n\tdisableCertainRichTextFormats();\n\tdisableColumnsLayout();\n\tdisableGroupVariations();\n\tenhanceButtonBlock();\n\tenhanceButtonsBlock();\n\tenhanceColumnBlock();\n\tenhanceColumnsBlock();\n\tenhancePostContentBlock();\n\textendRichTextFormats();\n\tactivatePersonalizationTagsReplacing();\n\talterSupportConfiguration();\n\tregisterCoreBlocks();\n}\n","/**\n * External dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { recordEvent } from '../../events';\n\n/**\n * This component is simplified version of the original one from @wordpress/editor package.\n * The original component can be found here: https://github.com/WordPress/gutenberg/blob/46446b853d740c309c0675c7bf2ca4170a618c42/packages/editor/src/components/autosave-monitor/index.js\n * The main reason for the own solution is that the original component needs to initialize the @wordpress/editor store.\n * We could use the action `setEditedPost` from the editor package, but it is only in a newer version of the editor package.\n */\nexport function AutosaveMonitor() {\n\tconst { hasEdits, autosaveInterval } = useSelect(\n\t\t( select ) => ( {\n\t\t\thasEdits: select( storeName ).hasEdits(),\n\t\t\tautosaveInterval: select( storeName ).getAutosaveInterval(),\n\t\t} ),\n\t\t[]\n\t);\n\n\tconst { saveEditedEmail } = useDispatch( storeName );\n\n\tuseEffect( () => {\n\t\tlet autosaveTimer: NodeJS.Timeout | undefined;\n\n\t\tif ( hasEdits && autosaveInterval > 0 ) {\n\t\t\tautosaveTimer = setTimeout( () => {\n\t\t\t\tvoid saveEditedEmail();\n\t\t\t\trecordEvent( 'editor_content_auto_saved' );\n\t\t\t}, autosaveInterval * 1000 );\n\t\t}\n\n\t\treturn () => {\n\t\t\tif ( autosaveTimer ) {\n\t\t\t\tclearTimeout( autosaveTimer );\n\t\t\t}\n\t\t};\n\t}, [ hasEdits, autosaveInterval, saveEditedEmail ] );\n\n\treturn null;\n}\n","/**\n * External dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tErrorBoundary,\n\tPostLockedModal,\n\tEditorProvider,\n} from '@wordpress/editor';\nimport { useMemo } from '@wordpress/element';\nimport { SlotFillProvider, Spinner } from '@wordpress/components';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { Post } from '@wordpress/core-data/build-types/entity-types/post';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { Layout } from './layout';\nimport { useNavigateToEntityRecord } from '../../hooks/use-navigate-to-entity-record';\nimport { unlockPatternsRelatedSelectorsFromCoreStore } from '../../private-apis';\n\nexport function InnerEditor( {\n\tpostId: initialPostId,\n\tpostType: initialPostType,\n\tsettings,\n\tinitialEdits,\n\t...props\n} ) {\n\tconst {\n\t\tcurrentPost,\n\t\tonNavigateToEntityRecord,\n\t\tonNavigateToPreviousEntityRecord,\n\t} = useNavigateToEntityRecord(\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\t\tinitialPostId,\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\t\tinitialPostType,\n\t\t'post-only'\n\t);\n\n\tconst { post, template } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEntityRecord } = select( coreStore );\n\t\t\tconst { getEditedPostTemplate } = select( storeName );\n\t\t\tconst postObject = getEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\t\t\t\tcurrentPost.postType,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\t\t\t\tcurrentPost.postId\n\t\t\t);\n\t\t\treturn {\n\t\t\t\ttemplate:\n\t\t\t\t\tcurrentPost.postType !== 'wp_template'\n\t\t\t\t\t\t? getEditedPostTemplate()\n\t\t\t\t\t\t: null,\n\t\t\t\tpost: postObject,\n\t\t\t};\n\t\t},\n\t\t[ currentPost.postType, currentPost.postId ]\n\t);\n\n\t/*\n\t * We need to fetch patterns ourselves. Automatic fetching of patterns is currently a private functionality\n\t * that is not available in EditorProvider but only in the ExperimentalBlockEditorProvider which\n\t * is not exported in the public components nor private components.\n\t */\n\tconst blockPatterns = useSelect(\n\t\t( select ) => {\n\t\t\tconst { hasFinishedResolution, getBlockPatternsForPostType } =\n\t\t\t\tunlockPatternsRelatedSelectorsFromCoreStore( select );\n\t\t\tconst patterns = getBlockPatternsForPostType(\n\t\t\t\tcurrentPost.postType\n\t\t\t) as Post[];\n\t\t\treturn hasFinishedResolution( 'getBlockPatterns' )\n\t\t\t\t? patterns\n\t\t\t\t: undefined;\n\t\t},\n\t\t[ currentPost.postType ]\n\t);\n\n\tconst editorSettings = useMemo(\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\t\t() => ( {\n\t\t\t...settings,\n\t\t\tonNavigateToEntityRecord,\n\t\t\tonNavigateToPreviousEntityRecord,\n\t\t\tdefaultRenderingMode: 'template-locked',\n\t\t\tsupportsTemplateMode: true,\n\t\t\t__experimentalBlockPatterns: blockPatterns, // eslint-disable-line\n\t\t} ),\n\t\t[\n\t\t\tsettings,\n\t\t\tonNavigateToEntityRecord,\n\t\t\tonNavigateToPreviousEntityRecord,\n\t\t\tblockPatterns,\n\t\t]\n\t);\n\n\tif ( ! post || ( currentPost.postType !== 'wp_template' && ! template ) ) {\n\t\treturn (\n\t\t\t<div className=\"spinner-container\">\n\t\t\t\t<Spinner style={ { width: '80px', height: '80px' } } />\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<SlotFillProvider>\n\t\t\t<EditorProvider\n\t\t\t\tsettings={ editorSettings }\n\t\t\t\tpost={ post }\n\t\t\t\tinitialEdits={ initialEdits }\n\t\t\t\tuseSubRegistry={ false }\n\t\t\t\t// @ts-expect-error __unstableTemplate is not in the EditorProvider props in the installed version of packages\n\t\t\t\t__unstableTemplate={ template }\n\t\t\t\t{ ...props }\n\t\t\t>\n\t\t\t\t{ /* @ts-expect-error ErrorBoundary type is incorrect there is no onError */ }\n\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t<Layout />\n\t\t\t\t\t<PostLockedModal />\n\t\t\t\t</ErrorBoundary>\n\t\t\t</EditorProvider>\n\t\t</SlotFillProvider>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { BlockSelectionClearer } from '@wordpress/block-editor';\nimport { store as editorStore, UnsavedChangesWarning } from '@wordpress/editor';\nimport { uploadMedia } from '@wordpress/media-utils';\nimport classnames from 'classnames';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tComplementaryArea,\n\tFullscreenMode,\n\tInterfaceSkeleton,\n} from '@wordpress/interface';\nimport { useRef } from '@wordpress/element';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport './index.scss';\nimport { storeName } from '../../store';\nimport { useEmailCss } from '../../hooks';\nimport { AutosaveMonitor } from '../autosave';\nimport { BlockCompatibilityWarnings, Sidebar } from '../sidebar';\nimport { Header } from '../header';\nimport { ListviewSidebar } from '../listview-sidebar/listview-sidebar';\nimport { InserterSidebar } from '../inserter-sidebar/inserter-sidebar';\nimport { EditorNotices, SentEmailNotice } from '../notices';\nimport { StylesSidebar } from '../styles-sidebar';\nimport { VisualEditor } from './visual-editor/visual-editor';\n\nimport { TemplateSelection } from '../template-select';\n\nimport { recordEventOnce } from '../../events';\n\nexport function Layout() {\n\trecordEventOnce( 'editor_layout_loaded' );\n\n\tconst {\n\t\tisFullscreenActive,\n\t\tisSidebarOpened,\n\t\tinitialSettings,\n\t\tpreviewDeviceType,\n\t\tisInserterSidebarOpened,\n\t\tisListviewSidebarOpened,\n\t\tcanUserEditMedia,\n\t\thasFixedToolbar,\n\t\tfocusMode,\n\t\tstyles,\n\t} = useSelect(\n\t\t( select ) => ( {\n\t\t\tisFullscreenActive:\n\t\t\t\tselect( storeName ).isFeatureActive( 'fullscreenMode' ),\n\t\t\tisSidebarOpened: select( storeName ).isSidebarOpened(),\n\t\t\t// @ts-expect-error isInserterOpened is missing in types.\n\t\t\tisInserterSidebarOpened: select( editorStore ).isInserterOpened(),\n\t\t\t// @ts-expect-error isListViewOpened is missing in types.\n\t\t\tisListviewSidebarOpened: select( editorStore ).isListViewOpened(),\n\t\t\tinitialSettings: select( storeName ).getInitialEditorSettings(),\n\t\t\tpreviewDeviceType: select( storeName ).getDeviceType(),\n\t\t\tcanUserEditMedia: select( coreStore ).canUser( 'create', 'media' ),\n\t\t\thasFixedToolbar:\n\t\t\t\tselect( storeName ).isFeatureActive( 'fixedToolbar' ),\n\t\t\tfocusMode: select( storeName ).isFeatureActive( 'focusMode' ),\n\t\t\tstyles: select( storeName ).getStyles(),\n\t\t} ),\n\t\t[]\n\t);\n\n\t// @ts-expect-error isInserterOpened is missing in types.\n\tconst { setIsInserterOpened } = useDispatch( editorStore );\n\n\tconst [ emailCss ] = useEmailCss();\n\tconst className = classnames( 'edit-post-layout', {\n\t\t'is-sidebar-opened': isSidebarOpened,\n\t} );\n\n\tconst contentRef = useRef( null );\n\n\t// Styles for the canvas. Based on template-canvas.php, this equates to the body element.\n\tconst canvasStyles = {\n\t\tbackground:\n\t\t\tpreviewDeviceType === 'Desktop'\n\t\t\t\t? styles.color.background\n\t\t\t\t: 'transparent',\n\t\tfontFamily: styles.typography.fontFamily,\n\t\ttransition: 'all 0.3s ease 0s',\n\t};\n\n\tconst settings = {\n\t\t...initialSettings,\n\t\tmediaUpload: canUserEditMedia ? uploadMedia : null,\n\t\thasFixedToolbar,\n\t\tfocusMode,\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<FullscreenMode isActive={ isFullscreenActive } />\n\t\t\t<UnsavedChangesWarning />\n\t\t\t<AutosaveMonitor />\n\t\t\t<SentEmailNotice />\n\t\t\t<Sidebar />\n\t\t\t<StylesSidebar />\n\t\t\t<TemplateSelection />\n\t\t\t<InterfaceSkeleton\n\t\t\t\tclassName={ className }\n\t\t\t\theader={ <Header /> }\n\t\t\t\teditorNotices={ <EditorNotices /> }\n\t\t\t\tcontent={\n\t\t\t\t\t<>\n\t\t\t\t\t\t<EditorNotices />\n\t\t\t\t\t\t<BlockSelectionClearer\n\t\t\t\t\t\t\tclassName=\"edit-post-visual-editor\"\n\t\t\t\t\t\t\tstyle={ canvasStyles }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t// Clear inserter sidebar when canvas is clicked.\n\t\t\t\t\t\t\t\tif ( isInserterSidebarOpened ) {\n\t\t\t\t\t\t\t\t\tvoid setIsInserterOpened( false );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"visual-editor__email_content_wrapper\">\n\t\t\t\t\t\t\t\t<VisualEditor\n\t\t\t\t\t\t\t\t\tdisableIframe={ false }\n\t\t\t\t\t\t\t\t\tstyles={ [\n\t\t\t\t\t\t\t\t\t\t...settings.styles,\n\t\t\t\t\t\t\t\t\t\t...emailCss,\n\t\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\t\tclassName=\"has-global-padding\"\n\t\t\t\t\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t\t\t\t\t\tiframeProps={ {} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</BlockSelectionClearer>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t\tsidebar={ <ComplementaryArea.Slot scope={ storeName } /> }\n\t\t\t\tsecondarySidebar={\n\t\t\t\t\t( isInserterSidebarOpened && <InserterSidebar /> ) ||\n\t\t\t\t\t( isListviewSidebarOpened && <ListviewSidebar /> )\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{ /* Rendering Warning component here ensures that the warning is displayed under the border configuration. */ }\n\t\t\t<BlockCompatibilityWarnings />\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useEffect, useState } from '@wordpress/element';\nimport { store as editorStore } from '@wordpress/editor';\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalConfirmDialog as ConfirmDialog } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { recordEvent, recordEventOnce } from '../../../events'; // eslint-disable-line\n\n/**\n * Component that:\n *\n * - Displays a 'Edit your template to edit this block' dialog when the user\n *   is focusing on editing email content and double clicks on a disabled\n *   template block.\n *\n *   @see https://github.com/WordPress/gutenberg/blob/c754c783a9004db678fcfebd9a21a22820f2115c/packages/editor/src/components/visual-editor/edit-template-blocks-notification.js\n *\n * @param {Object}                                 props\n * @param {import('react').RefObject<HTMLElement>} props.contentRef Ref to the block\n *                                                                  editor iframe canvas.\n */\nexport default function EditTemplateBlocksNotification( { contentRef } ) {\n\tconst { onNavigateToEntityRecord, templateId } = useSelect( ( select ) => {\n\t\t// @ts-expect-error getCurrentTemplateId is missing in types.\n\t\tconst { getEditorSettings, getCurrentTemplateId } =\n\t\t\tselect( editorStore );\n\n\t\treturn {\n\t\t\t// onNavigateToEntityRecord is missing in EditorSettings.\n\t\t\t// prettier-ignore\n\t\t\tonNavigateToEntityRecord: // @ts-expect-error onNavigateToEntityRecord is not typed on EditorSettings.\n\t\t\t\tgetEditorSettings().onNavigateToEntityRecord,\n\t\t\ttemplateId: getCurrentTemplateId(),\n\t\t};\n\t}, [] );\n\n\tconst [ isDialogOpen, setIsDialogOpen ] = useState( false );\n\n\tuseEffect( () => {\n\t\tconst handleDblClick = ( event ) => {\n\t\t\tif ( ! event.target.classList.contains( 'is-root-container' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetIsDialogOpen( true );\n\t\t\trecordEventOnce( 'edit_template_blocks_notification_opened' );\n\t\t};\n\n\t\tconst canvas = contentRef.current;\n\t\tcanvas?.addEventListener( 'dblclick', handleDblClick );\n\t\treturn () => {\n\t\t\tcanvas?.removeEventListener( 'dblclick', handleDblClick );\n\t\t};\n\t}, [ contentRef ] );\n\n\treturn (\n\t\t<ConfirmDialog\n\t\t\tisOpen={ isDialogOpen }\n\t\t\tconfirmButtonText={ __( 'Edit template', 'mailpoet' ) }\n\t\t\tonConfirm={ () => {\n\t\t\t\tsetIsDialogOpen( false );\n\t\t\t\tonNavigateToEntityRecord( {\n\t\t\t\t\tpostId: templateId,\n\t\t\t\t\tpostType: 'wp_template',\n\t\t\t\t} );\n\t\t\t\trecordEvent(\n\t\t\t\t\t'edit_template_blocks_notification_edit_template_button_clicked',\n\t\t\t\t\t{ templateId }\n\t\t\t\t);\n\t\t\t} }\n\t\t\tonCancel={ () => {\n\t\t\t\tsetIsDialogOpen( false );\n\t\t\t\trecordEvent(\n\t\t\t\t\t'edit_template_blocks_notification_cancel_button_clicked',\n\t\t\t\t\t{ templateId }\n\t\t\t\t);\n\t\t\t} }\n\t\t\tsize=\"medium\"\n\t\t>\n\t\t\t{ __(\n\t\t\t\t'The block youve selected is part of a template that might be used in other emails. Are you sure you want to edit the template?',\n\t\t\t\t'mailpoet'\n\t\t\t) }\n\t\t</ConfirmDialog>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { unlockGetEnabledClientIdsTree } from '../../../private-apis';\n\nconst DISTANCE_THRESHOLD = 500;\n\nfunction clamp( value: number, min: number, max: number ) {\n\treturn Math.min( Math.max( value, min ), max );\n}\n\nfunction distanceFromRect( x: number, y: number, rect ) {\n\tconst dx = x - clamp( x, Number( rect.left ), Number( rect.right ) );\n\tconst dy = y - clamp( y, Number( rect.top ), Number( rect.bottom ) );\n\treturn Math.sqrt( dx * dx + dy * dy );\n}\n\nexport default function useSelectNearestEditableBlock( {\n\tisEnabled = true,\n} = {} ) {\n\tconst getEnabledClientIdsTree = unlockGetEnabledClientIdsTree(\n\t\tuseSelect( blockEditorStore )\n\t);\n\tconst { getBlockName, getBlockOrder } = useSelect( blockEditorStore );\n\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( element: Element ) => {\n\t\t\tif ( ! isEnabled ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst selectNearestEditableBlock = ( x, y ) => {\n\t\t\t\tconst editableBlockClientIds =\n\t\t\t\t\tgetEnabledClientIdsTree().flatMap( ( { clientId } ) => {\n\t\t\t\t\t\t// @ts-expect-error getBlockName is not typed\n\t\t\t\t\t\tconst blockName = getBlockName( clientId );\n\t\t\t\t\t\tif ( blockName === 'core/template-part' ) {\n\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( blockName === 'core/post-content' ) {\n\t\t\t\t\t\t\t// @ts-expect-error getBlockOrder is not typed\n\t\t\t\t\t\t\tconst innerBlocks = getBlockOrder( clientId );\n\t\t\t\t\t\t\tif ( innerBlocks.length ) {\n\t\t\t\t\t\t\t\treturn innerBlocks as string[];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [ clientId as string ];\n\t\t\t\t\t} );\n\n\t\t\t\t// Extract the nearest client ID\n\t\t\t\tconst nearestClientIdData = editableBlockClientIds.reduce(\n\t\t\t\t\t(\n\t\t\t\t\t\tacc: { clientId: string; distance: number },\n\t\t\t\t\t\tclientId: string\n\t\t\t\t\t) => {\n\t\t\t\t\t\tconst block = element.querySelector(\n\t\t\t\t\t\t\t`[data-block=\"${ clientId }\"]`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( ! block ) {\n\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst rect = block.getBoundingClientRect();\n\t\t\t\t\t\tconst distance = distanceFromRect(\n\t\t\t\t\t\t\tNumber( x ),\n\t\t\t\t\t\t\tNumber( y ),\n\t\t\t\t\t\t\trect\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tdistance < acc.distance &&\n\t\t\t\t\t\t\tdistance < DISTANCE_THRESHOLD\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn { clientId, distance };\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t},\n\t\t\t\t\t{ clientId: null, distance: Number.POSITIVE_INFINITY }\n\t\t\t\t);\n\n\t\t\t\tconst nearestClientId = nearestClientIdData?.clientId || '';\n\t\t\t\tif ( nearestClientId ) {\n\t\t\t\t\tvoid selectBlock( nearestClientId as string );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst handleClick = ( event ) => {\n\t\t\t\tconst shouldSelect =\n\t\t\t\t\tevent.target === element ||\n\t\t\t\t\tevent.target.classList.contains( 'is-root-container' );\n\t\t\t\tif ( shouldSelect ) {\n\t\t\t\t\tselectNearestEditableBlock( event.clientX, event.clientY );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\telement.addEventListener( 'click', handleClick );\n\t\t\treturn () => element.removeEventListener( 'click', handleClick );\n\t\t},\n\t\t[ isEnabled ]\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { useRef } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { useMergeRefs } from '@wordpress/compose';\nimport { store as editorStore } from '@wordpress/editor';\nimport {\n\tBlockList,\n\t// @ts-expect-error No types for this exist yet.\n\t__unstableUseTypewriter as useTypewriter, // eslint-disable-line\n\t// @ts-expect-error No types for this exist yet.\n\tRecursionProvider,\n\t// @ts-expect-error No types for this exist yet.\n\t__experimentalUseResizeCanvas as useResizeCanvas, // eslint-disable-line\n} from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport EditTemplateBlocksNotification from './edit-template-blocks-notification';\nimport useSelectNearestEditableBlock from './use-select-nearest-editable-block';\nimport { BlockCanvas } from '../../../private-apis';\n\nexport const TEMPLATE_POST_TYPE = 'wp_template';\nexport const TEMPLATE_PART_POST_TYPE = 'wp_template_part';\nexport const PATTERN_POST_TYPE = 'wp_block';\nexport const NAVIGATION_POST_TYPE = 'wp_navigation';\n\n/**\n * These post types have a special editor where they don't allow you to fill the title\n * and they don't apply the layout styles.\n */\nconst DESIGN_POST_TYPES = [\n\tPATTERN_POST_TYPE,\n\tTEMPLATE_POST_TYPE,\n\tNAVIGATION_POST_TYPE,\n\tTEMPLATE_PART_POST_TYPE,\n];\n\n/**\n * Copied and simplified from https://github.com/WordPress/gutenberg/blob/c754c783a9004db678fcfebd9a21a22820f2115c/packages/editor/src/components/visual-editor/index.js\n * Simplifications:\n *  - doesn't support post-only mode for no design post types. We use the post-only mode only for templates\n *  - removed logic for layout styles. We currently pass them among all styles in styles property\n *  - removed support for post title\n *  - removed support for zooming\n *  - removed support for resizing\n * @param root0\n * @param root0.styles\n * @param root0.disableIframe\n * @param root0.iframeProps\n * @param root0.contentRef\n * @param root0.className\n *  @todo Need to fix layout so that we support Align settings properly\n */\nexport function VisualEditor( {\n\t// Ideally as we unify post and site editors, we won't need these props\n\tstyles,\n\tdisableIframe = false,\n\tiframeProps,\n\tcontentRef,\n\tclassName,\n} ) {\n\tconst {\n\t\trenderingMode,\n\t\twrapperBlockName,\n\t\twrapperUniqueId,\n\t\tdeviceType,\n\t\tisFocusedEntity,\n\t\tlayout,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetCurrentPostId,\n\t\t\tgetCurrentPostType,\n\t\t\tgetEditorSettings,\n\t\t\t// @ts-expect-error No types for this exist yet.\n\t\t\tgetRenderingMode,\n\t\t\t// @ts-expect-error No types for this exist yet.\n\t\t\tgetDeviceType,\n\t\t} = select( editorStore );\n\t\tconst postTypeSlug = getCurrentPostType();\n\t\tconst checkRenderingMode = getRenderingMode();\n\t\tlet checkWrapperBlockName;\n\n\t\tif ( postTypeSlug === PATTERN_POST_TYPE ) {\n\t\t\tcheckWrapperBlockName = 'core/block';\n\t\t} else if ( checkRenderingMode === 'post-only' ) {\n\t\t\tcheckWrapperBlockName = 'core/post-content';\n\t\t}\n\n\t\tconst editorSettings = getEditorSettings();\n\n\t\treturn {\n\t\t\trenderingMode: checkRenderingMode,\n\t\t\tisDesignPostType: DESIGN_POST_TYPES.includes( postTypeSlug ),\n\t\t\t// Post template fetch returns a 404 on classic themes, which\n\t\t\t// messes with e2e tests, so check it's a block theme first.\n\t\t\twrapperBlockName: checkWrapperBlockName,\n\t\t\twrapperUniqueId: getCurrentPostId(),\n\t\t\tdeviceType: getDeviceType() as string,\n\t\t\t// @ts-expect-error No types for this exist yet.\n\t\t\tisFocusedEntity: !! editorSettings.onNavigateToPreviousEntityRecord,\n\t\t\tpostType: postTypeSlug,\n\t\t\t// @ts-expect-error No types for this exist yet.\n\t\t\t// eslint-disable-next-line no-underscore-dangle\n\t\t\tisPreview: editorSettings.__unstableIsPreviewMode,\n\t\t\t// @ts-expect-error There are no types for the experimental features settings.\n\t\t\t// eslint-disable-next-line no-underscore-dangle\n\t\t\tlayout: editorSettings.__experimentalFeatures.layout,\n\t\t};\n\t}, [] );\n\n\tconst deviceStyles = useResizeCanvas( deviceType );\n\n\t// We want to use the same layout.\n\tconst blockListLayout = layout;\n\n\tconst localRef = useRef();\n\tconst typewriterRef = useTypewriter();\n\tconst newContentRef = useMergeRefs( [\n\t\tlocalRef,\n\t\tcontentRef,\n\t\trenderingMode === 'post-only' ? typewriterRef : null,\n\t\tuseSelectNearestEditableBlock( {\n\t\t\tisEnabled: renderingMode === 'template-locked',\n\t\t} ),\n\t] );\n\n\tconst shouldIframe =\n\t\t! disableIframe || [ 'Tablet', 'Mobile' ].includes( deviceType );\n\tconst containerWidth =\n\t\tdeviceType === 'Desktop' ? ( layout.contentSize as string ) : '100%';\n\n\tconst iframeStyles = [\n\t\t...( ( styles as string[] ) ?? [] ),\n\t\t{\n\t\t\tcss: `.is-root-container{display:flow-root; width:${ containerWidth }; margin: 0 auto;box-sizing: border-box;}`,\n\t\t},\n\t];\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ classnames(\n\t\t\t\t'editor-visual-editor',\n\t\t\t\t// this class is here for backward compatibility reasons.\n\t\t\t\t'edit-post-visual-editor',\n\t\t\t\tclassName as string,\n\t\t\t\t{\n\t\t\t\t\t'has-padding': isFocusedEntity,\n\t\t\t\t\t'is-iframed': shouldIframe,\n\t\t\t\t}\n\t\t\t) }\n\t\t>\n\t\t\t<BlockCanvas\n\t\t\t\tshouldIframe={ shouldIframe }\n\t\t\t\tcontentRef={ newContentRef }\n\t\t\t\tstyles={ iframeStyles }\n\t\t\t\theight=\"100%\"\n\t\t\t\tiframeProps={ {\n\t\t\t\t\t...iframeProps,\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t...iframeProps?.style,\n\t\t\t\t\t\t...deviceStyles,\n\t\t\t\t\t},\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<RecursionProvider\n\t\t\t\t\tblockName={ wrapperBlockName }\n\t\t\t\t\tuniqueId={ wrapperUniqueId }\n\t\t\t\t>\n\t\t\t\t\t<BlockList\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t`is-${ deviceType.toLowerCase() }-preview`,\n\t\t\t\t\t\t\t'has-global-padding' // Ensures that padding is applied at the top level\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t// @ts-expect-error No types for this exist yet.\n\t\t\t\t\t\tlayout={ blockListLayout }\n\t\t\t\t\t\tdropZoneElement={\n\t\t\t\t\t\t\t// When iframed, pass in the html element of the iframe to\n\t\t\t\t\t\t\t// ensure the drop zone extends to the edges of the iframe.\n\t\t\t\t\t\t\tdisableIframe\n\t\t\t\t\t\t\t\t? localRef.current // @ts-expect-error No types for this exist yet.\n\t\t\t\t\t\t\t\t: localRef.current?.parentNode\n\t\t\t\t\t\t}\n\t\t\t\t\t\t__unstableDisableDropZone={\n\t\t\t\t\t\t\t// In template preview mode, disable drop zones at the root of the template.\n\t\t\t\t\t\t\trenderingMode === 'template-locked'\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{ renderingMode === 'template-locked' && (\n\t\t\t\t\t\t<EditTemplateBlocksNotification\n\t\t\t\t\t\t\tcontentRef={ localRef }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</RecursionProvider>\n\t\t\t</BlockCanvas>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { chevronDown } from '@wordpress/icons';\nimport { useSelect } from '@wordpress/data';\nimport { useEntityProp } from '@wordpress/core-data';\nimport {\n\tButton,\n\tDropdown,\n\tVisuallyHidden,\n\t__experimentalText as Text,\n\tTextControl,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { storeName, editorCurrentPostType } from '../../store';\nimport { recordEvent, recordEventOnce } from '../../events';\n\n// @see https://github.com/WordPress/gutenberg/blob/5e0ffdbc36cb2e967dfa6a6b812a10a2e56a598f/packages/edit-post/src/components/header/document-actions/index.js\n\nexport function CampaignName() {\n\tconst { showIconLabels } = useSelect(\n\t\t( select ) => ( {\n\t\t\tshowIconLabels:\n\t\t\t\tselect( storeName ).isFeatureActive( 'showIconLabels' ),\n\t\t\tpostId: select( storeName ).getEmailPostId(),\n\t\t} ),\n\t\t[]\n\t);\n\n\tconst [ emailTitle = '', setTitle ] = useEntityProp(\n\t\t'postType',\n\t\teditorCurrentPostType,\n\t\t'title'\n\t);\n\n\tconst titleRef = useRef( null );\n\treturn (\n\t\t<div ref={ titleRef } className=\"mailpoet-email-editor-campaign-name\">\n\t\t\t<Dropdown\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tplacement: 'bottom',\n\t\t\t\t\tanchor: titleRef.current,\n\t\t\t\t} }\n\t\t\t\tcontentClassName=\"mailpoet-email-editor-campaign-name__dropdown\"\n\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tonToggle();\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'header_campaign_name_email_title_clicked',\n\t\t\t\t\t\t\t\t\t{ isOpen }\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tclassName=\"mailpoet-email-campaign-name__link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Text size=\"body\" as=\"h1\">\n\t\t\t\t\t\t\t\t<VisuallyHidden as=\"span\">\n\t\t\t\t\t\t\t\t\t{ __( 'Editing email:', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t\t\t{ emailTitle }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"mailpoet-email-campaign-name__toggle\"\n\t\t\t\t\t\t\ticon={ chevronDown }\n\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tonToggle();\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'header_campaign_name_toggle_icon_clicked',\n\t\t\t\t\t\t\t\t\t{ isOpen }\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Change campaign name', 'mailpoet' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ showIconLabels && __( 'Rename', 'mailpoet' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\trenderContent={ () => (\n\t\t\t\t\t<div className=\"mailpoet-email-editor-email-title-edit\">\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __( 'Campaign name', 'mailpoet' ) }\n\t\t\t\t\t\t\tvalue={ emailTitle }\n\t\t\t\t\t\t\tonChange={ ( newTitle ) => {\n\t\t\t\t\t\t\t\tsetTitle( newTitle );\n\t\t\t\t\t\t\t\trecordEventOnce(\n\t\t\t\t\t\t\t\t\t'header_campaign_name_title_updated'\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tname=\"campaign_name\"\n\t\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t\t`Name your email campaign to indicate its purpose. This would only be visible to you and not shown to your subscribers.`,\n\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { useRef, useState } from '@wordpress/element';\nimport { PinnedItems } from '@wordpress/interface';\nimport { Button, ToolbarItem as WpToolbarItem } from '@wordpress/components';\nimport {\n\tNavigableToolbar,\n\tBlockToolbar as WPBlockToolbar,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as coreDataStore } from '@wordpress/core-data';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { __ } from '@wordpress/i18n';\nimport { plus, listView, undo, redo, next, previous } from '@wordpress/icons';\nimport {\n\t// @ts-expect-error DocumentBar types are not available\n\tDocumentBar,\n\tstore as editorStore,\n\t// @ts-expect-error useEntitiesSavedStatesIsDirty types are not available\n\tuseEntitiesSavedStatesIsDirty,\n} from '@wordpress/editor';\n\n/**\n * Internal dependencies\n */\n\nimport { storeName, editorCurrentPostType } from '../../store';\nimport { MoreMenu } from './more-menu';\nimport { PreviewDropdown } from '../preview';\nimport { SaveEmailButton } from './save-email-button';\nimport { CampaignName } from './campaign-name';\nimport { SendButton } from './send-button';\nimport { SaveAllButton } from './save-all-button';\nimport { useContentValidation, useEditorMode } from '../../hooks';\nimport { recordEvent } from '../../events';\n\n// Build type for ToolbarItem contains only \"as\" and \"children\" properties but it takes all props from\n// component passed to \"as\" property (in this case Button). So as fix for TS errors we need to pass all props from Button to ToolbarItem.\n// We should be able to remove this fix when ToolbarItem will be fixed in Gutenberg.\nconst ToolbarItem = WpToolbarItem as React.ForwardRefExoticComponent<\n\tReact.ComponentProps< typeof WpToolbarItem > &\n\t\tReact.ComponentProps< typeof Button >\n>;\n\n// Definition of BlockToolbar in currently installed Gutenberg packages (wp-6.4) is missing hideDragHandle prop\n// After updating to newer version of Gutenberg we should be able to remove this fix\nconst BlockToolbar = WPBlockToolbar as React.FC<\n\tReact.ComponentProps< typeof WPBlockToolbar > & {\n\t\thideDragHandle?: boolean;\n\t}\n>;\n\nexport function Header() {\n\tconst inserterButton = useRef();\n\tconst listviewButton = useRef();\n\tconst undoButton = useRef();\n\tconst redoButton = useRef();\n\n\tconst [ isBlockToolsCollapsed, setIsBlockToolsCollapsed ] =\n\t\tuseState( false );\n\n\tconst { undo: undoAction, redo: redoAction } = useDispatch( coreDataStore );\n\t// @ts-expect-error missing types.\n\tconst { setIsInserterOpened, setIsListViewOpened } =\n\t\tuseDispatch( editorStore );\n\tconst {\n\t\tisInserterSidebarOpened,\n\t\tisListviewSidebarOpened,\n\t\tisFixedToolbarActive,\n\t\tisBlockSelected,\n\t\thasUndo,\n\t\thasRedo,\n\t} = useSelect( ( select ) => {\n\t\treturn {\n\t\t\t// @ts-expect-error missing types.\n\t\t\tisInserterSidebarOpened: select( editorStore ).isInserterOpened(),\n\t\t\t// @ts-expect-error missing types.\n\t\t\tisListviewSidebarOpened: select( editorStore ).isListViewOpened(),\n\t\t\tisFixedToolbarActive: select( preferencesStore ).get(\n\t\t\t\t'core',\n\t\t\t\t'fixedToolbar'\n\t\t\t),\n\t\t\tisBlockSelected:\n\t\t\t\t!! select( blockEditorStore ).getBlockSelectionStart(),\n\t\t\thasUndo: select( coreDataStore ).hasUndo(),\n\t\t\thasRedo: select( coreDataStore ).hasRedo(),\n\t\t};\n\t}, [] );\n\n\tconst [ editorMode ] = useEditorMode();\n\tconst { validateContent, isInvalid } = useContentValidation();\n\n\tconst { dirtyEntityRecords } = useEntitiesSavedStatesIsDirty();\n\tconst hasNonEmailEdits = dirtyEntityRecords.some(\n\t\t( entity ) => entity.name !== editorCurrentPostType\n\t);\n\n\tconst preventDefault = ( event ) => {\n\t\tevent.preventDefault();\n\t};\n\n\tconst toggleTheInserterSidebar = () => {\n\t\tif ( isInserterSidebarOpened ) {\n\t\t\trecordEvent( 'header_inserter_sidebar_closed' );\n\t\t\treturn setIsInserterOpened( false );\n\t\t}\n\t\trecordEvent( 'header_inserter_sidebar_opened' );\n\t\treturn setIsInserterOpened( true );\n\t};\n\n\tconst toggleTheListviewSidebar = () => {\n\t\tif ( isListviewSidebarOpened ) {\n\t\t\trecordEvent( 'header_listview_sidebar_closed' );\n\t\t\treturn setIsListViewOpened( false );\n\t\t}\n\t\trecordEvent( 'header_listview_sidebar_opened' );\n\t\treturn setIsListViewOpened( true );\n\t};\n\n\tconst shortLabelInserter = ! isInserterSidebarOpened\n\t\t? __( 'Add', 'mailpoet' )\n\t\t: __( 'Close', 'mailpoet' );\n\n\treturn (\n\t\t<div className=\"editor-header edit-post-header\">\n\t\t\t<div className=\"editor-header__toolbar\">\n\t\t\t\t<NavigableToolbar\n\t\t\t\t\tclassName=\"editor-document-tools edit-post-header-toolbar is-unstyled\"\n\t\t\t\t\taria-label={ __( 'Email document tools', 'mailpoet' ) }\n\t\t\t\t>\n\t\t\t\t\t<div className=\"editor-document-tools__left\">\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tref={ inserterButton }\n\t\t\t\t\t\t\tas={ Button }\n\t\t\t\t\t\t\tclassName=\"editor-header-toolbar__inserter-toggle edit-post-header-toolbar__inserter-toggle\"\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\tisPressed={ isInserterSidebarOpened }\n\t\t\t\t\t\t\tonMouseDown={ preventDefault }\n\t\t\t\t\t\t\tonClick={ toggleTheInserterSidebar }\n\t\t\t\t\t\t\tdisabled={ false }\n\t\t\t\t\t\t\ticon={ plus }\n\t\t\t\t\t\t\tlabel={ shortLabelInserter }\n\t\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t\t\taria-expanded={ isInserterSidebarOpened }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tref={ undoButton }\n\t\t\t\t\t\t\tas={ Button }\n\t\t\t\t\t\t\tclassName=\"editor-history__undo\"\n\t\t\t\t\t\t\tisPressed={ false }\n\t\t\t\t\t\t\tonMouseDown={ preventDefault }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tvoid undoAction();\n\t\t\t\t\t\t\t\trecordEvent( 'header_undo_icon_clicked' );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tdisabled={ ! hasUndo }\n\t\t\t\t\t\t\ticon={ undo }\n\t\t\t\t\t\t\tlabel={ __( 'Undo', 'mailpoet' ) }\n\t\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tref={ redoButton }\n\t\t\t\t\t\t\tas={ Button }\n\t\t\t\t\t\t\tclassName=\"editor-history__redo\"\n\t\t\t\t\t\t\tisPressed={ false }\n\t\t\t\t\t\t\tonMouseDown={ preventDefault }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tvoid redoAction();\n\t\t\t\t\t\t\t\trecordEvent( 'header_redo_icon_clicked' );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tdisabled={ ! hasRedo }\n\t\t\t\t\t\t\ticon={ redo }\n\t\t\t\t\t\t\tlabel={ __( 'Redo', 'mailpoet' ) }\n\t\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tref={ listviewButton }\n\t\t\t\t\t\t\tas={ Button }\n\t\t\t\t\t\t\tclassName=\"editor-header-toolbar__document-overview-toggle edit-post-header-toolbar__document-overview-toggle\"\n\t\t\t\t\t\t\tisPressed={ isListviewSidebarOpened }\n\t\t\t\t\t\t\tonMouseDown={ preventDefault }\n\t\t\t\t\t\t\tonClick={ toggleTheListviewSidebar }\n\t\t\t\t\t\t\tdisabled={ false }\n\t\t\t\t\t\t\ticon={ listView }\n\t\t\t\t\t\t\tlabel={ __( 'List view', 'mailpoet' ) }\n\t\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t\t\taria-expanded={ isInserterSidebarOpened }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</NavigableToolbar>\n\t\t\t\t{ isFixedToolbarActive && isBlockSelected && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'editor-collapsible-block-toolbar',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'is-collapsed': isBlockToolsCollapsed,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockToolbar hideDragHandle />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"editor-header__block-tools-toggle edit-post-header__block-tools-toggle\"\n\t\t\t\t\t\t\ticon={ isBlockToolsCollapsed ? next : previous }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tsetIsBlockToolsCollapsed(\n\t\t\t\t\t\t\t\t\t( collapsed ) => ! collapsed\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'header_blocks_tool_button_clicked',\n\t\t\t\t\t\t\t\t\t{ isBlockToolsCollapsed }\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\tisBlockToolsCollapsed\n\t\t\t\t\t\t\t\t\t? __( 'Show block tools', 'mailpoet' )\n\t\t\t\t\t\t\t\t\t: __( 'Hide block tools', 'mailpoet' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t{ ( ! isFixedToolbarActive ||\n\t\t\t\t! isBlockSelected ||\n\t\t\t\tisBlockToolsCollapsed ) && (\n\t\t\t\t<div className=\"editor-header__center edit-post-header__center\">\n\t\t\t\t\t{ editorMode === 'template' ? (\n\t\t\t\t\t\t<DocumentBar />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<CampaignName />\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<div className=\"editor-header__settings edit-post-header__settings\">\n\t\t\t\t<SaveEmailButton />\n\t\t\t\t<PreviewDropdown />\n\t\t\t\t{ hasNonEmailEdits ? (\n\t\t\t\t\t<SaveAllButton />\n\t\t\t\t) : (\n\t\t\t\t\t<SendButton\n\t\t\t\t\t\tvalidateContent={ validateContent }\n\t\t\t\t\t\tisContentInvalid={ isInvalid }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<PinnedItems.Slot scope={ storeName } />\n\t\t\t\t<MoreMenu />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { MenuGroup, MenuItem, DropdownMenu } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { displayShortcut } from '@wordpress/keycodes';\nimport { moreVertical } from '@wordpress/icons';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { __, _x } from '@wordpress/i18n';\nimport { PreferenceToggleMenuItem } from '@wordpress/preferences';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { storeName, editorCurrentPostType } from '../../store';\nimport { TrashModal } from './trash-modal';\nimport { recordEvent } from '../../events';\n\n// See:\n//   https://github.com/WordPress/gutenberg/blob/9601a33e30ba41bac98579c8d822af63dd961488/packages/edit-post/src/components/header/more-menu/index.js\n//   https://github.com/WordPress/gutenberg/blob/0ee78b1bbe9c6f3e6df99f3b967132fa12bef77d/packages/edit-site/src/components/header/more-menu/index.js\n\nexport function MoreMenu(): JSX.Element {\n\tconst [ showTrashModal, setShowTrashModal ] = useState( false );\n\tconst { urls, postId } = useSelect(\n\t\t( select ) => ( {\n\t\t\turls: select( storeName ).getUrls(),\n\t\t\tpostId: select( storeName ).getEmailPostId(),\n\t\t} ),\n\t\t[]\n\t);\n\tconst [ status, setStatus ] = useEntityProp(\n\t\t'postType',\n\t\teditorCurrentPostType,\n\t\t'status'\n\t);\n\tconst { saveEditedEmail } = useDispatch( storeName );\n\tconst goToListings = () => {\n\t\twindow.location.href = urls.listings;\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<DropdownMenu\n\t\t\t\tclassName=\"edit-site-more-menu\"\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tclassName: 'edit-site-more-menu__content',\n\t\t\t\t} }\n\t\t\t\ticon={ moreVertical }\n\t\t\t\tlabel={ __( 'More', 'mailpoet' ) }\n\t\t\t\tonToggle={ ( isOpened ) =>\n\t\t\t\t\trecordEvent( 'header_more_menu_dropdown_toggle', {\n\t\t\t\t\t\tisOpened,\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<MenuGroup label={ _x( 'View', 'noun', 'mailpoet' ) }>\n\t\t\t\t\t\t\t<PreferenceToggleMenuItem\n\t\t\t\t\t\t\t\tscope=\"core\"\n\t\t\t\t\t\t\t\tname=\"fixedToolbar\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Top toolbar', 'mailpoet' ) }\n\t\t\t\t\t\t\t\tinfo={ __(\n\t\t\t\t\t\t\t\t\t'Access all block and document tools in a single place',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageActivated={ __(\n\t\t\t\t\t\t\t\t\t'Top toolbar activated',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageDeactivated={ __(\n\t\t\t\t\t\t\t\t\t'Top toolbar deactivated',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tonToggle={ () =>\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'header_more_menu_fixed_toolbar_toggle'\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<PreferenceToggleMenuItem\n\t\t\t\t\t\t\t\tscope=\"core\"\n\t\t\t\t\t\t\t\tname=\"focusMode\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Spotlight mode', 'mailpoet' ) }\n\t\t\t\t\t\t\t\tinfo={ __(\n\t\t\t\t\t\t\t\t\t'Focus at one block at a time',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageActivated={ __(\n\t\t\t\t\t\t\t\t\t'Spotlight mode activated',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageDeactivated={ __(\n\t\t\t\t\t\t\t\t\t'Spotlight mode deactivated',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tonToggle={ () =>\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'header_more_menu_focus_mode_toggle'\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<PreferenceToggleMenuItem\n\t\t\t\t\t\t\t\tscope={ storeName }\n\t\t\t\t\t\t\t\tname=\"fullscreenMode\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Fullscreen mode', 'mailpoet' ) }\n\t\t\t\t\t\t\t\tinfo={ __(\n\t\t\t\t\t\t\t\t\t'Work without distraction',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageActivated={ __(\n\t\t\t\t\t\t\t\t\t'Fullscreen mode activated',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageDeactivated={ __(\n\t\t\t\t\t\t\t\t\t'Fullscreen mode deactivated',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tshortcut={ displayShortcut.secondary( 'f' ) }\n\t\t\t\t\t\t\t\tonToggle={ () =>\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'header_more_menu_fullscreen_mode_toggle'\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t{ status === 'trash' ? (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tonClick={ async () => {\n\t\t\t\t\t\t\t\t\t\tawait setStatus( 'draft' );\n\t\t\t\t\t\t\t\t\t\tawait saveEditedEmail();\n\t\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t'header_more_menu_restore_from_trash_button_clicked'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Restore from trash', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\tsetShowTrashModal( true );\n\t\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t'header_more_menu_move_to_trash_button_clicked'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Move to trash', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</DropdownMenu>\n\t\t\t{ showTrashModal && (\n\t\t\t\t<TrashModal\n\t\t\t\t\tonClose={ () => setShowTrashModal( false ) }\n\t\t\t\t\tonRemove={ goToListings }\n\t\t\t\t\tpostId={ postId }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\nimport { Button, Dropdown } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport {\n\t// @ts-expect-error Our current version of packages doesn't have EntitiesSavedStates export\n\tEntitiesSavedStates,\n} from '@wordpress/editor';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { recordEvent } from '../../events';\n\nconst SaveAllContent = ( { onToggle } ) => {\n\t// Hacky way to change the text in the templates row of the save dropdown\n\tuseEffect( () => {\n\t\tconst panels = document.querySelectorAll(\n\t\t\t'.mailpoet-email-editor-save-button__dropdown  .components-panel__body'\n\t\t);\n\t\tpanels.forEach( ( panel ) => {\n\t\t\tconst titleButton = panel.querySelector(\n\t\t\t\t'.components-panel__body-title button'\n\t\t\t);\n\t\t\tif (\n\t\t\t\ttitleButton &&\n\t\t\t\ttitleButton.textContent.trim() === __( 'Templates', 'mailpoet' )\n\t\t\t) {\n\t\t\t\tconst rows = panel.querySelectorAll( '.components-panel__row' );\n\t\t\t\tif ( rows.length ) {\n\t\t\t\t\trows[ 0 ].textContent = __(\n\t\t\t\t\t\t'This change will affect emails that use this template.',\n\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}, [] );\n\treturn <EntitiesSavedStates close={ onToggle } />;\n};\n\nexport function SaveAllButton() {\n\tconst { isSaving } = useSelect(\n\t\t( select ) => ( {\n\t\t\tisSaving: select( storeName ).isSaving(),\n\t\t} ),\n\t\t[]\n\t);\n\n\tconst buttonRef = useRef( null );\n\n\tlet label = __( 'Save', 'mailpoet' );\n\tif ( isSaving ) {\n\t\tlabel = __( 'Saving', 'mailpoet' );\n\t}\n\n\treturn (\n\t\t<div ref={ buttonRef }>\n\t\t\t<Dropdown\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tplacement: 'bottom',\n\t\t\t\t\tanchor: buttonRef.current,\n\t\t\t\t} }\n\t\t\t\tcontentClassName=\"mailpoet-email-editor-save-button__dropdown\"\n\t\t\t\trenderToggle={ ( { onToggle } ) => (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t'header_save_all_button_save_button_clicked'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tonToggle();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tdisabled={ isSaving }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ label }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t\t<SaveAllContent onToggle={ onToggle } />\n\t\t\t\t) }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { check, cloud, Icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { recordEvent } from '../../events';\n\nexport function SaveEmailButton() {\n\tconst { saveEditedEmail } = useDispatch( storeName );\n\n\tconst { hasEdits, isEmpty, isSaving } = useSelect(\n\t\t( select ) => ( {\n\t\t\thasEdits: select( storeName ).hasEdits(),\n\t\t\tisEmpty: select( storeName ).isEmpty(),\n\t\t\tisSaving: select( storeName ).isSaving(),\n\t\t} ),\n\t\t[]\n\t);\n\n\tconst isSaved = ! isEmpty && ! isSaving && ! hasEdits;\n\tconst isDisabled = ! hasEdits && ( isEmpty || isSaving || isSaved );\n\n\tlet label = __( 'Save Draft', 'mailpoet' );\n\tif ( isSaved ) {\n\t\tlabel = __( 'Saved', 'mailpoet' );\n\t} else if ( isSaving ) {\n\t\tlabel = __( 'Saving', 'mailpoet' );\n\t}\n\n\treturn (\n\t\t<Button\n\t\t\tvariant=\"tertiary\"\n\t\t\tdisabled={ isDisabled }\n\t\t\tonClick={ () => {\n\t\t\t\tvoid saveEditedEmail();\n\t\t\t\trecordEvent( 'header_save_email_button_clicked', {\n\t\t\t\t\tlabel,\n\t\t\t\t\tisSaving,\n\t\t\t\t\tisSaved,\n\t\t\t\t} );\n\t\t\t} }\n\t\t>\n\t\t\t{ isSaving && <Icon icon={ cloud } /> }\n\t\t\t{ isSaved && <Icon icon={ check } /> }\n\t\t\t{ label }\n\t\t</Button>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { applyFilters } from '@wordpress/hooks';\nimport { useSelect } from '@wordpress/data';\nimport {\n\t// @ts-expect-error No types available for useEntitiesSavedStatesIsDirty\n\tuseEntitiesSavedStatesIsDirty,\n} from '@wordpress/editor';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { useEditorMode } from '../../hooks';\nimport { recordEvent } from '../../events';\n\nexport function SendButton( { validateContent, isContentInvalid } ) {\n\tconst { isDirty } = useEntitiesSavedStatesIsDirty();\n\n\tconst { hasEmptyContent, isEmailSent, urls } = useSelect(\n\t\t( select ) => ( {\n\t\t\thasEmptyContent: select( storeName ).hasEmptyContent(),\n\t\t\tisEmailSent: select( storeName ).isEmailSent(),\n\t\t\turls: select( storeName ).getUrls(),\n\t\t} ),\n\t\t[]\n\t);\n\n\tfunction sendAction() {\n\t\tif ( urls.send ) {\n\t\t\twindow.location.href = urls.send;\n\t\t}\n\t}\n\n\tconst [ editorMode ] = useEditorMode();\n\n\tconst isDisabled =\n\t\teditorMode === 'template' ||\n\t\thasEmptyContent ||\n\t\tisEmailSent ||\n\t\tisContentInvalid ||\n\t\tisDirty;\n\n\tconst label = applyFilters(\n\t\t'mailpoet_email_editor_send_button_label',\n\t\t__( 'Send', 'mailpoet' )\n\t) as string;\n\n\treturn (\n\t\t<Button\n\t\t\tvariant=\"primary\"\n\t\t\tonClick={ () => {\n\t\t\t\trecordEvent( 'header_send_button_clicked' );\n\t\t\t\tif ( validateContent() ) {\n\t\t\t\t\tconst action = applyFilters(\n\t\t\t\t\t\t'mailpoet_email_editor_send_action_callback',\n\t\t\t\t\t\tsendAction\n\t\t\t\t\t) as () => void;\n\t\t\t\t\taction();\n\t\t\t\t}\n\t\t\t} }\n\t\t\tdisabled={ isDisabled }\n\t\t\tdata-automation-id=\"email_editor_send_button\"\n\t\t>\n\t\t\t{ label }\n\t\t</Button>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, Modal } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { editorCurrentPostType } from '../../store';\nimport { recordEvent } from '../../events';\n\nexport function TrashModal( {\n\tonClose,\n\tonRemove,\n\tpostId,\n}: {\n\tonClose: () => void;\n\tonRemove: () => void;\n\tpostId: number;\n} ) {\n\tconst { getLastEntityDeleteError } = useSelect( coreStore );\n\tconst { deleteEntityRecord } = useDispatch( coreStore );\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\tconst closeCallback = () => {\n\t\tonClose();\n\t};\n\tconst trashCallback = async () => {\n\t\trecordEvent( 'trash_modal_move_to_trash_button_clicked' );\n\t\tconst success = await deleteEntityRecord(\n\t\t\t'postType',\n\t\t\teditorCurrentPostType,\n\t\t\tpostId as unknown as string,\n\t\t\t{},\n\t\t\t{ throwOnError: false }\n\t\t);\n\t\tif ( success ) {\n\t\t\tonRemove();\n\t\t} else {\n\t\t\tconst lastError = getLastEntityDeleteError(\n\t\t\t\t'postType',\n\t\t\t\teditorCurrentPostType,\n\t\t\t\tpostId\n\t\t\t);\n\t\t\t// Already deleted.\n\t\t\tif ( lastError?.code === 410 ) {\n\t\t\t\tonRemove();\n\t\t\t} else {\n\t\t\t\tconst errorMessage = lastError?.message\n\t\t\t\t\t? ( lastError.message as string )\n\t\t\t\t\t: __(\n\t\t\t\t\t\t\t'An error occurred while moving the email to the trash.',\n\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t  );\n\t\t\t\trecordEvent( 'trash_modal_move_to_trash_error', {\n\t\t\t\t\terrorMessage,\n\t\t\t\t} );\n\t\t\t\tawait createErrorNotice( errorMessage, {\n\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\tisDismissible: true,\n\t\t\t\t\tcontext: 'email-editor',\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t};\n\treturn (\n\t\t<Modal\n\t\t\tclassName=\"mailpoet-move-to-trash-modal\"\n\t\t\ttitle={ __( 'Move to trash', 'mailpoet' ) }\n\t\t\tonRequestClose={ () => {\n\t\t\t\tcloseCallback();\n\t\t\t\trecordEvent( 'trash_modal_closed' );\n\t\t\t} }\n\t\t\tfocusOnMount\n\t\t>\n\t\t\t<p>\n\t\t\t\t{ __(\n\t\t\t\t\t'Are you sure you want to move this email to trash?',\n\t\t\t\t\t'mailpoet'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<div className=\"mailpoet-send-preview-modal-footer\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tcloseCallback();\n\t\t\t\t\t\trecordEvent( 'trash_modal_cancel_button_clicked' );\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Cancel', 'mailpoet' ) }\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"primary\" onClick={ trashCallback }>\n\t\t\t\t\t{ __( 'Move to trash', 'mailpoet' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n\nexport default TrashModal;\n","/**\n * External dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\nimport {\n\t__experimentalLibrary as Library, // eslint-disable-line\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { useEditorMode } from '../../hooks';\nimport { recordEvent } from '../../events';\n\nexport function InserterSidebar() {\n\tconst { postContentId } = useSelect( ( select ) => {\n\t\tconst blocks = select( blockEditorStore ).getBlocks();\n\t\treturn {\n\t\t\tpostContentId: blocks.find(\n\t\t\t\t( block ) => block.name === 'core/post-content'\n\t\t\t)?.clientId,\n\t\t};\n\t} );\n\n\tconst [ editorMode ] = useEditorMode();\n\n\t// @ts-expect-error missing types.\n\tconst { setIsInserterOpened } = useDispatch( editorStore );\n\n\treturn (\n\t\t<div className=\"editor-inserter-sidebar\">\n\t\t\t<div className=\"editor-inserter-sidebar__content\">\n\t\t\t\t<Library\n\t\t\t\t\tshowMostUsedBlocks\n\t\t\t\t\tshowInserterHelpPanel={ false }\n\t\t\t\t\t// In the email content mode we insert primarily into the post content block.\n\t\t\t\t\trootClientId={\n\t\t\t\t\t\teditorMode === 'email' ? postContentId : null\n\t\t\t\t\t}\n\t\t\t\t\tonClose={ () => {\n\t\t\t\t\t\tsetIsInserterOpened( false );\n\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t'inserter_sidebar_library_close_icon_clicked',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\teditorMode,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\tonSelect={ ( selectedBlock ) => {\n\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t'inserter_sidebar_library_block_selected',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\teditorMode,\n\t\t\t\t\t\t\t\tblockName: selectedBlock?.name,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\nimport { store as coreDataStore } from '@wordpress/core-data';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tuseShortcut,\n\tstore as keyboardShortcutsStore,\n} from '@wordpress/keyboard-shortcuts';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { recordEvent } from '../../events';\n\n// See:\n//    https://github.com/WordPress/gutenberg/blob/9601a33e30ba41bac98579c8d822af63dd961488/packages/edit-post/src/components/keyboard-shortcuts/index.js\n//    https://github.com/WordPress/gutenberg/blob/0ee78b1bbe9c6f3e6df99f3b967132fa12bef77d/packages/edit-site/src/components/keyboard-shortcuts/index.js\n\nexport function KeyboardShortcuts(): null {\n\tconst { undo: undoAction, redo: redoAction } = useDispatch( coreDataStore );\n\tconst { isSidebarOpened, hasEdits, isSaving } = useSelect( ( select ) => ( {\n\t\tisSidebarOpened: select( storeName ).isSidebarOpened(),\n\t\tisSaving: select( storeName ).isSaving(),\n\t\thasEdits: select( storeName ).hasEdits(),\n\t} ) );\n\n\tconst { openSidebar, closeSidebar, saveEditedEmail, toggleFeature } =\n\t\tuseDispatch( storeName );\n\n\tconst { registerShortcut } = useDispatch( keyboardShortcutsStore );\n\n\tuseEffect( () => {\n\t\tvoid registerShortcut( {\n\t\t\tname: 'mailpoet/email-editor/toggle-fullscreen',\n\t\t\tcategory: 'global',\n\t\t\tdescription: __( 'Toggle fullscreen mode.', 'mailpoet' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'secondary',\n\t\t\t\tcharacter: 'f',\n\t\t\t},\n\t\t} );\n\n\t\tvoid registerShortcut( {\n\t\t\tname: 'mailpoet/email-editor/toggle-sidebar',\n\t\t\tcategory: 'global',\n\t\t\tdescription: __( 'Show or hide the settings sidebar.', 'mailpoet' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryShift',\n\t\t\t\tcharacter: ',',\n\t\t\t},\n\t\t} );\n\n\t\tvoid registerShortcut( {\n\t\t\tname: 'mailpoet/email-editor/save',\n\t\t\tcategory: 'global',\n\t\t\tdescription: __( 'Save your changes.', 'mailpoet' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 's',\n\t\t\t},\n\t\t} );\n\n\t\tvoid registerShortcut( {\n\t\t\tname: 'mailpoet/email-editor/undo',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Undo your last changes.', 'mailpoet' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 'z',\n\t\t\t},\n\t\t} );\n\n\t\tvoid registerShortcut( {\n\t\t\tname: 'mailpoet/email-editor/redo',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Redo your last undo.', 'mailpoet' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryShift',\n\t\t\t\tcharacter: 'z',\n\t\t\t},\n\t\t} );\n\t}, [ registerShortcut ] );\n\n\tuseShortcut( 'mailpoet/email-editor/toggle-fullscreen', () => {\n\t\trecordEvent( 'keyboard_shortcuts_toggle_fullscreen' );\n\t\tvoid toggleFeature( 'fullscreenMode' );\n\t} );\n\n\tuseShortcut( 'mailpoet/email-editor/toggle-sidebar', ( event ) => {\n\t\trecordEvent( 'keyboard_shortcuts_toggle_sidebar' );\n\t\tevent.preventDefault();\n\n\t\tif ( isSidebarOpened ) {\n\t\t\tvoid closeSidebar();\n\t\t} else {\n\t\t\tvoid openSidebar();\n\t\t}\n\t} );\n\n\tuseShortcut( 'mailpoet/email-editor/save', ( event ) => {\n\t\trecordEvent( 'keyboard_shortcuts_save' );\n\t\tevent.preventDefault();\n\t\tif ( ! hasEdits || isSaving ) {\n\t\t\treturn;\n\t\t}\n\t\tvoid saveEditedEmail();\n\t} );\n\n\tuseShortcut(\n\t\t// Shortcut name\n\t\t'mailpoet/email-editor/undo',\n\t\t// Shortcut callback\n\t\t( event ): void => {\n\t\t\tvoid undoAction();\n\t\t\tevent.preventDefault();\n\t\t}\n\t);\n\n\tuseShortcut(\n\t\t// Shortcut name\n\t\t'mailpoet/email-editor/redo',\n\t\t// Shortcut callback\n\t\t( event ): void => {\n\t\t\tvoid redoAction();\n\t\t\tevent.preventDefault();\n\t\t}\n\t);\n\n\treturn null;\n}\n","/**\n * External dependencies\n */\n// eslint-disable-next-line\nimport { __experimentalListView as ListView } from '@wordpress/block-editor';\n\nexport function ListviewSidebar() {\n\treturn (\n\t\t<div className=\"editor-list-view-sidebar\">\n\t\t\t<ListView />\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { NoticeList } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { ValidationNotices } from './validation-notices';\nimport { EditorSnackbars } from './snackbars';\n\n// See: https://github.com/WordPress/gutenberg/blob/5be0ec4153c3adf9f0f2513239f4f7a358ba7948/packages/editor/src/components/editor-notices/index.js\n\nexport function EditorNotices() {\n\tconst { notices } = useSelect(\n\t\t( select ) => ( {\n\t\t\tnotices: select( noticesStore ).getNotices( 'email-editor' ),\n\t\t} ),\n\t\t[]\n\t);\n\n\tconst { removeNotice } = useDispatch( noticesStore );\n\n\tconst dismissibleNotices = notices.filter(\n\t\t( { isDismissible, type } ) => isDismissible && type === 'default'\n\t);\n\n\tconst nonDismissibleNotices = notices.filter(\n\t\t( { isDismissible, type } ) => ! isDismissible && type === 'default'\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<NoticeList\n\t\t\t\tnotices={ nonDismissibleNotices }\n\t\t\t\tclassName=\"components-editor-notices__pinned\"\n\t\t\t/>\n\t\t\t<NoticeList\n\t\t\t\tnotices={ dismissibleNotices }\n\t\t\t\tclassName=\"components-editor-notices__dismissible\"\n\t\t\t\tonRemove={ ( id ) => removeNotice( id, 'email-editor' ) }\n\t\t\t/>\n\t\t\t<ValidationNotices />\n\t\t\t<EditorSnackbars context=\"global\" />\n\t\t\t<EditorSnackbars context=\"email-editor\" />\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { dispatch, useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { recordEvent } from '../../events';\n\nexport function SentEmailNotice() {\n\tconst { isEmailSent } = useSelect(\n\t\t( select ) => ( {\n\t\t\tisEmailSent: select( storeName ).isEmailSent(),\n\t\t} ),\n\t\t[]\n\t);\n\n\tuseEffect( () => {\n\t\tif ( isEmailSent ) {\n\t\t\tvoid dispatch( noticesStore ).createNotice(\n\t\t\t\t'warning',\n\t\t\t\t__(\n\t\t\t\t\t'This email has already been sent. It can be edited, but not sent again. Duplicate this email if you want to send it again.',\n\t\t\t\t\t'mailpoet'\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\tid: 'email-sent',\n\t\t\t\t\tisDismissible: false,\n\t\t\t\t\tcontext: 'email-editor',\n\t\t\t\t}\n\t\t\t);\n\t\t\trecordEvent( 'editor_showed_email_sent_notice' );\n\t\t}\n\t}, [ isEmailSent ] );\n\n\treturn null;\n}\n","/**\n * External dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { SnackbarList } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\n\n// See: https://github.com/WordPress/gutenberg/blob/2788a9cf8b8149be3ee52dd15ce91fa55815f36a/packages/editor/src/components/editor-snackbars/index.js\n\nexport function EditorSnackbars( { context = 'email-editor' } ) {\n\tconst { notices } = useSelect(\n\t\t( select ) => ( {\n\t\t\tnotices: select( noticesStore ).getNotices( context ),\n\t\t} ),\n\t\t[ context ]\n\t);\n\n\t// Some global notices are not suitable for the email editor context\n\t// This map allows us to change the content of the notice\n\tconst globalNoticeChangeMap = useMemo( () => {\n\t\treturn {\n\t\t\t'site-editor-save-success': {\n\t\t\t\tcontent: __( 'Email design updated.', 'mailpoet' ),\n\t\t\t\tremoveActions: true,\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\tconst { removeNotice } = useDispatch( noticesStore );\n\n\tconst snackbarNotices = notices\n\t\t.filter( ( { type } ) => type === 'snackbar' )\n\t\t.map( ( notice ) => {\n\t\t\tif ( ! globalNoticeChangeMap[ notice.id ] ) {\n\t\t\t\treturn notice;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...notice,\n\t\t\t\tcontent: globalNoticeChangeMap[ notice.id ].content,\n\t\t\t\tactions: globalNoticeChangeMap[ notice.id ].removeActions\n\t\t\t\t\t? []\n\t\t\t\t\t: notice.actions,\n\t\t\t};\n\t\t} );\n\n\treturn (\n\t\t<SnackbarList\n\t\t\tnotices={ snackbarNotices }\n\t\t\tclassName=\"components-editor-notices__snackbar\"\n\t\t\tonRemove={ ( id ) => removeNotice( id, context ) }\n\t\t/>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Notice, Button } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { useValidationNotices } from '../../hooks';\n\nexport function ValidationNotices() {\n\tconst { notices } = useValidationNotices();\n\n\tif ( notices.length === 0 ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Notice\n\t\t\tstatus=\"error\"\n\t\t\tclassName=\"mailpoet-email-editor-validation-errors components-editor-notices__pinned\"\n\t\t\tisDismissible={ false }\n\t\t>\n\t\t\t<>\n\t\t\t\t<strong>{ __( 'Fix errors to continue:', 'mailpoet' ) }</strong>\n\t\t\t\t<ul>\n\t\t\t\t\t{ notices.map( ( { id, content, actions } ) => (\n\t\t\t\t\t\t<li key={ id }>\n\t\t\t\t\t\t\t{ content }\n\t\t\t\t\t\t\t{ actions.length > 0\n\t\t\t\t\t\t\t\t? actions.map( ( { label, onClick } ) => (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tkey={ label }\n\t\t\t\t\t\t\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t  ) )\n\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t</li>\n\t\t\t\t\t) ) }\n\t\t\t\t</ul>\n\t\t\t</>\n\t\t</Notice>\n\t);\n}\n","/**\n * External dependencies\n */\nimport * as React from '@wordpress/element';\nimport { MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nconst CategoryMenu = ( {\n\tgroupedTags,\n\tactiveCategory,\n\tonCategorySelect,\n}: {\n\tgroupedTags: Record< string, unknown[] >;\n\tactiveCategory: string | null;\n\tonCategorySelect: ( category: string | null ) => void;\n} ) => {\n\tconst getMenuItemClass = ( category: string | null ) =>\n\t\tcategory === activeCategory\n\t\t\t? 'mailpoet-personalization-tags-modal__menu-item-active'\n\t\t\t: '';\n\n\treturn (\n\t\t<MenuGroup className=\"mailpoet-personalization-tags-modal__menu\">\n\t\t\t<MenuItem\n\t\t\t\tonClick={ () => onCategorySelect( null ) }\n\t\t\t\tclassName={ getMenuItemClass( null ) }\n\t\t\t>\n\t\t\t\t{ __( 'All', 'mailpoet' ) }\n\t\t\t</MenuItem>\n\t\t\t<div\n\t\t\t\tclassName=\"mailpoet-personalization-tags-modal__menu-separator\"\n\t\t\t\taria-hidden=\"true\"\n\t\t\t></div>\n\t\t\t{ Object.keys( groupedTags ).map( ( category, index, array ) => (\n\t\t\t\t<React.Fragment key={ category }>\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tonClick={ () => onCategorySelect( category ) }\n\t\t\t\t\t\tclassName={ getMenuItemClass( category ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ category }\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t{ index < array.length - 1 && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"mailpoet-personalization-tags-modal__menu-separator\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t) }\n\t\t\t\t</React.Fragment>\n\t\t\t) ) }\n\t\t</MenuGroup>\n\t);\n};\n\nexport { CategoryMenu };\n","/**\n * External dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { PersonalizationTag } from '../../store';\n\nconst CategorySection = ( {\n\tgroupedTags,\n\tactiveCategory,\n\tonInsert,\n\tcanInsertLink,\n\tcloseCallback,\n\topenLinkModal,\n}: {\n\tgroupedTags: Record< string, PersonalizationTag[] >;\n\tactiveCategory: string | null;\n\tonInsert: ( tag: string, isLink: boolean ) => void;\n\tcanInsertLink: boolean;\n\tcloseCallback: () => void;\n\topenLinkModal: ( tag: PersonalizationTag ) => void;\n} ) => {\n\tconst categoriesToRender: [ string, PersonalizationTag[] ][] =\n\t\tactiveCategory === null\n\t\t\t? Object.entries( groupedTags ) // Render all categories\n\t\t\t: [ [ activeCategory, groupedTags[ activeCategory ] || [] ] ]; // Render only one selected category\n\n\treturn (\n\t\t<>\n\t\t\t{ categoriesToRender.map(\n\t\t\t\t( [ category, items ]: [ string, PersonalizationTag[] ] ) => (\n\t\t\t\t\t<div key={ category }>\n\t\t\t\t\t\t<div className=\"mailpoet-personalization-tags-modal__category\">\n\t\t\t\t\t\t\t{ category }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"mailpoet-personalization-tags-modal__category-group\">\n\t\t\t\t\t\t\t{ items.map( ( item ) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"mailpoet-personalization-tags-modal__category-group-item\"\n\t\t\t\t\t\t\t\t\tkey={ item.token }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"mailpoet-personalization-tags-modal__item-text\">\n\t\t\t\t\t\t\t\t\t\t<strong>{ item.name }</strong>\n\t\t\t\t\t\t\t\t\t\t{ item.valueToInsert }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'flex-end',\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\tif ( onInsert ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonInsert(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.valueToInsert,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Insert', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t{ category ===\n\t\t\t\t\t\t\t\t\t\t\t__( 'Link', 'mailpoet' ) &&\n\t\t\t\t\t\t\t\t\t\t\tcanInsertLink && (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseCallback();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topenLinkModal(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Insert as link',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport { CategorySection };\n","/**\n * External dependencies\n */\nimport { Button, Modal, TextControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport './index.scss';\n\nconst LinkModal = ( { onInsert, isOpened, closeCallback, tag } ) => {\n\tconst [ linkText, setLinkText ] = useState( __( 'Link', 'mailpoet' ) );\n\tif ( ! isOpened ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Modal\n\t\t\tsize=\"small\"\n\t\t\ttitle={ __( 'Insert Link', 'mailpoet' ) }\n\t\t\tonRequestClose={ closeCallback }\n\t\t\tclassName=\"mailpoet-personalization-tags-modal\"\n\t\t>\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Link Text', 'mailpoet' ) }\n\t\t\t\tvalue={ linkText }\n\t\t\t\tonChange={ setLinkText }\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tisPrimary\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tif ( onInsert ) {\n\t\t\t\t\t\tonInsert( tag.token, linkText );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ __( 'Insert', 'mailpoet' ) }\n\t\t\t</Button>\n\t\t</Modal>\n\t);\n};\n\nexport { LinkModal };\n","/**\n * External dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tPopover,\n\tButton,\n\tTextControl,\n\tSelectControl,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\n\ntype PersonalizationTagsLinkPopoverProps = {\n\tcontentRef: React.RefObject< HTMLElement >;\n\tonUpdate: (\n\t\thtmlElement: HTMLElement,\n\t\tnewTag: string,\n\t\tnewText: string\n\t) => void;\n};\nconst PersonalizationTagsLinkPopover = ( {\n\tcontentRef,\n\tonUpdate,\n}: PersonalizationTagsLinkPopoverProps ) => {\n\tconst [ isPopoverVisible, setIsPopoverVisible ] = useState( false );\n\tconst [ linkElement, setLinkElement ] = useState< HTMLElement | null >(\n\t\tnull\n\t);\n\tconst [ linkText, setLinkText ] = useState( '' );\n\tconst [ linkHref, setLinkHref ] = useState( '' );\n\n\tconst list = useSelect(\n\t\t( select ) => select( storeName ).getPersonalizationTagsList(),\n\t\t[]\n\t);\n\n\tuseEffect( () => {\n\t\tif ( ! contentRef || ! contentRef.current ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst container = contentRef.current;\n\n\t\t// Handle clicks within the referenced container\n\t\tconst handleContainerClick = ( event: Event ) => {\n\t\t\tconst target = event.target as HTMLElement;\n\t\t\tconst element = target.closest(\n\t\t\t\t'a[data-link-href]'\n\t\t\t) as HTMLElement;\n\n\t\t\tif ( element ) {\n\t\t\t\t// Remove brackets from the text content for better user experience\n\t\t\t\tsetLinkElement( element );\n\t\t\t\tsetLinkHref( element.getAttribute( 'data-link-href' ) || '' );\n\t\t\t\tsetLinkText( element.textContent || '' );\n\t\t\t\tsetIsPopoverVisible( true );\n\t\t\t}\n\t\t};\n\n\t\t// Add the event listener to the container\n\t\tcontainer.addEventListener( 'click', handleContainerClick );\n\n\t\t// Cleanup function to remove the event listener on unmount\n\t\treturn () => {\n\t\t\tcontainer.removeEventListener( 'click', handleContainerClick );\n\t\t};\n\t}, [ contentRef ] );\n\n\treturn (\n\t\t<>\n\t\t\t{ isPopoverVisible && linkElement && (\n\t\t\t\t<Popover\n\t\t\t\t\tposition=\"bottom left\"\n\t\t\t\t\tonClose={ () => setIsPopoverVisible( false ) }\n\t\t\t\t\tanchor={ linkElement } // Directly use commentSpan as the anchor\n\t\t\t\t\tclassName=\"mailpoet-personalization-tag-popover\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"mailpoet-personalization-tag-popover__content\">\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __( 'Link Text', 'mailpoet' ) }\n\t\t\t\t\t\t\tvalue={ linkText }\n\t\t\t\t\t\t\tonChange={ ( value ) => setLinkText( value ) }\n\t\t\t\t\t\t\t__nextHasNoMarginBottom // To avoid warning about deprecation in console\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\tlabel={ __( 'Link tag', 'mailpoet' ) }\n\t\t\t\t\t\t\tvalue={ linkHref }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetLinkHref( value );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\toptions={ list\n\t\t\t\t\t\t\t\t.filter( ( tag ) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\ttag.category ===\n\t\t\t\t\t\t\t\t\t\t__( 'Link', 'mailpoet' )\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t.map( ( tag ) => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tlabel: tag.name,\n\t\t\t\t\t\t\t\t\t\tvalue: tag.token,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"mailpoet-personalization-tag-popover__content-buttons\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tsetIsPopoverVisible( false );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Cancel', 'mailpoet' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tsetIsPopoverVisible( false );\n\t\t\t\t\t\t\t\t\tonUpdate( linkElement, linkHref, linkText );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Update link', 'mailpoet' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Popover>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport { PersonalizationTagsLinkPopover };\n","/**\n * External dependencies\n */\nimport { ExternalLink, Modal, SearchControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport './index.scss';\nimport { CategoryMenu } from './category-menu';\nimport { CategorySection } from './category-section';\nimport { LinkModal } from './link-modal';\nimport { recordEvent, recordEventOnce } from '../../events';\nimport { PersonalizationTag, storeName } from '../../store';\n\nconst PersonalizationTagsModal = ( {\n\tonInsert,\n\tisOpened,\n\tcloseCallback,\n\tcanInsertLink = false,\n\topenedBy = '',\n} ) => {\n\tconst [ activeCategory, setActiveCategory ] = useState( null );\n\tconst [ searchQuery, setSearchQuery ] = useState( '' );\n\tconst [ selectedTag, setSelectedTag ] = useState( null );\n\tconst [ isLinkModalOpened, setIsLinkModalOpened ] = useState( false );\n\n\tconst list = useSelect(\n\t\t( select ) => select( storeName ).getPersonalizationTagsList(),\n\t\t[]\n\t);\n\n\tif ( isLinkModalOpened ) {\n\t\treturn (\n\t\t\t<LinkModal\n\t\t\t\tonInsert={ ( tag, linkText ) => {\n\t\t\t\t\tonInsert( tag, linkText );\n\t\t\t\t\tsetIsLinkModalOpened( false );\n\t\t\t\t} }\n\t\t\t\tisOpened={ isLinkModalOpened }\n\t\t\t\tcloseCallback={ () => setIsLinkModalOpened( false ) }\n\t\t\t\ttag={ selectedTag }\n\t\t\t/>\n\t\t);\n\t}\n\n\tif ( ! isOpened ) {\n\t\treturn null;\n\t}\n\n\trecordEventOnce( 'personalization_tags_modal_opened', { openedBy } );\n\n\tconst groupedTags: Record< string, PersonalizationTag[] > = list.reduce(\n\t\t( groups, item ) => {\n\t\t\tconst { category, name, token } = item;\n\n\t\t\tif (\n\t\t\t\t! searchQuery ||\n\t\t\t\tname.toLowerCase().includes( searchQuery.toLowerCase() ) ||\n\t\t\t\ttoken.toLowerCase().includes( searchQuery.toLowerCase() )\n\t\t\t) {\n\t\t\t\tif ( ! groups[ category ] ) {\n\t\t\t\t\tgroups[ category ] = [];\n\t\t\t\t}\n\t\t\t\tgroups[ category ].push( item );\n\t\t\t}\n\t\t\treturn groups;\n\t\t},\n\t\t{} as Record< string, PersonalizationTag[] >\n\t);\n\n\treturn (\n\t\t<Modal\n\t\t\tsize=\"medium\"\n\t\t\ttitle={ __( 'Personalization Tags', 'mailpoet' ) }\n\t\t\tonRequestClose={ () => {\n\t\t\t\tcloseCallback();\n\t\t\t\trecordEvent( 'personalization_tags_modal_closed', {\n\t\t\t\t\topenedBy,\n\t\t\t\t} );\n\t\t\t} }\n\t\t\tclassName=\"mailpoet-personalization-tags-modal\"\n\t\t>\n\t\t\t<p>\n\t\t\t\t{ __(\n\t\t\t\t\t'Insert personalization tags to dynamically fill in information and personalize your emails.',\n\t\t\t\t\t'mailpoet'\n\t\t\t\t) }{ ' ' }\n\t\t\t\t<ExternalLink\n\t\t\t\t\thref=\"https://kb.mailpoet.com/article/435-a-guide-to-personalisation-tags-for-tailored-newsletters#list\"\n\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t'personalization_tags_modal_learn_more_link_clicked',\n\t\t\t\t\t\t\t{ openedBy }\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Learn more', 'mailpoet' ) }\n\t\t\t\t</ExternalLink>\n\t\t\t</p>\n\t\t\t<SearchControl\n\t\t\t\tonChange={ ( theSearchQuery ) => {\n\t\t\t\t\tsetSearchQuery( theSearchQuery );\n\t\t\t\t\trecordEventOnce(\n\t\t\t\t\t\t'personalization_tags_modal_search_control_input_updated',\n\t\t\t\t\t\t{ openedBy }\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\tvalue={ searchQuery }\n\t\t\t/>\n\t\t\t<CategoryMenu\n\t\t\t\tgroupedTags={ groupedTags }\n\t\t\t\tactiveCategory={ activeCategory }\n\t\t\t\tonCategorySelect={ ( category ) => {\n\t\t\t\t\tsetActiveCategory( category );\n\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t'personalization_tags_modal_category_menu_clicked',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcategory,\n\t\t\t\t\t\t\topenedBy,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t<CategorySection\n\t\t\t\tgroupedTags={ groupedTags }\n\t\t\t\tactiveCategory={ activeCategory }\n\t\t\t\tonInsert={ ( insertedTag ) => {\n\t\t\t\t\tonInsert( insertedTag );\n\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t'personalization_tags_modal_tag_insert_button_clicked',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinsertedTag,\n\t\t\t\t\t\t\tactiveCategory,\n\t\t\t\t\t\t\topenedBy,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\tcloseCallback={ closeCallback }\n\t\t\t\tcanInsertLink={ canInsertLink }\n\t\t\t\topenLinkModal={ ( tag ) => {\n\t\t\t\t\tsetSelectedTag( tag );\n\t\t\t\t\tsetIsLinkModalOpened( true );\n\t\t\t\t} }\n\t\t\t/>\n\t\t</Modal>\n\t);\n};\n\nexport { PersonalizationTagsModal };\n","/**\n * External dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { Popover, Button, TextControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\ntype PersonalizationTagsPopoverProps = {\n\tcontentRef: React.RefObject< HTMLElement >;\n\tonUpdate: ( originalValue: string, updatedValue: string ) => void;\n};\n\n/**\n * Component to display a popover with a text control to update personalization tags.\n * The popover is displayed when a user clicks on a personalization tag in the editor.\n * @param root0\n * @param root0.contentRef Reference to the container where the popover should be displayed\n * @param root0.onUpdate   Callback to update the personalization tag\n */\nconst PersonalizationTagsPopover = ( {\n\tcontentRef,\n\tonUpdate,\n}: PersonalizationTagsPopoverProps ) => {\n\tconst [ isPopoverVisible, setIsPopoverVisible ] = useState( false );\n\tconst [ anchor, setAnchor ] = useState< HTMLElement | null >( null );\n\tconst [ updatedValue, setUpdatedValue ] = useState( '' );\n\tconst [ originalValue, setOriginalValue ] = useState( '' );\n\n\tuseEffect( () => {\n\t\tif ( ! contentRef || ! contentRef.current ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst container = contentRef.current;\n\n\t\t// Handle clicks within the referenced container\n\t\tconst handleContainerClick = ( event: Event ) => {\n\t\t\tconst target = event.target as HTMLElement;\n\t\t\tconst commentSpan = target.closest(\n\t\t\t\t'span[data-rich-text-comment]'\n\t\t\t) as HTMLElement;\n\n\t\t\tif ( commentSpan ) {\n\t\t\t\t// Remove brackets from the text content for better user experience\n\t\t\t\tconst textContent = commentSpan.innerText.replace(\n\t\t\t\t\t/^\\[|\\]$/g,\n\t\t\t\t\t''\n\t\t\t\t);\n\t\t\t\tsetOriginalValue( textContent );\n\t\t\t\tsetUpdatedValue( textContent );\n\t\t\t\tsetAnchor( commentSpan );\n\t\t\t\tsetIsPopoverVisible( true );\n\t\t\t}\n\t\t};\n\n\t\t// Add the event listener to the container\n\t\tcontainer.addEventListener( 'click', handleContainerClick );\n\n\t\t// Cleanup function to remove the event listener on unmount\n\t\treturn () => {\n\t\t\tcontainer.removeEventListener( 'click', handleContainerClick );\n\t\t};\n\t}, [ contentRef ] );\n\n\treturn (\n\t\t<>\n\t\t\t{ isPopoverVisible && anchor && (\n\t\t\t\t<Popover\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\tonClose={ () => setIsPopoverVisible( false ) }\n\t\t\t\t\tanchor={ anchor } // Directly use commentSpan as the anchor\n\t\t\t\t\tclassName=\"mailpoet-personalization-tag-popover\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"mailpoet-personalization-tag-popover__content\">\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __( 'Personalization Tag', 'mailpoet' ) }\n\t\t\t\t\t\t\tvalue={ updatedValue }\n\t\t\t\t\t\t\tonChange={ ( value ) => setUpdatedValue( value ) }\n\t\t\t\t\t\t\t__nextHasNoMarginBottom // To avoid warning about deprecation in console\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"mailpoet-personalization-tag-popover__content-buttons\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tsetIsPopoverVisible( false );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Cancel', 'mailpoet' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tonUpdate( originalValue, updatedValue );\n\t\t\t\t\t\t\t\t\tsetIsPopoverVisible( false );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Update', 'mailpoet' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Popover>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport { PersonalizationTagsPopover };\n","/**\n * External dependencies\n */\nimport * as React from '@wordpress/element';\nimport { create } from '@wordpress/rich-text';\nimport { RichTextFormatList } from '@wordpress/rich-text/build-types/types';\n\n/**\n * Internal dependencies\n */\nimport { PersonalizationTag } from '../../store';\n\ntype Replacement = {\n\tattributes: Record< string, string >;\n\ttype: string;\n};\n\nfunction getChildElement( rootElement: HTMLElement ): HTMLElement | null {\n\tlet currentElement: HTMLElement | null = rootElement;\n\n\twhile ( currentElement && currentElement?.children?.length > 0 ) {\n\t\t// Traverse into the first child element\n\t\tcurrentElement = currentElement.children[ 0 ] as HTMLElement;\n\t}\n\n\treturn currentElement;\n}\n\nfunction findReplacementIndex(\n\telement: HTMLElement,\n\treplacements: ( null | Replacement )[]\n): number | null {\n\t// Iterate over the replacements array\n\tfor ( const [ index, replacement ] of replacements.entries() ) {\n\t\tif ( ! replacement ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst { attributes } = replacement;\n\n\t\tif (\n\t\t\telement.getAttribute( 'data-rich-text-comment' ) ===\n\t\t\tattributes[ 'data-rich-text-comment' ]\n\t\t) {\n\t\t\treturn index;\n\t\t}\n\t}\n\n\treturn null; // Return null if no match is found\n}\n\n/**\n * Find the latest index of the format that matches the element.\n * @param element\n * @param formats\n */\nfunction findLatestFormatIndex(\n\telement: HTMLElement,\n\tformats: RichTextFormatList[]\n): number | null {\n\tlet latestFormatIndex = null;\n\n\tfor ( const [ index, formatList ] of formats.entries() ) {\n\t\tif ( ! formatList ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Check each format within the format list at the current index\n\t\tfor ( const format of formatList ) {\n\t\t\tif (\n\t\t\t\t// @ts-expect-error attributes property is missing in build type for RichTextFormatList type\n\t\t\t\tformat?.attributes &&\n\t\t\t\telement.tagName.toLowerCase() ===\n\t\t\t\t\t// @ts-expect-error tagName property is missing in build type for RichTextFormatList type\n\t\t\t\t\tformat.tagName?.toLowerCase() &&\n\t\t\t\telement.getAttribute( 'data-link-href' ) ===\n\t\t\t\t\t// @ts-expect-error attributes property is missing in build type for RichTextFormatList type\n\t\t\t\t\tformat?.attributes[ 'data-link-href' ]\n\t\t\t) {\n\t\t\t\tlatestFormatIndex = index;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn latestFormatIndex;\n}\n\n/**\n * Retrieves the cursor position within a RichText component.\n * Calculates the offset in plain text while accounting for HTML tags and comments.\n *\n * @param {React.RefObject<HTMLElement>} richTextRef - Reference to the RichText component.\n * @param {string}                       content     - The plain text content of the block.\n * @return {{ start: number, end: number } | null} - The cursor position as start and end offsets.\n */\nconst getCursorPosition = (\n\trichTextRef: React.RefObject< HTMLElement >,\n\tcontent: string\n): { start: number; end: number } => {\n\tconst selection =\n\t\trichTextRef.current.ownerDocument.defaultView.getSelection();\n\n\tif ( ! selection.rangeCount ) {\n\t\treturn {\n\t\t\tstart: 0,\n\t\t\tend: 0,\n\t\t};\n\t}\n\n\tconst range = selection.getRangeAt( 0 );\n\n\tif ( selection.anchorNode.previousSibling === null ) {\n\t\treturn {\n\t\t\tstart: selection.anchorOffset,\n\t\t\tend: selection.anchorOffset + range.toString().length,\n\t\t};\n\t}\n\n\tconst richTextValue = create( { html: content } );\n\tlet previousSibling = selection.anchorNode.previousSibling as HTMLElement;\n\tpreviousSibling = getChildElement( previousSibling );\n\n\tconst formatIndex = findLatestFormatIndex(\n\t\tpreviousSibling,\n\t\trichTextValue.formats\n\t);\n\tif ( formatIndex !== null ) {\n\t\treturn {\n\t\t\tstart: formatIndex + selection.anchorOffset + 1, // We need to add 1 for the format length\n\t\t\tend: formatIndex + selection.anchorOffset + range.toString().length,\n\t\t};\n\t}\n\n\tconst replacementIndex = findReplacementIndex(\n\t\tpreviousSibling,\n\t\trichTextValue.replacements as Replacement[]\n\t);\n\tif ( replacementIndex !== null ) {\n\t\treturn {\n\t\t\tstart: replacementIndex + selection.anchorOffset + 1, // We need to add 1 for the replacement length\n\t\t\tend:\n\t\t\t\treplacementIndex +\n\t\t\t\tselection.anchorOffset +\n\t\t\t\trange.toString().length,\n\t\t};\n\t}\n\n\t// fallback for placing the value at the end of the rich text\n\treturn {\n\t\tstart: richTextValue.text.length,\n\t\tend: richTextValue.text.length + range.toString().length,\n\t};\n};\n\n/**\n * Replace registered personalization tags with HTML comments in content.\n * @param content string The content to replace the tags in.\n * @param tags    PersonalizationTag[] The tags to replace in the content.\n */\nconst replacePersonalizationTagsWithHTMLComments = (\n\tcontent: string,\n\ttags: PersonalizationTag[]\n) => {\n\ttags.forEach( ( tag ) => {\n\t\t// Skip if the token is not in the content\n\t\tif (\n\t\t\t! content.includes( tag.token.slice( 0, tag.token.length - 1 ) )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Match the token with optional attributes like [mailpoet/subscriber-firstname default=\"user\"]\n\t\tconst baseToken = tag.token\n\t\t\t.substring( 1, tag.token.length - 1 )\n\t\t\t.replace( /[.*+?^${}()|[\\]\\\\]/g, '\\\\$&' ); // Escape base token and remove brackets\n\t\tconst regex = new RegExp(\n\t\t\t`(?<!<!--)(?<![\"'])\\\\[(${ baseToken }(\\\\s[^\\\\]]*)?)\\\\](?!-->)`, // Match token not inside quotes (attributes)\n\t\t\t'g'\n\t\t);\n\n\t\tcontent = content.replace( regex, ( match ) => {\n\t\t\t// Use the exact text inside the brackets for the replacement\n\t\t\treturn `<!--${ match }-->`;\n\t\t} );\n\t} );\n\treturn content;\n};\n\nexport { getCursorPosition, replacePersonalizationTagsWithHTMLComments };\n","/**\n * External dependencies\n */\nimport type { ReactNode } from 'react';\nimport { BaseControl, Button } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { useCallback, useRef, useState } from '@wordpress/element';\nimport { create, insert, toHTMLString } from '@wordpress/rich-text';\nimport { RichText } from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { PersonalizationTagsModal } from './personalization-tags-modal';\nimport {\n\tgetCursorPosition,\n\treplacePersonalizationTagsWithHTMLComments,\n} from './rich-text-utils';\nimport { storeName } from '../../store';\nimport { PersonalizationTagsPopover } from './personalization-tags-popover';\nimport { recordEvent, recordEventOnce } from '../../events';\n\ntype Props = {\n\tlabel: string;\n\tlabelSuffix?: ReactNode;\n\thelp?: ReactNode;\n\tplaceholder: string;\n\tattributeName: string;\n\tattributeValue?: string;\n\tupdateProperty: (\n\t\ttheAttributeName: string,\n\t\ttheUpdatedValue: string\n\t) => void;\n};\n\nexport function RichTextWithButton( {\n\tlabel,\n\tlabelSuffix,\n\thelp,\n\tplaceholder,\n\tattributeName,\n\tattributeValue,\n\tupdateProperty = () => {},\n}: Props ) {\n\tconst [ selectionRange, setSelectionRange ] = useState( null );\n\tconst [ isModalOpened, setIsModalOpened ] = useState( false );\n\tconst list = useSelect(\n\t\t( select ) => select( storeName ).getPersonalizationTagsList(),\n\t\t[]\n\t);\n\n\tconst richTextRef = useRef( null );\n\n\tconst handleInsertPersonalizationTag = useCallback(\n\t\t( tagName, currentValue, currentSelectionRange ) => {\n\t\t\t// Ensure selection range is within bounds\n\t\t\tconst start = currentSelectionRange?.start ?? currentValue.length;\n\t\t\tconst end = currentSelectionRange?.end ?? currentValue.length;\n\n\t\t\tlet richTextValue = create( { html: currentValue } );\n\t\t\trichTextValue = insert(\n\t\t\t\trichTextValue,\n\t\t\t\tcreate( { html: `<!--${ tagName }-->` } ),\n\t\t\t\tstart,\n\t\t\t\tend\n\t\t\t);\n\t\t\tconst updatedValue = toHTMLString( { value: richTextValue } );\n\n\t\t\t// Update the corresponding property\n\t\t\tupdateProperty( attributeName, updatedValue );\n\n\t\t\tsetSelectionRange( null );\n\t\t},\n\t\t[ attributeName, updateProperty ]\n\t);\n\n\tconst finalLabel = (\n\t\t<>\n\t\t\t<span>{ label }</span>\n\t\t\t<Button\n\t\t\t\tclassName=\"mailpoet-settings-panel__personalization-tags-button\"\n\t\t\t\ticon=\"shortcode\"\n\t\t\t\ttitle={ __( 'Personalization Tags', 'mailpoet' ) }\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tsetIsModalOpened( true );\n\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t'rich_text_with_button_personalization_tags_shortcode_icon_clicked',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattributeName,\n\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ labelSuffix }\n\t\t</>\n\t);\n\n\tif ( ! attributeName ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BaseControl\n\t\t\tid=\"\" // See https://github.com/mailpoet/mailpoet/pull/6089#discussion_r1952126850 to understand why the ID is empty\n\t\t\tlabel={ finalLabel }\n\t\t\tclassName={ `mailpoet-settings-panel__${ attributeName }-text` }\n\t\t\thelp={ help }\n\t\t\t__nextHasNoMarginBottom // To avoid warning about deprecation in console\n\t\t>\n\t\t\t<PersonalizationTagsModal\n\t\t\t\tisOpened={ isModalOpened }\n\t\t\t\tonInsert={ ( value ) => {\n\t\t\t\t\thandleInsertPersonalizationTag(\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tattributeValue ?? '',\n\t\t\t\t\t\tselectionRange\n\t\t\t\t\t);\n\t\t\t\t\tsetIsModalOpened( false );\n\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t'rich_text_with_button_personalization_tags_inserted',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattributeName,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\tcloseCallback={ () => setIsModalOpened( false ) }\n\t\t\t\topenedBy=\"RichTextWithButton-BaseControl\"\n\t\t\t/>\n\t\t\t<PersonalizationTagsPopover\n\t\t\t\tcontentRef={ richTextRef }\n\t\t\t\tonUpdate={ ( originalTag, updatedTag ) => {\n\t\t\t\t\tconst currentValue = attributeValue ?? '';\n\t\t\t\t\t// When we update the tag, we need to add brackets to the tag, because the popover removes them\n\t\t\t\t\tconst updatedContent = currentValue.replace(\n\t\t\t\t\t\t`<!--[${ originalTag }]-->`,\n\t\t\t\t\t\t`<!--[${ updatedTag }]-->`\n\t\t\t\t\t);\n\t\t\t\t\tupdateProperty( attributeName, updatedContent );\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t<RichText\n\t\t\t\tref={ richTextRef }\n\t\t\t\tclassName=\"mailpoet-settings-panel__richtext\"\n\t\t\t\tplaceholder={ placeholder }\n\t\t\t\tonFocus={ () => {\n\t\t\t\t\tsetSelectionRange(\n\t\t\t\t\t\tgetCursorPosition( richTextRef, attributeValue ?? '' )\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\tonKeyUp={ () => {\n\t\t\t\t\tsetSelectionRange(\n\t\t\t\t\t\tgetCursorPosition( richTextRef, attributeValue ?? '' )\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tsetSelectionRange(\n\t\t\t\t\t\tgetCursorPosition( richTextRef, attributeValue ?? '' )\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\tvalue = replacePersonalizationTagsWithHTMLComments(\n\t\t\t\t\t\tvalue ?? '',\n\t\t\t\t\t\tlist\n\t\t\t\t\t);\n\t\t\t\t\tupdateProperty( attributeName, value );\n\t\t\t\t\trecordEventOnce(\n\t\t\t\t\t\t'rich_text_with_button_input_field_updated',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattributeName,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\tvalue={ attributeValue ?? '' }\n\t\t\t\tdata-automation-id={ `email_${ attributeName }` }\n\t\t\t/>\n\t\t</BaseControl>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { MenuGroup, MenuItem, DropdownMenu } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { Icon, external, check, mobile, desktop } from '@wordpress/icons';\nimport { PostPreviewButton } from '@wordpress/editor';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { recordEvent } from '../../events';\nimport { SendPreviewEmail } from './send-preview-email';\n\nexport function PreviewDropdown() {\n\tconst previewDeviceType = useSelect(\n\t\t( select ) => select( storeName ).getDeviceType(),\n\t\t[]\n\t);\n\n\tconst { changePreviewDeviceType, togglePreviewModal } =\n\t\tuseDispatch( storeName );\n\n\tconst changeDeviceType = ( newDeviceType: string ) => {\n\t\tvoid changePreviewDeviceType( newDeviceType );\n\t};\n\n\tconst deviceIcons = {\n\t\tmobile,\n\t\tdesktop,\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<DropdownMenu\n\t\t\t\tclassName=\"mailpoet-preview-dropdown\"\n\t\t\t\tlabel={ __( 'Preview', 'mailpoet' ) }\n\t\t\t\ticon={ deviceIcons[ previewDeviceType.toLowerCase() ] }\n\t\t\t\tonToggle={ ( isOpened ) =>\n\t\t\t\t\trecordEvent( 'header_preview_dropdown_clicked', {\n\t\t\t\t\t\tisOpened,\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tclassName=\"block-editor-post-preview__button-resize\"\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tchangeDeviceType( 'Desktop' );\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'header_preview_dropdown_desktop_selected'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\tpreviewDeviceType === 'Desktop' && check\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Desktop', 'mailpoet' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tclassName=\"block-editor-post-preview__button-resize\"\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tchangeDeviceType( 'Mobile' );\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'header_preview_dropdown_mobile_selected'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\ticon={ previewDeviceType === 'Mobile' && check }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Mobile', 'mailpoet' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tclassName=\"block-editor-post-preview__button-resize\"\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tvoid togglePreviewModal( true );\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'header_preview_dropdown_send_test_email_selected'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Send a test email', 'mailpoet' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t<div className=\"edit-post-header-preview__grouping-external\">\n\t\t\t\t\t\t\t\t<PostPreviewButton\n\t\t\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\t\t\tforceIsAutosaveable={ true }\n\t\t\t\t\t\t\t\t\taria-label={ __(\n\t\t\t\t\t\t\t\t\t\t'Preview in new tab',\n\t\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\ttextContent={\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Preview in new tab',\n\t\t\t\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon={ external } />\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonPreview={ () => {\n\t\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t'header_preview_dropdown_preview_in_new_tab_selected'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</DropdownMenu>\n\t\t\t<SendPreviewEmail />\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { Button, Modal, TextControl } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { check, Icon } from '@wordpress/icons';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tuseEffect,\n\tuseRef,\n\tcreateInterpolateElement,\n\tmemo,\n} from '@wordpress/element';\nimport { ENTER } from '@wordpress/keycodes';\nimport { isEmail } from '@wordpress/url';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tSendingPreviewStatus,\n\tstoreName,\n\teditorCurrentPostType,\n} from '../../store';\nimport { recordEvent, recordEventOnce } from '../../events';\n\nconst sendingMethodConfigurationLink = applyFilters(\n\t'mailpoet_email_editor_check_sending_method_configuration_link',\n\t'admin.php?page=mailpoet-settings#mta'\n) as string;\n\nfunction RawSendPreviewEmail() {\n\tconst sendToRef = useRef( null );\n\n\tconst {\n\t\trequestSendingNewsletterPreview,\n\t\ttogglePreviewModal,\n\t\tupdateSendPreviewEmail,\n\t} = useDispatch( storeName );\n\n\tconst {\n\t\ttoEmail: previewToEmail,\n\t\tisSendingPreviewEmail,\n\t\tsendingPreviewStatus,\n\t\tisModalOpened,\n\t\terrorMessage,\n\t} = useSelect( ( select ) => select( storeName ).getPreviewState(), [] );\n\n\tconst handleSendPreviewEmail = () => {\n\t\tvoid requestSendingNewsletterPreview( previewToEmail );\n\t};\n\n\tconst closeCallback = () => {\n\t\trecordEvent( 'send_preview_email_modal_closed' );\n\t\tvoid togglePreviewModal( false );\n\t};\n\n\t// We use this effect to focus on the input field when the modal is opened\n\tuseEffect( () => {\n\t\tif ( isModalOpened ) {\n\t\t\tsendToRef.current?.focus();\n\t\t\trecordEvent( 'send_preview_email_modal_opened' );\n\t\t}\n\t}, [ isModalOpened ] );\n\n\tif ( ! isModalOpened ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Modal\n\t\t\tclassName=\"mailpoet-send-preview-email\"\n\t\t\ttitle={ __( 'Send a test email', 'mailpoet' ) }\n\t\t\tonRequestClose={ closeCallback }\n\t\t\tfocusOnMount={ false }\n\t\t>\n\t\t\t{ sendingPreviewStatus === SendingPreviewStatus.ERROR ? (\n\t\t\t\t<div className=\"mailpoet-send-preview-modal-notice-error\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Sorry, we were unable to send this email.',\n\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<strong>\n\t\t\t\t\t\t{ errorMessage &&\n\t\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t\t// translators: %s is an error message.\n\t\t\t\t\t\t\t\t__( 'Error: %s', 'mailpoet' ),\n\t\t\t\t\t\t\t\terrorMessage\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t</strong>\n\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t{ sendingMethodConfigurationLink &&\n\t\t\t\t\t\t\t\tcreateInterpolateElement(\n\t\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t\t'Please check your <link>sending method configuration</link> with your hosting provider.',\n\t\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/anchor-has-content, jsx-a11y/control-has-associated-label\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t\t\tsendingMethodConfigurationLink\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'send_preview_email_modal_check_sending_method_configuration_link_clicked'\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t'Or, sign up for MailPoet Sending Service to easily send emails. <link>Sign up for free</link>',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/anchor-has-content, jsx-a11y/control-has-associated-label\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={ `https://account.mailpoet.com/?s=1&g=1&utm_source=mailpoet_email_editor&utm_medium=plugin&utm_source_platform=${ editorCurrentPostType }` }\n\t\t\t\t\t\t\t\t\t\t\tkey=\"sign-up-for-free\"\n\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'send_preview_email_modal_sign_up_for_mailpoet_sending_service_link_clicked'\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t) : null }\n\t\t\t<p>\n\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\t__(\n\t\t\t\t\t\t'Send yourself a test email to test how your email would look like in different email apps. You can also test your spam score by sending a test email to <link1>{$serviceName}</link1>. <link2>Learn more</link2>.',\n\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t).replace( '{$serviceName}', 'Mail Tester' ),\n\t\t\t\t\t{\n\t\t\t\t\t\tlink1: (\n\t\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/anchor-has-content, jsx-a11y/control-has-associated-label\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"https://www.mail-tester.com/\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'send_preview_email_modal_send_test_email_to_mail_tester_link_clicked'\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t),\n\t\t\t\t\t\tlink2: (\n\t\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/anchor-has-content, jsx-a11y/control-has-associated-label\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"https://kb.mailpoet.com/article/147-test-your-spam-score-with-mail-tester\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'send_preview_email_modal_learn_more_about_mail_tester_link_clicked'\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t),\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Send to', 'mailpoet' ) }\n\t\t\t\tonChange={ ( email ) => {\n\t\t\t\t\tvoid updateSendPreviewEmail( email );\n\t\t\t\t\trecordEventOnce(\n\t\t\t\t\t\t'send_preview_email_modal_send_to_field_updated'\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\tconst { keyCode } = event;\n\t\t\t\t\tif ( keyCode === ENTER ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\thandleSendPreviewEmail();\n\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t'send_preview_email_modal_send_to_field_key_code_enter'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\tvalue={ previewToEmail }\n\t\t\t\ttype=\"email\"\n\t\t\t\tref={ sendToRef }\n\t\t\t\trequired\n\t\t\t/>\n\t\t\t{ sendingPreviewStatus === SendingPreviewStatus.SUCCESS ? (\n\t\t\t\t<p className=\"mailpoet-send-preview-modal-notice-success\">\n\t\t\t\t\t<Icon icon={ check } style={ { fill: '#4AB866' } } />\n\t\t\t\t\t{ __( 'Test email sent successfully!', 'mailpoet' ) }\n\t\t\t\t</p>\n\t\t\t) : null }\n\t\t\t<div className=\"mailpoet-send-preview-modal-footer\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t'send_preview_email_modal_close_button_clicked'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tcloseCallback();\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Close', 'mailpoet' ) }\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\thandleSendPreviewEmail();\n\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t'send_preview_email_modal_send_test_email_button_clicked'\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tisSendingPreviewEmail || ! isEmail( previewToEmail )\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{ isSendingPreviewEmail\n\t\t\t\t\t\t? __( 'Sending', 'mailpoet' )\n\t\t\t\t\t\t: __( 'Send test email', 'mailpoet' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n\nexport const SendPreviewEmail = memo( RawSendPreviewEmail );\n","/**\n * External dependencies\n */\nimport { hasBlockSupport, getBlockSupport } from '@wordpress/blocks';\nimport { Fill, Notice } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\nexport const hasBackgroundImageSupport = ( nameOrType: string ) => {\n\tconst backgroundSupport = getBlockSupport(\n\t\tnameOrType, // @ts-expect-error not yet supported in the types\n\t\t'background'\n\t) as Record< string, boolean >;\n\n\treturn backgroundSupport && backgroundSupport?.backgroundImage !== false;\n};\n\nexport function BlockCompatibilityWarnings(): JSX.Element {\n\t// Select the currently selected block\n\tconst selectedBlock = useSelect(\n\t\t( sel ) => sel( 'core/block-editor' ).getSelectedBlock(),\n\t\t[]\n\t);\n\n\t// Check if the selected block has enabled border configuration\n\tconst hasBorderSupport =\n\t\thasBlockSupport(\n\t\t\tselectedBlock?.name,\n\t\t\t// @ts-expect-error Border is not yet supported in the types\n\t\t\t'border',\n\t\t\tfalse\n\t\t) ||\n\t\t// We can remove the check for __experimentalBorder after we support WordPress 6.8+.\n\t\thasBlockSupport(\n\t\t\tselectedBlock?.name,\n\t\t\t// @ts-expect-error Border is not yet supported in the types\n\t\t\t'__experimentalBorder',\n\t\t\tfalse\n\t\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ hasBorderSupport && (\n\t\t\t\t<Fill name=\"InspectorControlsBorder\">\n\t\t\t\t\t<Notice\n\t\t\t\t\t\tclassName=\"mailpoet__grid-full-width\"\n\t\t\t\t\t\tstatus=\"warning\"\n\t\t\t\t\t\tisDismissible={ false }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Border display may vary or be unsupported in some email clients.',\n\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Notice>\n\t\t\t\t</Fill>\n\t\t\t) }\n\t\t\t{ hasBackgroundImageSupport( selectedBlock?.name ) && (\n\t\t\t\t<Fill name=\"InspectorControlsBackground\">\n\t\t\t\t\t<Notice\n\t\t\t\t\t\tclassName=\"mailpoet__grid-full-width\"\n\t\t\t\t\t\tstatus=\"warning\"\n\t\t\t\t\t\tisDismissible={ false }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Select a background color for email clients that do not support background images.',\n\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Notice>\n\t\t\t\t</Fill>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { PanelBody } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport { recordEvent } from '../../events';\nimport { RichTextWithButton } from '../personalization-tags/rich-text-with-button';\n\nconst SidebarExtensionComponent = applyFilters(\n\t'mailpoet_email_editor_setting_sidebar_extension_component',\n\tRichTextWithButton\n) as () => JSX.Element;\n\nexport function DetailsPanel() {\n\treturn (\n\t\t<PanelBody\n\t\t\ttitle={ __( 'Details', 'mailpoet' ) }\n\t\t\tclassName=\"mailpoet-email-editor__settings-panel\"\n\t\t\tonToggle={ ( data ) =>\n\t\t\t\trecordEvent( 'details_panel_body_toggle', { opened: data } )\n\t\t\t}\n\t\t>\n\t\t\t<>{ <SidebarExtensionComponent /> }</>\n\t\t</PanelBody>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, Flex, FlexItem, Modal } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { recordEvent, recordEventOnce } from '../../events';\n\nexport function EditTemplateModal( { close } ) {\n\trecordEventOnce( 'edit_template_modal_opened' );\n\n\tconst { onNavigateToEntityRecord, template } = useSelect( ( sel ) => {\n\t\tconst { getEditorSettings } = sel( editorStore );\n\t\tconst editorSettings = getEditorSettings();\n\t\treturn {\n\t\t\tonNavigateToEntityRecord:\n\t\t\t\t// @ts-expect-error onNavigateToEntityRecord type is not defined\n\t\t\t\teditorSettings.onNavigateToEntityRecord,\n\t\t\ttemplate: sel( storeName ).getCurrentTemplate(),\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Modal size=\"medium\" onRequestClose={ close } __experimentalHideHeader>\n\t\t\t<p>\n\t\t\t\t{ __(\n\t\t\t\t\t'Note that the same template can be used by multiple emails, so any changes made here may affect other emails on the site. To switch back to editing the page content click the Back button in the toolbar.',\n\t\t\t\t\t'mailpoet'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<Flex justify={ 'end' }>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t'edit_template_modal_cancel_button_clicked'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tclose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Cancel', 'mailpoet' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t'edit_template_modal_continue_button_clicked',\n\t\t\t\t\t\t\t\t{ templateId: template.id }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tonNavigateToEntityRecord( {\n\t\t\t\t\t\t\t\tpostId: template.id,\n\t\t\t\t\t\t\t\tpostType: 'wp_template',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tdisabled={ ! template.id }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Continue', 'mailpoet' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</Modal>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { Panel } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { DetailsPanel } from './details-panel';\nimport { EmailTypeInfo } from './email-type-info';\n\nexport function EmailSettings() {\n\treturn (\n\t\t<Panel>\n\t\t\t<EmailTypeInfo />\n\t\t\t<DetailsPanel />\n\t\t</Panel>\n\t);\n}\n","/**\n * External dependencies\n */\nimport {\n\tPanel,\n\tPanelBody,\n\tPanelRow,\n\tFlex,\n\tFlexItem,\n\tDropdownMenu,\n\tMenuItem,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { Icon, megaphone } from '@wordpress/icons';\nimport { useSelect } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { EditTemplateModal } from './edit-template-modal';\nimport { SelectTemplateModal } from '../template-select';\nimport { recordEvent } from '../../events';\n\nexport function EmailTypeInfo() {\n\tconst { template, currentEmailContent } = useSelect(\n\t\t( select ) => ( {\n\t\t\ttemplate: select( storeName ).getCurrentTemplate(),\n\t\t\tcurrentEmailContent: select( storeName ).getEditedEmailContent(),\n\t\t} ),\n\t\t[]\n\t);\n\tconst [ isEditTemplateModalOpen, setEditTemplateModalOpen ] =\n\t\tuseState( false );\n\tconst [ isSelectTemplateModalOpen, setSelectTemplateModalOpen ] =\n\t\tuseState( false );\n\n\treturn (\n\t\t<>\n\t\t\t<Panel className=\"mailpoet-email-sidebar__email-type-info\">\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t<span className=\"mailpoet-email-type-info__icon\">\n\t\t\t\t\t\t\t<Icon icon={ megaphone } />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div className=\"mailpoet-email-type-info__content\">\n\t\t\t\t\t\t\t<h2>{ __( 'Newsletter', 'mailpoet' ) }</h2>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Send or schedule a newsletter to connect with your subscribers.',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</PanelRow>\n\t\t\t\t\t{ template && (\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<Flex justify={ 'start' }>\n\t\t\t\t\t\t\t\t<FlexItem className=\"editor-post-panel__row-label\">\n\t\t\t\t\t\t\t\t\t{ __( 'Template', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\t\t\t\ticon={ null }\n\t\t\t\t\t\t\t\t\t\ttext={ template?.title }\n\t\t\t\t\t\t\t\t\t\ttoggleProps={ { variant: 'tertiary' } }\n\t\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t\t'Template actions',\n\t\t\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tonToggle={ ( isOpen ) =>\n\t\t\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t\t'sidebar_template_actions_clicked',\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentTemplate:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttemplate?.title,\n\t\t\t\t\t\t\t\t\t\t\t\t\tisOpen,\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'sidebar_template_actions_edit_template_clicked'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetEditTemplateModalOpen(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Edit template',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'sidebar_template_actions_swap_template_clicked'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectTemplateModalOpen(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Swap template',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</Panel>\n\t\t\t{ isEditTemplateModalOpen && (\n\t\t\t\t<EditTemplateModal\n\t\t\t\t\tclose={ () => {\n\t\t\t\t\t\trecordEvent( 'edit_template_modal_closed' );\n\t\t\t\t\t\treturn setEditTemplateModalOpen( false );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ isSelectTemplateModalOpen && (\n\t\t\t\t<SelectTemplateModal\n\t\t\t\t\tonSelectCallback={ () =>\n\t\t\t\t\t\tsetSelectTemplateModalOpen( false )\n\t\t\t\t\t}\n\t\t\t\t\tcloseCallback={ () => setSelectTemplateModalOpen( false ) }\n\t\t\t\t\tpreviewContent={ currentEmailContent }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport * as React from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { mainSidebarDocumentTab, mainSidebarBlockTab } from '../../store';\nimport { useEditorMode } from '../../hooks';\nimport { Tabs } from '../../private-apis';\n\nexport function HeaderTabs( _, ref ) {\n\tconst [ editorMode ] = useEditorMode();\n\treturn (\n\t\t<Tabs.TabList ref={ ref }>\n\t\t\t<Tabs.Tab tabId={ mainSidebarDocumentTab }>\n\t\t\t\t{ editorMode === 'template'\n\t\t\t\t\t? __( 'Template', 'mailpoet' )\n\t\t\t\t\t: __( 'Email', 'mailpoet' ) }\n\t\t\t</Tabs.Tab>\n\t\t\t<Tabs.Tab tabId={ mainSidebarBlockTab }>\n\t\t\t\t{ __( 'Block', 'mailpoet' ) }\n\t\t\t</Tabs.Tab>\n\t\t</Tabs.TabList>\n\t);\n}\n\nexport const Header = React.forwardRef( HeaderTabs );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useContext, useRef, useEffect, memo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tBlockInspector,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { ComplementaryArea } from '@wordpress/interface';\nimport { drawerRight } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport {\n\tstoreName,\n\tmainSidebarDocumentTab,\n\tmainSidebarBlockTab,\n\tmainSidebarId,\n} from '../../store';\nimport { Header } from './header';\nimport { EmailSettings } from './email-settings';\nimport { TemplateSettings } from './template-settings';\nimport { useEditorMode } from '../../hooks';\nimport { Tabs } from '../../private-apis';\n\nimport './index.scss';\nimport { recordEvent } from '../../events';\n\ntype Props = React.ComponentProps< typeof ComplementaryArea >;\n\nfunction SidebarContent( props: Props ) {\n\tconst [ editorMode ] = useEditorMode();\n\n\tconst tabListRef = useRef( null );\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\tconst tabsContextValue = useContext( Tabs.Context );\n\n\treturn (\n\t\t<ComplementaryArea\n\t\t\tidentifier={ mainSidebarId }\n\t\t\tcloseLabel={ __( 'Close sidebar', 'mailpoet' ) }\n\t\t\theaderClassName=\"editor-sidebar__panel-tabs\"\n\t\t\tclassName=\"edit-post-sidebar\"\n\t\t\theader={\n\t\t\t\t<Tabs.Context.Provider value={ tabsContextValue }>\n\t\t\t\t\t<Header ref={ tabListRef } />\n\t\t\t\t</Tabs.Context.Provider>\n\t\t\t}\n\t\t\ticon={ drawerRight }\n\t\t\tscope={ storeName }\n\t\t\tsmallScreenTitle={ __( 'No title', 'mailpoet' ) }\n\t\t\tisActiveByDefault\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<Tabs.Context.Provider value={ tabsContextValue }>\n\t\t\t\t<Tabs.TabPanel tabId={ mainSidebarDocumentTab }>\n\t\t\t\t\t{ editorMode === 'template' ? (\n\t\t\t\t\t\t<TemplateSettings />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<EmailSettings />\n\t\t\t\t\t) }\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t<Tabs.TabPanel tabId={ mainSidebarBlockTab }>\n\t\t\t\t\t<BlockInspector />\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t</Tabs.Context.Provider>\n\t\t</ComplementaryArea>\n\t);\n}\n\nfunction RawSidebar( props: Props ) {\n\tconst { toggleSettingsSidebarActiveTab } = useDispatch( storeName );\n\tconst { activeTab, selectedBlockId } = useSelect(\n\t\t( select ) => ( {\n\t\t\tactiveTab: select( storeName ).getSettingsSidebarActiveTab(),\n\t\t\tselectedBlockId:\n\t\t\t\tselect( blockEditorStore ).getSelectedBlockClientId(),\n\t\t} ),\n\t\t[]\n\t);\n\n\t// Switch tab based on selected block.\n\tuseEffect( () => {\n\t\tif ( selectedBlockId ) {\n\t\t\tvoid toggleSettingsSidebarActiveTab( mainSidebarBlockTab );\n\t\t} else {\n\t\t\tvoid toggleSettingsSidebarActiveTab( mainSidebarDocumentTab );\n\t\t}\n\t}, [ selectedBlockId, toggleSettingsSidebarActiveTab ] );\n\n\treturn (\n\t\t<Tabs\n\t\t\tselectedTabId={ activeTab || mainSidebarDocumentTab }\n\t\t\tonSelect={ ( key ) => {\n\t\t\t\trecordEvent( 'sidebar_tab_selected', { tabKey: key } );\n\t\t\t\treturn toggleSettingsSidebarActiveTab( key as string );\n\t\t\t} }\n\t\t>\n\t\t\t<SidebarContent { ...props } />\n\t\t</Tabs>\n\t);\n}\n\nexport const Sidebar = memo( RawSidebar );\n","/**\n * External dependencies\n */\nimport {\n\tPanel,\n\tPanelBody,\n\tPanelRow,\n\tDropdownMenu,\n\tMenuItem,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { Icon, layout, moreVertical } from '@wordpress/icons';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { TemplateRevertModal } from './template-revert-modal';\n\nexport function TemplateInfo() {\n\tconst template = useSelect(\n\t\t( select ) => select( storeName ).getCurrentTemplate(),\n\t\t[]\n\t);\n\tconst [ isResetConfirmOpen, setResetConfirmOpen ] = useState( false );\n\n\t// @ts-expect-error Todo template type is not defined\n\tconst description = template?.description || '';\n\n\treturn (\n\t\t<>\n\t\t\t<Panel className=\"mailpoet-email-sidebar__email-type-info\">\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t<span className=\"mailpoet-email-type-info__icon\">\n\t\t\t\t\t\t\t<Icon icon={ layout } />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div className=\"mailpoet-email-type-info__content\">\n\t\t\t\t\t\t\t<div className=\"mailpoet-email-type-info__content_heading\">\n\t\t\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\t\t\t{ template?.title ||\n\t\t\t\t\t\t\t\t\t\t__( 'Template', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Template actions',\n\t\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetResetConfirmOpen( true );\n\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\tinfo={ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Reset to default to clear all customizations',\n\t\t\t\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Reset', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{ description && <p>{ description || '' }</p> }\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Edit this template to be used across multiple emails.',\n\t\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</PanelRow>\n\t\t\t\t</PanelBody>\n\t\t\t</Panel>\n\t\t\t{ isResetConfirmOpen && (\n\t\t\t\t<TemplateRevertModal\n\t\t\t\t\tclose={ () => {\n\t\t\t\t\t\tsetResetConfirmOpen( false );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, Flex, FlexItem, Modal } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\n\nexport function TemplateRevertModal( { close } ) {\n\tconst template = useSelect(\n\t\t( select ) => select( storeName ).getCurrentTemplate(),\n\t\t[]\n\t);\n\tconst { revertAndSaveTemplate } = useDispatch( storeName );\n\n\treturn (\n\t\t<Modal size=\"medium\" onRequestClose={ close } __experimentalHideHeader>\n\t\t\t<p>\n\t\t\t\t{ __(\n\t\t\t\t\t'This will clear ANY and ALL template customization. All updates made to the template will be lost. Do you want to proceed?',\n\t\t\t\t\t'mailpoet'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<Flex justify={ 'end' }>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button variant=\"tertiary\" onClick={ close }>\n\t\t\t\t\t\t{ __( 'Cancel', 'mailpoet' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tonClick={ async () => {\n\t\t\t\t\t\t\tawait revertAndSaveTemplate( template );\n\t\t\t\t\t\t\tclose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Reset', 'mailpoet' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</Modal>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { Panel } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { TemplateInfo } from './template-info';\n\nexport function TemplateSettings() {\n\treturn (\n\t\t<Panel>\n\t\t\t<TemplateInfo />\n\t\t</Panel>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { isEqual } from 'lodash';\nimport {\n\t// We can remove the ts-expect-error comments once the types are available.\n\t// @ts-expect-error TS7016: Could not find a declaration file for module '@wordpress/block-editor'.\n\t__experimentalSpacingSizesControl as SpacingSizesControl, // eslint-disable-line\n\tuseSettings,\n} from '@wordpress/block-editor';\n// eslint-disable-next-line\nimport {\n\t__experimentalToolsPanel as ToolsPanel, // eslint-disable-line\n\t__experimentalToolsPanelItem as ToolsPanelItem, // eslint-disable-line\n\t__experimentalUseCustomUnits as useCustomUnits, // eslint-disable-line\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { useEmailStyles } from '../../../hooks';\nimport { recordEvent, debouncedRecordEvent } from '../../../events';\n\nexport function DimensionsPanel() {\n\tconst [ availableUnits ] = useSettings( 'spacing.units' ) as [ string[] ];\n\tconst units = useCustomUnits( {\n\t\tavailableUnits,\n\t} );\n\tconst { styles, defaultStyles, updateStyleProp } = useEmailStyles();\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Dimensions', 'mailpoet' ) }\n\t\t\tresetAll={ () => {\n\t\t\t\tupdateStyleProp( [ 'spacing' ], defaultStyles.spacing );\n\t\t\t\trecordEvent(\n\t\t\t\t\t'styles_sidebar_screen_layout_dimensions_reset_all_selected'\n\t\t\t\t);\n\t\t\t} }\n\t\t>\n\t\t\t<ToolsPanelItem\n\t\t\t\tisShownByDefault\n\t\t\t\thasValue={ () =>\n\t\t\t\t\t! isEqual(\n\t\t\t\t\t\tstyles.spacing.padding,\n\t\t\t\t\t\tdefaultStyles.spacing.padding\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tlabel={ __( 'Padding', 'mailpoet' ) }\n\t\t\t\tonDeselect={ () => {\n\t\t\t\t\tupdateStyleProp(\n\t\t\t\t\t\t[ 'spacing', 'padding' ],\n\t\t\t\t\t\tdefaultStyles.spacing.padding\n\t\t\t\t\t);\n\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t'styles_sidebar_screen_layout_dimensions_padding_reset_clicked'\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\tclassName=\"tools-panel-item-spacing\"\n\t\t\t>\n\t\t\t\t<SpacingSizesControl\n\t\t\t\t\tallowReset\n\t\t\t\t\tvalues={ styles.spacing.padding }\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tupdateStyleProp( [ 'spacing', 'padding' ], value );\n\t\t\t\t\t\tdebouncedRecordEvent(\n\t\t\t\t\t\t\t'styles_sidebar_screen_layout_dimensions_padding_updated',\n\t\t\t\t\t\t\t{ value }\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\tlabel={ __( 'Padding', 'mailpoet' ) }\n\t\t\t\t\tsides={ [\n\t\t\t\t\t\t'horizontal',\n\t\t\t\t\t\t'vertical',\n\t\t\t\t\t\t'top',\n\t\t\t\t\t\t'left',\n\t\t\t\t\t\t'right',\n\t\t\t\t\t\t'bottom',\n\t\t\t\t\t] }\n\t\t\t\t\tunits={ units }\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\t\t\t<ToolsPanelItem\n\t\t\t\tisShownByDefault\n\t\t\t\tlabel={ __( 'Block spacing', 'mailpoet' ) }\n\t\t\t\thasValue={ () =>\n\t\t\t\t\tstyles.spacing.blockGap !== defaultStyles.spacing.blockGap\n\t\t\t\t}\n\t\t\t\tonDeselect={ () => {\n\t\t\t\t\tupdateStyleProp(\n\t\t\t\t\t\t[ 'spacing', 'blockGap' ],\n\t\t\t\t\t\tdefaultStyles.spacing.blockGap\n\t\t\t\t\t);\n\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t'styles_sidebar_screen_layout_dimensions_block_spacing_reset_clicked'\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\tclassName=\"tools-panel-item-spacing\"\n\t\t\t>\n\t\t\t\t<SpacingSizesControl\n\t\t\t\t\tlabel={ __( 'Block spacing', 'mailpoet' ) }\n\t\t\t\t\tmin={ 0 }\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tupdateStyleProp( [ 'spacing', 'blockGap' ], value.top );\n\t\t\t\t\t\tdebouncedRecordEvent(\n\t\t\t\t\t\t\t'styles_sidebar_screen_layout_dimensions_block_spacing_updated',\n\t\t\t\t\t\t\t{ value }\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\tshowSideInLabel={ false }\n\t\t\t\t\tsides={ [ 'top' ] } // Use 'top' as the shorthand property in non-axial configurations.\n\t\t\t\t\tvalues={ { top: styles.spacing.blockGap } }\n\t\t\t\t\tallowReset\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\t\t</ToolsPanel>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\nimport {\n\tFontSizePicker,\n\t__experimentalToolsPanel as ToolsPanel, // eslint-disable-line\n\t__experimentalToolsPanelItem as ToolsPanelItem, // eslint-disable-line\n} from '@wordpress/components';\n// eslint-disable-next-line\nimport {\n\tuseSettings,\n\t// We can remove the ts-expect-error comments once the types are available.\n\t// @see packages/block-editor/src/components/index.js\n\t// @ts-expect-error TS7016: Could not find a declaration file for module '@wordpress/block-editor'.\n\t__experimentalFontAppearanceControl as FontAppearanceControl, // eslint-disable-line\n\t// @ts-expect-error TS7016: Could not find a declaration file for module '@wordpress/block-editor'.\n\t__experimentalLetterSpacingControl as LetterSpacingControl, // eslint-disable-line\n\t// @ts-expect-error TS7016: Could not find a declaration file for module '@wordpress/block-editor'.\n\t__experimentalFontFamilyControl as FontFamilyControl, // eslint-disable-line\n\t// @ts-expect-error TS7016: Could not find a declaration file for module '@wordpress/block-editor'.\n\tLineHeightControl,\n\t// @ts-expect-error TS7016: Could not find a declaration file for module '@wordpress/block-editor'.\n\t__experimentalTextDecorationControl as TextDecorationControl, // eslint-disable-line\n\t// @ts-expect-error TS7016: Could not find a declaration file for module '@wordpress/block-editor'.\n\t__experimentalTextTransformControl as TextTransformControl, // eslint-disable-line\n} from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { useEmailStyles } from '../../../hooks';\nimport { getElementStyles } from '../utils';\nimport { recordEvent, debouncedRecordEvent } from '../../../events';\n\nexport const DEFAULT_CONTROLS = {\n\tfontFamily: true,\n\tfontSize: true,\n\tfontAppearance: true,\n\tlineHeight: true,\n\tletterSpacing: false,\n\ttextTransform: false,\n\ttextDecoration: false,\n\twritingMode: true,\n\ttextColumns: true,\n};\n\nexport function TypographyElementPanel( {\n\telement,\n\theadingLevel,\n\tdefaultControls = DEFAULT_CONTROLS,\n}: {\n\telement: string;\n\theadingLevel: string;\n\tdefaultControls?: typeof DEFAULT_CONTROLS;\n} ) {\n\tconst [ fontSizes, blockLevelFontFamilies ] = useSettings(\n\t\t'typography.fontSizes',\n\t\t'typography.fontFamilies'\n\t);\n\n\t// Ref: https://github.com/WordPress/gutenberg/issues/59778\n\tconst fontFamilies = blockLevelFontFamilies?.default || [];\n\tconst { styles, defaultStyles, updateStyleProp } = useEmailStyles();\n\tconst elementStyles = getElementStyles( styles, element, headingLevel );\n\tconst defaultElementStyles = getElementStyles(\n\t\tdefaultStyles,\n\t\telement,\n\t\theadingLevel\n\t);\n\tconst {\n\t\tfontFamily,\n\t\tfontSize,\n\t\tfontStyle,\n\t\tfontWeight,\n\t\tlineHeight,\n\t\tletterSpacing,\n\t\ttextDecoration,\n\t\ttextTransform,\n\t} = elementStyles.typography;\n\n\tconst {\n\t\tfontFamily: defaultFontFamily,\n\t\tfontSize: defaultFontSize,\n\t\tfontStyle: defaultFontStyle,\n\t\tfontWeight: defaultFontWeight,\n\t\tlineHeight: defaultLineHeight,\n\t\tletterSpacing: defaultLetterSpacing,\n\t\ttextDecoration: defaultTextDecoration,\n\t\ttextTransform: defaultTextTransform,\n\t} = defaultElementStyles.typography;\n\n\tconst hasFontFamily = () => fontFamily !== defaultFontFamily;\n\tconst hasFontSize = () => fontSize !== defaultFontSize;\n\tconst hasFontAppearance = () =>\n\t\tfontWeight !== defaultFontWeight || fontStyle !== defaultFontStyle;\n\tconst hasLineHeight = () => lineHeight !== defaultLineHeight;\n\tconst hasLetterSpacing = () => letterSpacing !== defaultLetterSpacing;\n\tconst hasTextDecoration = () => textDecoration !== defaultTextDecoration;\n\tconst hasTextTransform = () => textTransform !== defaultTextTransform;\n\tconst showToolFontSize =\n\t\telement !== 'heading' || headingLevel !== 'heading';\n\n\tconst updateElementStyleProp = useCallback(\n\t\t( path, newValue ) => {\n\t\t\tif ( element === 'heading' ) {\n\t\t\t\tupdateStyleProp(\n\t\t\t\t\t[ 'elements', headingLevel, ...path ],\n\t\t\t\t\tnewValue\n\t\t\t\t);\n\t\t\t} else if ( element === 'text' ) {\n\t\t\t\tupdateStyleProp( [ ...path ], newValue );\n\t\t\t} else {\n\t\t\t\tupdateStyleProp( [ 'elements', element, ...path ], newValue );\n\t\t\t}\n\t\t},\n\t\t[ element, updateStyleProp, headingLevel ]\n\t);\n\n\tconst setLetterSpacing = ( newValue ) => {\n\t\tupdateElementStyleProp( [ 'typography', 'letterSpacing' ], newValue );\n\t\tdebouncedRecordEvent(\n\t\t\t'styles_sidebar_screen_typography_element_panel_set_letter_spacing',\n\t\t\t{\n\t\t\t\telement,\n\t\t\t\tnewValue,\n\t\t\t\tselectedDefaultLetterSpacing: newValue === defaultLetterSpacing,\n\t\t\t}\n\t\t);\n\t};\n\n\tconst setLineHeight = ( newValue ) => {\n\t\tupdateElementStyleProp( [ 'typography', 'lineHeight' ], newValue );\n\t\tdebouncedRecordEvent(\n\t\t\t'styles_sidebar_screen_typography_element_panel_set_line_height',\n\t\t\t{\n\t\t\t\telement,\n\t\t\t\tnewValue,\n\t\t\t\tselectedDefaultLineHeight: newValue === defaultLineHeight,\n\t\t\t}\n\t\t);\n\t};\n\n\tconst setFontSize = ( newValue ) => {\n\t\tupdateElementStyleProp( [ 'typography', 'fontSize' ], newValue );\n\t\tdebouncedRecordEvent(\n\t\t\t'styles_sidebar_screen_typography_element_panel_set_font_size',\n\t\t\t{\n\t\t\t\telement,\n\t\t\t\theadingLevel,\n\t\t\t\tnewValue,\n\t\t\t\tselectedDefaultFontSize: newValue === defaultFontSize,\n\t\t\t}\n\t\t);\n\t};\n\n\tconst setFontFamily = ( newValue ) => {\n\t\tupdateElementStyleProp( [ 'typography', 'fontFamily' ], newValue );\n\t\tdebouncedRecordEvent(\n\t\t\t'styles_sidebar_screen_typography_element_panel_set_font_family',\n\t\t\t{\n\t\t\t\telement,\n\t\t\t\tnewValue,\n\t\t\t\tselectedDefaultFontFamily: newValue === defaultFontFamily,\n\t\t\t}\n\t\t);\n\t};\n\n\tconst setTextDecoration = ( newValue ) => {\n\t\tupdateElementStyleProp( [ 'typography', 'textDecoration' ], newValue );\n\t\tdebouncedRecordEvent(\n\t\t\t'styles_sidebar_screen_typography_element_panel_set_text_decoration',\n\t\t\t{\n\t\t\t\telement,\n\t\t\t\tnewValue,\n\t\t\t\tselectedDefaultTextDecoration:\n\t\t\t\t\tnewValue === defaultTextDecoration,\n\t\t\t}\n\t\t);\n\t};\n\n\tconst setTextTransform = ( newValue ) => {\n\t\tupdateElementStyleProp( [ 'typography', 'textTransform' ], newValue );\n\t\tdebouncedRecordEvent(\n\t\t\t'styles_sidebar_screen_typography_element_panel_set_text_transform',\n\t\t\t{\n\t\t\t\telement,\n\t\t\t\tnewValue,\n\t\t\t\tselectedDefaultTextTransform: newValue === defaultTextTransform,\n\t\t\t}\n\t\t);\n\t};\n\n\tconst setFontAppearance = ( {\n\t\tfontStyle: newFontStyle,\n\t\tfontWeight: newFontWeight,\n\t} ) => {\n\t\tupdateElementStyleProp( [ 'typography', 'fontStyle' ], newFontStyle );\n\t\tupdateElementStyleProp( [ 'typography', 'fontWeight' ], newFontWeight );\n\t\tdebouncedRecordEvent(\n\t\t\t'styles_sidebar_screen_typography_element_panel_set_font_appearance',\n\t\t\t{\n\t\t\t\telement,\n\t\t\t\tnewFontStyle,\n\t\t\t\tnewFontWeight,\n\t\t\t\tselectedDefaultFontStyle: newFontStyle === defaultFontStyle,\n\t\t\t\tselectedDefaultFontWeight: newFontWeight === defaultFontWeight,\n\t\t\t}\n\t\t);\n\t};\n\n\tconst resetAll = () => {\n\t\tupdateElementStyleProp(\n\t\t\t[ 'typography' ],\n\t\t\tdefaultElementStyles.typography\n\t\t);\n\t\trecordEvent(\n\t\t\t'styles_sidebar_screen_typography_element_panel_reset_all_styles_selected',\n\t\t\t{\n\t\t\t\telement,\n\t\t\t\theadingLevel,\n\t\t\t}\n\t\t);\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Typography', 'mailpoet' ) }\n\t\t\tresetAll={ resetAll }\n\t\t>\n\t\t\t<ToolsPanelItem\n\t\t\t\tlabel={ __( 'Font family', 'mailpoet' ) }\n\t\t\t\thasValue={ hasFontFamily }\n\t\t\t\tonDeselect={ () => setFontFamily( defaultFontFamily ) }\n\t\t\t\tisShownByDefault={ defaultControls.fontFamily }\n\t\t\t>\n\t\t\t\t<FontFamilyControl\n\t\t\t\t\tvalue={ fontFamily }\n\t\t\t\t\tonChange={ setFontFamily }\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\tfontFamilies={ fontFamilies }\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\t\t\t{ showToolFontSize && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Font size', 'mailpoet' ) }\n\t\t\t\t\thasValue={ hasFontSize }\n\t\t\t\t\tonDeselect={ () => setFontSize( defaultFontSize ) }\n\t\t\t\t\tisShownByDefault={ defaultControls.fontSize }\n\t\t\t\t>\n\t\t\t\t\t<FontSizePicker\n\t\t\t\t\t\tvalue={ fontSize }\n\t\t\t\t\t\tonChange={ setFontSize }\n\t\t\t\t\t\tfontSizes={ fontSizes }\n\t\t\t\t\t\tdisableCustomFontSizes={ false }\n\t\t\t\t\t\twithReset={ false }\n\t\t\t\t\t\twithSlider\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t<ToolsPanelItem\n\t\t\t\tclassName=\"single-column\"\n\t\t\t\tlabel={ __( 'Appearance', 'mailpoet' ) }\n\t\t\t\thasValue={ hasFontAppearance }\n\t\t\t\tonDeselect={ () => {\n\t\t\t\t\tsetFontAppearance( {\n\t\t\t\t\t\tfontStyle: defaultFontStyle,\n\t\t\t\t\t\tfontWeight: defaultFontWeight,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\tisShownByDefault={ defaultControls.fontAppearance }\n\t\t\t>\n\t\t\t\t<FontAppearanceControl\n\t\t\t\t\tvalue={ {\n\t\t\t\t\t\tfontStyle,\n\t\t\t\t\t\tfontWeight,\n\t\t\t\t\t} }\n\t\t\t\t\tonChange={ setFontAppearance }\n\t\t\t\t\thasFontStyles\n\t\t\t\t\thasFontWeights\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\t\t\t<ToolsPanelItem\n\t\t\t\tclassName=\"single-column\"\n\t\t\t\tlabel={ __( 'Line height', 'mailpoet' ) }\n\t\t\t\thasValue={ hasLineHeight }\n\t\t\t\tonDeselect={ () => setLineHeight( defaultLineHeight ) }\n\t\t\t\tisShownByDefault={ defaultControls.lineHeight }\n\t\t\t>\n\t\t\t\t<LineHeightControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t\tvalue={ lineHeight }\n\t\t\t\t\tonChange={ setLineHeight }\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\t\t\t<ToolsPanelItem\n\t\t\t\tclassName=\"single-column\"\n\t\t\t\tlabel={ __( 'Letter spacing', 'mailpoet' ) }\n\t\t\t\thasValue={ hasLetterSpacing }\n\t\t\t\tonDeselect={ () => setLetterSpacing( defaultLetterSpacing ) }\n\t\t\t\tisShownByDefault={ defaultControls.letterSpacing }\n\t\t\t>\n\t\t\t\t<LetterSpacingControl\n\t\t\t\t\tvalue={ letterSpacing }\n\t\t\t\t\tonChange={ setLetterSpacing }\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\t\t\t<ToolsPanelItem\n\t\t\t\tclassName=\"single-column\"\n\t\t\t\tlabel={ __( 'Text decoration', 'mailpoet' ) }\n\t\t\t\thasValue={ hasTextDecoration }\n\t\t\t\tonDeselect={ () => setTextDecoration( defaultTextDecoration ) }\n\t\t\t\tisShownByDefault={ defaultControls.textDecoration }\n\t\t\t>\n\t\t\t\t<TextDecorationControl\n\t\t\t\t\tvalue={ textDecoration }\n\t\t\t\t\tonChange={ setTextDecoration }\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\t\t\t<ToolsPanelItem\n\t\t\t\tlabel={ __( 'Letter case', 'mailpoet' ) }\n\t\t\t\thasValue={ hasTextTransform }\n\t\t\t\tonDeselect={ () => setTextTransform( defaultTextTransform ) }\n\t\t\t\tisShownByDefault={ defaultControls.textTransform }\n\t\t\t>\n\t\t\t\t<TextTransformControl\n\t\t\t\t\tvalue={ textTransform }\n\t\t\t\t\tonChange={ setTextTransform }\n\t\t\t\t\tshowNone\n\t\t\t\t\tisBlock\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\t\t</ToolsPanel>\n\t);\n}\n\nexport default TypographyElementPanel;\n","/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\t__experimentalItemGroup as ItemGroup, // eslint-disable-line\n\t__experimentalItem as Item, // eslint-disable-line\n\t__experimentalVStack as VStack, // eslint-disable-line\n\t__experimentalHStack as HStack, // eslint-disable-line\n\t__experimentalHeading as Heading, // eslint-disable-line\n\t__experimentalNavigatorButton as NavigatorButton, // eslint-disable-line\n\tFlexItem,\n\tCard,\n\tCardBody,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { useEmailStyles } from '../../../hooks';\nimport { getElementStyles } from '../utils';\nimport { recordEvent } from '../../../events';\n\nfunction ElementItem( { element, label }: { element: string; label: string } ) {\n\tconst { styles } = useEmailStyles();\n\tconst elementStyles = getElementStyles( styles, element, null, true );\n\n\tconst {\n\t\tfontFamily,\n\t\tfontStyle,\n\t\tfontWeight,\n\t\tletterSpacing,\n\t\ttextDecoration,\n\t\ttextTransform,\n\t} = elementStyles.typography;\n\n\tconst textColor = elementStyles.color?.text || 'inherit';\n\tconst background = elementStyles.color?.background || '#f0f0f0';\n\tconst navigationButtonLabel = sprintf(\n\t\t// translators: %s: is a subset of Typography, e.g., 'text' or 'links'.\n\t\t__( 'Typography %s styles', 'mailpoet' ),\n\t\tlabel\n\t);\n\n\treturn (\n\t\t<Item>\n\t\t\t<NavigatorButton\n\t\t\t\tpath={ `/typography/${ element }` }\n\t\t\t\taria-label={ navigationButtonLabel }\n\t\t\t\tonClick={ () =>\n\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t'styles_sidebar_screen_typography_button_click',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\tpath: `typography/${ element }`,\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<HStack justify=\"flex-start\">\n\t\t\t\t\t<FlexItem\n\t\t\t\t\t\tclassName=\"edit-site-global-styles-screen-typography__indicator\"\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tfontFamily: fontFamily ?? 'serif',\n\t\t\t\t\t\t\tbackground,\n\t\t\t\t\t\t\tcolor: textColor,\n\t\t\t\t\t\t\tfontStyle: fontStyle ?? 'normal',\n\t\t\t\t\t\t\tfontWeight: fontWeight ?? 'normal',\n\t\t\t\t\t\t\tletterSpacing: letterSpacing ?? 'normal',\n\t\t\t\t\t\t\ttextDecoration:\n\t\t\t\t\t\t\t\ttextDecoration ??\n\t\t\t\t\t\t\t\t( element === 'link' ? 'underline' : 'none' ),\n\t\t\t\t\t\t\ttextTransform: textTransform ?? 'none',\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\tAa\n\t\t\t\t\t</FlexItem>\n\t\t\t\t\t<FlexItem>{ label }</FlexItem>\n\t\t\t\t</HStack>\n\t\t\t</NavigatorButton>\n\t\t</Item>\n\t);\n}\n\nexport function TypographyPanel() {\n\treturn (\n\t\t<Card size=\"small\" variant=\"primary\" isBorderless>\n\t\t\t<CardBody>\n\t\t\t\t<VStack spacing={ 3 }>\n\t\t\t\t\t<Heading\n\t\t\t\t\t\tlevel={ 3 }\n\t\t\t\t\t\tclassName=\"edit-site-global-styles-subtitle\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Elements', 'mailpoet' ) }\n\t\t\t\t\t</Heading>\n\t\t\t\t\t<ItemGroup isBordered isSeparated size=\"small\">\n\t\t\t\t\t\t<ElementItem\n\t\t\t\t\t\t\telement=\"text\"\n\t\t\t\t\t\t\tlabel={ __( 'Text', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ElementItem\n\t\t\t\t\t\t\telement=\"link\"\n\t\t\t\t\t\t\tlabel={ __( 'Links', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ElementItem\n\t\t\t\t\t\t\telement=\"heading\"\n\t\t\t\t\t\t\tlabel={ __( 'Headings', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ElementItem\n\t\t\t\t\t\t\telement=\"button\"\n\t\t\t\t\t\t\tlabel={ __( 'Buttons', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ItemGroup>\n\t\t\t\t</VStack>\n\t\t\t</CardBody>\n\t\t</Card>\n\t);\n}\n\nexport default TypographyPanel;\n","/**\n * Internal dependencies\n */\nimport { useEmailStyles } from '../../../hooks';\nimport { getElementStyles } from '../utils';\n\nexport default function TypographyPreview( {\n\telement,\n\theadingLevel,\n}: {\n\telement: string;\n\theadingLevel: string;\n} ) {\n\tconst { styles } = useEmailStyles();\n\tconst elementStyles = getElementStyles(\n\t\tstyles,\n\t\telement,\n\t\theadingLevel,\n\t\ttrue\n\t);\n\n\tconst {\n\t\tfontFamily,\n\t\tfontSize,\n\t\tfontStyle,\n\t\tfontWeight,\n\t\tlineHeight,\n\t\tletterSpacing,\n\t\ttextDecoration,\n\t\ttextTransform,\n\t} = elementStyles.typography;\n\n\tconst textColor = elementStyles.color?.text || 'inherit';\n\tconst background = elementStyles.color?.background || '#f0f0f0';\n\n\tconst extraStyles =\n\t\telement === 'link'\n\t\t\t? {\n\t\t\t\t\ttextDecoration: textDecoration ?? 'underline',\n\t\t\t  }\n\t\t\t: {};\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"edit-site-typography-preview\"\n\t\t\tstyle={ {\n\t\t\t\tfontFamily: fontFamily ?? 'serif',\n\t\t\t\tbackground,\n\t\t\t\tcolor: textColor,\n\t\t\t\tlineHeight,\n\t\t\t\tfontSize,\n\t\t\t\tfontStyle,\n\t\t\t\tfontWeight,\n\t\t\t\tletterSpacing,\n\t\t\t\ttextDecoration,\n\t\t\t\ttextTransform,\n\t\t\t\t...extraStyles,\n\t\t\t} }\n\t\t>\n\t\t\tAa\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\nimport {\n\t__experimentalHStack as HStack, // eslint-disable-line\n\t__experimentalVStack as VStack, // eslint-disable-line\n\t__unstableMotion as motion, // eslint-disable-line\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../../store';\n\nconst firstFrame = {\n\tstart: {\n\t\tscale: 1,\n\t\topacity: 1,\n\t},\n\thover: {\n\t\tscale: 0,\n\t\topacity: 0,\n\t},\n};\n\nconst midFrame = {\n\thover: {\n\t\topacity: 1,\n\t},\n\tstart: {\n\t\topacity: 0.5,\n\t},\n};\n\nconst secondFrame = {\n\thover: {\n\t\tscale: 1,\n\t\topacity: 1,\n\t},\n\tstart: {\n\t\tscale: 0,\n\t\topacity: 0,\n\t},\n};\n\nconst normalizedHeight = 152;\nconst normalizedColorSwatchSize = 32;\n\ntype Props = {\n\tlabel?: string;\n\tisFocused?: boolean;\n\twithHoverView?: boolean;\n};\n\n/**\n * Component to render the styles preview based on the component from the site editor:\n * https://github.com/WordPress/gutenberg/blob/trunk/packages/edit-site/src/components/global-styles/preview.js\n * @param root0\n * @param root0.label\n * @param root0.isFocused\n * @param root0.withHoverView\n */\nexport function Preview( {\n\tlabel,\n\tisFocused,\n\twithHoverView,\n}: Props ): JSX.Element {\n\tconst { styles, colors } = useSelect(\n\t\t( select ) => ( {\n\t\t\tstyles: select( storeName ).getStyles(),\n\t\t\tcolors: select( storeName ).getPaletteColors(),\n\t\t} ),\n\t\t[]\n\t);\n\n\tconst backgroundColor = styles?.color?.background || '#ffffff';\n\tconst headingFontFamily =\n\t\tstyles?.elements?.heading?.typography?.fontFamily || 'inherit';\n\tconst headingColor = styles?.elements?.heading?.color?.text || 'inherit';\n\tconst headingFontWeight =\n\t\tstyles?.elements?.heading?.typography?.fontWeight || 'inherit';\n\n\tconst paletteColors = colors.theme.concat( colors.theme );\n\n\t// https://github.com/WordPress/gutenberg/blob/7fa03fafeb421ab4c3604564211ce6007cc38e84/packages/edit-site/src/components/global-styles/hooks.js#L68-L73\n\tconst highlightedColors = paletteColors\n\t\t.filter(\n\t\t\t( { color } ) =>\n\t\t\t\tcolor.toLowerCase() !== backgroundColor.toLowerCase() &&\n\t\t\t\tcolor.toLowerCase() !== headingColor.toLowerCase()\n\t\t)\n\t\t.slice( 0, 2 );\n\n\tconst ratio = 1;\n\t// When is set label, the preview animates the hover state and displays the label\n\tconst [ isHovered, setIsHovered ] = useState( false );\n\n\treturn (\n\t\t<div\n\t\t\tonMouseEnter={ () => setIsHovered( true ) }\n\t\t\tonMouseLeave={ () => setIsHovered( false ) }\n\t\t>\n\t\t\t<motion.div\n\t\t\t\tstyle={ {\n\t\t\t\t\theight: normalizedHeight * ratio,\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\tbackground: backgroundColor,\n\t\t\t\t\tcursor: withHoverView ? 'pointer' : undefined,\n\t\t\t\t} }\n\t\t\t\tinitial=\"start\"\n\t\t\t\tanimate={\n\t\t\t\t\t( isHovered || isFocused ) && label ? 'hover' : 'start'\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<motion.div\n\t\t\t\t\tvariants={ firstFrame }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<HStack\n\t\t\t\t\t\tspacing={ 10 * ratio }\n\t\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\tfontFamily: headingFontFamily,\n\t\t\t\t\t\t\t\tfontSize: 65 * ratio,\n\t\t\t\t\t\t\t\tcolor: headingColor,\n\t\t\t\t\t\t\t\tfontWeight: headingFontWeight,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tanimate={ { scale: 1, opacity: 1 } }\n\t\t\t\t\t\t\tinitial={ { scale: 0.1, opacity: 0 } }\n\t\t\t\t\t\t\ttransition={ { delay: 0.3, type: 'tween' } }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAa\n\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t\t<VStack spacing={ 4 * ratio }>\n\t\t\t\t\t\t\t{ highlightedColors.map(\n\t\t\t\t\t\t\t\t( { slug, color }, index ) => (\n\t\t\t\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\t\t\t\tkey={ slug }\n\t\t\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\t\t\theight:\n\t\t\t\t\t\t\t\t\t\t\t\tnormalizedColorSwatchSize *\n\t\t\t\t\t\t\t\t\t\t\t\tratio,\n\t\t\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\t\t\tnormalizedColorSwatchSize *\n\t\t\t\t\t\t\t\t\t\t\t\tratio,\n\t\t\t\t\t\t\t\t\t\t\tbackground: color,\n\t\t\t\t\t\t\t\t\t\t\tborderRadius:\n\t\t\t\t\t\t\t\t\t\t\t\t( normalizedColorSwatchSize *\n\t\t\t\t\t\t\t\t\t\t\t\t\tratio ) /\n\t\t\t\t\t\t\t\t\t\t\t\t2,\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\tanimate={ {\n\t\t\t\t\t\t\t\t\t\t\tscale: 1,\n\t\t\t\t\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\tinitial={ {\n\t\t\t\t\t\t\t\t\t\t\tscale: 0.1,\n\t\t\t\t\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\ttransition={ {\n\t\t\t\t\t\t\t\t\t\t\tdelay: index === 1 ? 0.2 : 0.1,\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t</HStack>\n\t\t\t\t</motion.div>\n\t\t\t\t<motion.div\n\t\t\t\t\tvariants={ withHoverView && midFrame }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\tfilter: 'blur(60px)',\n\t\t\t\t\t\topacity: 0.1,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<HStack\n\t\t\t\t\t\tspacing={ 0 }\n\t\t\t\t\t\tjustify=\"flex-start\"\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ paletteColors.slice( 0, 4 ).map( ( { color } ) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={ color }\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\tbackground: color,\n\t\t\t\t\t\t\t\t\tflexGrow: 1,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</HStack>\n\t\t\t\t</motion.div>\n\t\t\t\t<motion.div\n\t\t\t\t\tvariants={ secondFrame }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<VStack\n\t\t\t\t\t\tspacing={ 3 * ratio }\n\t\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\t\tpadding: 10 * ratio,\n\t\t\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ label && (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\tfontSize: 40 * ratio,\n\t\t\t\t\t\t\t\t\tfontFamily: headingFontFamily,\n\t\t\t\t\t\t\t\t\tcolor: headingColor,\n\t\t\t\t\t\t\t\t\tfontWeight: headingFontWeight,\n\t\t\t\t\t\t\t\t\tlineHeight: '1em',\n\t\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</VStack>\n\t\t\t\t</motion.div>\n\t\t\t</motion.div>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport ScreenHeader from './screen-header';\nimport { useEmailStyles } from '../../../hooks';\nimport { storeName } from '../../../store';\nimport { recordEvent, recordEventOnce } from '../../../events';\nimport { StylesColorPanel } from '../../../private-apis';\n\nexport function ScreenColors(): JSX.Element {\n\trecordEventOnce( 'styles_sidebar_screen_colors_opened' );\n\tconst { userStyles, styles, updateStyles } = useEmailStyles();\n\tconst theme = useSelect( ( select ) => select( storeName ).getTheme(), [] );\n\n\tconst handleOnChange = ( newStyles ) => {\n\t\tupdateStyles( newStyles );\n\t\trecordEvent( 'styles_sidebar_screen_colors_styles_updated' ); // We can't log the updated color here because the onChange function returns the complete object.\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<ScreenHeader\n\t\t\t\ttitle={ __( 'Colors', 'mailpoet' ) }\n\t\t\t\tdescription={ __(\n\t\t\t\t\t'Manage palettes and the default color of different global elements.',\n\t\t\t\t\t'mailpoet'\n\t\t\t\t) }\n\t\t\t/>\n\t\t\t<StylesColorPanel\n\t\t\t\tvalue={ userStyles }\n\t\t\t\tinheritedValue={ styles }\n\t\t\t\tonChange={ handleOnChange }\n\t\t\t\tsettings={ theme?.settings }\n\t\t\t\tpanelId=\"colors\"\n\t\t\t/>\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { chevronLeft } from '@wordpress/icons';\nimport {\n\t__experimentalHStack as HStack, // eslint-disable-line\n\t__experimentalVStack as VStack, // eslint-disable-line\n\t__experimentalSpacer as Spacer, // eslint-disable-line\n\t__experimentalHeading as Heading, // eslint-disable-line\n\t__experimentalView as View, // eslint-disable-line\n\t__experimentalNavigatorToParentButton as NavigatorToParentButton, // eslint-disable-line\n} from '@wordpress/components';\n\ntype Props = {\n\ttitle: string;\n\tdescription?: string;\n\tonBack?: () => void;\n};\n\n/**\n * Component for displaying the screen header and optional description based on site editor component:\n * https://github.com/WordPress/gutenberg/blob/7fa03fafeb421ab4c3604564211ce6007cc38e84/packages/edit-site/src/components/global-styles/header.js\n * @param root0\n * @param root0.title\n * @param root0.description\n * @param root0.onBack\n */\nexport function ScreenHeader( { title, description, onBack }: Props ) {\n\treturn (\n\t\t<VStack spacing={ 0 }>\n\t\t\t<View>\n\t\t\t\t<Spacer marginBottom={ 0 } paddingX={ 4 } paddingY={ 3 }>\n\t\t\t\t\t<HStack spacing={ 2 }>\n\t\t\t\t\t\t<NavigatorToParentButton\n\t\t\t\t\t\t\tstyle={ { minWidth: 24, padding: 0 } }\n\t\t\t\t\t\t\ticon={ chevronLeft }\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\taria-label={ __(\n\t\t\t\t\t\t\t\t'Navigate to the previous view',\n\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tonClick={ onBack }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Spacer>\n\t\t\t\t\t\t\t{ /* @ts-expect-error Heading component it's not typed properly in the current components version. */ }\n\t\t\t\t\t\t\t<Heading\n\t\t\t\t\t\t\t\tclassName=\"mailpoet-email-editor__styles-header\"\n\t\t\t\t\t\t\t\tlevel={ 2 }\n\t\t\t\t\t\t\t\tsize={ 13 }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t</Heading>\n\t\t\t\t\t\t</Spacer>\n\t\t\t\t\t</HStack>\n\t\t\t\t</Spacer>\n\t\t\t</View>\n\t\t\t{ description && (\n\t\t\t\t<p className=\"mailpoet-email-editor__styles-header-description\">\n\t\t\t\t\t{ description }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n\nexport default ScreenHeader;\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { DimensionsPanel } from '../panels/dimensions-panel';\nimport { ScreenHeader } from './screen-header';\nimport { recordEventOnce } from '../../../events';\n\nexport function ScreenLayout(): JSX.Element {\n\trecordEventOnce( 'styles_sidebar_screen_layout_opened' );\n\treturn (\n\t\t<>\n\t\t\t<ScreenHeader title={ __( 'Layout', 'mailpoet' ) } />\n\t\t\t<DimensionsPanel />\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { typography, color, layout } from '@wordpress/icons';\nimport {\n\t__experimentalVStack as VStack, // eslint-disable-line\n\tCard,\n\tCardBody,\n\tCardMedia,\n\t__experimentalItemGroup as ItemGroup, // eslint-disable-line\n\t__experimentalItem as Item, // eslint-disable-line\n\t__experimentalHStack as HStack, // eslint-disable-line\n\t__experimentalNavigatorButton as NavigatorButton, // eslint-disable-line\n\tIcon,\n\tFlexItem,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { Preview } from './preview';\nimport { recordEvent } from '../../../events';\n\nexport function ScreenRoot(): JSX.Element {\n\treturn (\n\t\t<Card\n\t\t\tsize=\"small\"\n\t\t\tclassName=\"edit-site-global-styles-screen-root\"\n\t\t\tvariant=\"primary\"\n\t\t>\n\t\t\t<CardBody>\n\t\t\t\t<VStack spacing={ 4 }>\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<CardMedia>\n\t\t\t\t\t\t\t<Preview />\n\t\t\t\t\t\t</CardMedia>\n\t\t\t\t\t</Card>\n\t\t\t\t\t<ItemGroup>\n\t\t\t\t\t\t<NavigatorButton\n\t\t\t\t\t\t\tpath=\"/typography\"\n\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'styles_sidebar_navigation_click',\n\t\t\t\t\t\t\t\t\t{ path: 'typography' }\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Item>\n\t\t\t\t\t\t\t\t<HStack justify=\"flex-start\">\n\t\t\t\t\t\t\t\t\t<Icon icon={ typography } size={ 24 } />\n\t\t\t\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Typography', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t</NavigatorButton>\n\t\t\t\t\t\t<NavigatorButton\n\t\t\t\t\t\t\tpath=\"/colors\"\n\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'styles_sidebar_navigation_click',\n\t\t\t\t\t\t\t\t\t{ path: 'colors' }\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Item>\n\t\t\t\t\t\t\t\t<HStack justify=\"flex-start\">\n\t\t\t\t\t\t\t\t\t<Icon icon={ color } size={ 24 } />\n\t\t\t\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Colors', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t</NavigatorButton>\n\t\t\t\t\t\t<NavigatorButton\n\t\t\t\t\t\t\tpath=\"/layout\"\n\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'styles_sidebar_navigation_click',\n\t\t\t\t\t\t\t\t\t{ path: 'layout' }\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Item>\n\t\t\t\t\t\t\t\t<HStack justify=\"flex-start\">\n\t\t\t\t\t\t\t\t\t<Icon icon={ layout } size={ 24 } />\n\t\t\t\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Layout', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t</NavigatorButton>\n\t\t\t\t\t</ItemGroup>\n\t\t\t\t</VStack>\n\t\t\t</CardBody>\n\t\t</Card>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport {\n\t__experimentalToggleGroupControl as ToggleGroupControl, // eslint-disable-line\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption, // eslint-disable-line\n\t__experimentalSpacer as Spacer, // eslint-disable-line\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport TypographyElementPanel, {\n\tDEFAULT_CONTROLS,\n} from '../panels/typography-element-panel';\nimport TypographyPreview from '../previews/typography-preview';\nimport ScreenHeader from './screen-header';\nimport { recordEvent, recordEventOnce } from '../../../events';\n\nconst PANELS = {\n\ttext: {\n\t\ttitle: __( 'Text', 'mailpoet' ),\n\t\tdescription: __(\n\t\t\t'Manage the fonts and typography used on text.',\n\t\t\t'mailpoet'\n\t\t),\n\t\tdefaultControls: DEFAULT_CONTROLS,\n\t},\n\tlink: {\n\t\ttitle: __( 'Links', 'mailpoet' ),\n\t\tdescription: __(\n\t\t\t'Manage the fonts and typography used on links.',\n\t\t\t'mailpoet'\n\t\t),\n\t\tdefaultControls: {\n\t\t\t...DEFAULT_CONTROLS,\n\t\t\ttextDecoration: true,\n\t\t},\n\t},\n\theading: {\n\t\ttitle: __( 'Headings', 'mailpoet' ),\n\t\tdescription: __(\n\t\t\t'Manage the fonts and typography used on headings.',\n\t\t\t'mailpoet'\n\t\t),\n\t\tdefaultControls: {\n\t\t\t...DEFAULT_CONTROLS,\n\t\t\ttextTransform: true,\n\t\t},\n\t},\n\tbutton: {\n\t\ttitle: __( 'Buttons', 'mailpoet' ),\n\t\tdescription: __(\n\t\t\t'Manage the fonts and typography used on buttons.',\n\t\t\t'mailpoet'\n\t\t),\n\t\tdefaultControls: DEFAULT_CONTROLS,\n\t},\n};\n\nexport function ScreenTypographyElement( {\n\telement,\n}: {\n\telement: string;\n} ): JSX.Element {\n\trecordEventOnce( 'styles_sidebar_screen_typography_element_opened', {\n\t\telement,\n\t} );\n\tconst [ headingLevel, setHeadingLevel ] = useState( 'heading' );\n\treturn (\n\t\t<>\n\t\t\t<ScreenHeader\n\t\t\t\ttitle={ PANELS[ element ].title }\n\t\t\t\tdescription={ PANELS[ element ].description }\n\t\t\t/>\n\t\t\t<Spacer marginX={ 4 }>\n\t\t\t\t<TypographyPreview\n\t\t\t\t\telement={ element }\n\t\t\t\t\theadingLevel={ headingLevel }\n\t\t\t\t/>\n\t\t\t</Spacer>\n\t\t\t{ element === 'heading' && (\n\t\t\t\t<Spacer marginX={ 4 } marginBottom=\"1em\">\n\t\t\t\t\t<ToggleGroupControl\n\t\t\t\t\t\tlabel={ __( 'Select heading level', 'mailpoet' ) }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\tvalue={ headingLevel }\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\tsetHeadingLevel( value.toString() );\n\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t'styles_sidebar_screen_typography_element_heading_level_selected',\n\t\t\t\t\t\t\t\t{ value }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tisBlock\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t>\n\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\tvalue=\"heading\"\n\t\t\t\t\t\t\tlabel={ _x( 'All', 'heading levels', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\tvalue=\"h1\"\n\t\t\t\t\t\t\tlabel={ _x( 'H1', 'Heading Level', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\tvalue=\"h2\"\n\t\t\t\t\t\t\tlabel={ _x( 'H2', 'Heading Level', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\tvalue=\"h3\"\n\t\t\t\t\t\t\tlabel={ _x( 'H3', 'Heading Level', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\tvalue=\"h4\"\n\t\t\t\t\t\t\tlabel={ _x( 'H4', 'Heading Level', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\tvalue=\"h5\"\n\t\t\t\t\t\t\tlabel={ _x( 'H5', 'Heading Level', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\tvalue=\"h6\"\n\t\t\t\t\t\t\tlabel={ _x( 'H6', 'Heading Level', 'mailpoet' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ToggleGroupControl>\n\t\t\t\t</Spacer>\n\t\t\t) }\n\t\t\t<TypographyElementPanel\n\t\t\t\telement={ element }\n\t\t\t\theadingLevel={ headingLevel }\n\t\t\t\tdefaultControls={ PANELS[ element ].defaultControls }\n\t\t\t/>\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport TypographyPanel from '../panels/typography-panel';\nimport ScreenHeader from './screen-header';\nimport { recordEventOnce } from '../../../events';\n\nexport function ScreenTypography(): JSX.Element {\n\trecordEventOnce( 'styles_sidebar_screen_typography_opened' );\n\treturn (\n\t\t<>\n\t\t\t<ScreenHeader\n\t\t\t\ttitle={ __( 'Typography', 'mailpoet' ) }\n\t\t\t\tdescription={ __(\n\t\t\t\t\t'Manage the typography settings for different elements.',\n\t\t\t\t\t'mailpoet'\n\t\t\t\t) }\n\t\t\t/>\n\t\t\t<TypographyPanel />\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { memo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { ComplementaryArea } from '@wordpress/interface';\nimport { ComponentProps } from 'react';\nimport { styles } from '@wordpress/icons';\nimport {\n\t__experimentalNavigatorProvider as NavigatorProvider,\n\t__experimentalNavigatorScreen as NavigatorScreen,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { storeName, stylesSidebarId } from '../../store';\nimport {\n\tScreenTypography,\n\tScreenTypographyElement,\n\tScreenLayout,\n\tScreenRoot,\n\tScreenColors,\n} from './screens';\n\ntype Props = ComponentProps< typeof ComplementaryArea >;\n\nexport function RawStylesSidebar( props: Props ): JSX.Element {\n\treturn (\n\t\t<ComplementaryArea\n\t\t\tidentifier={ stylesSidebarId }\n\t\t\tclassName=\"mailpoet-email-editor__styles-panel\"\n\t\t\theader={ __( 'Styles', 'mailpoet' ) }\n\t\t\tcloseLabel={ __( 'Close styles sidebar', 'mailpoet' ) }\n\t\t\ticon={ styles }\n\t\t\tscope={ storeName }\n\t\t\tsmallScreenTitle={ __( 'No title', 'mailpoet' ) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<NavigatorProvider initialPath=\"/\">\n\t\t\t\t<NavigatorScreen path=\"/\">\n\t\t\t\t\t<ScreenRoot />\n\t\t\t\t</NavigatorScreen>\n\n\t\t\t\t<NavigatorScreen path=\"/typography\">\n\t\t\t\t\t<ScreenTypography />\n\t\t\t\t</NavigatorScreen>\n\n\t\t\t\t<NavigatorScreen path=\"/typography/text\">\n\t\t\t\t\t<ScreenTypographyElement element=\"text\" />\n\t\t\t\t</NavigatorScreen>\n\n\t\t\t\t<NavigatorScreen path=\"/typography/link\">\n\t\t\t\t\t<ScreenTypographyElement element=\"link\" />\n\t\t\t\t</NavigatorScreen>\n\n\t\t\t\t<NavigatorScreen path=\"/typography/heading\">\n\t\t\t\t\t<ScreenTypographyElement element=\"heading\" />\n\t\t\t\t</NavigatorScreen>\n\n\t\t\t\t<NavigatorScreen path=\"/typography/button\">\n\t\t\t\t\t<ScreenTypographyElement element=\"button\" />\n\t\t\t\t</NavigatorScreen>\n\n\t\t\t\t<NavigatorScreen path=\"/colors\">\n\t\t\t\t\t<ScreenColors />\n\t\t\t\t</NavigatorScreen>\n\n\t\t\t\t<NavigatorScreen path=\"/layout\">\n\t\t\t\t\t<ScreenLayout />\n\t\t\t\t</NavigatorScreen>\n\t\t\t</NavigatorProvider>\n\t\t</ComplementaryArea>\n\t);\n}\n\nexport const StylesSidebar = memo( RawStylesSidebar );\n","/**\n * External dependencies\n */\nimport deepmerge from 'deepmerge';\n\n/**\n * Internal dependencies\n */\nimport { StyleProperties } from '../../hooks/use-email-styles';\n\nconst defaultStyleObject = {\n\ttypography: {},\n\tcolor: {},\n};\n\n/**\n * Gets combined element styles for a heading element.\n *\n * If merge is true, individual styles will be merged with the heading styles.\n * This should be false in the Editor UI so heading levels state \"default\" in the tools UI instead of using\n * values from the parent \"heading\" element.\n * @param styles\n * @param headingLevel\n * @param merge\n */\nexport const getHeadingElementStyles = (\n\tstyles: StyleProperties,\n\theadingLevel = 'heading',\n\tmerge = false\n): StyleProperties =>\n\tmerge\n\t\t? ( deepmerge.all( [\n\t\t\t\tdefaultStyleObject,\n\t\t\t\tstyles.elements.heading || {},\n\t\t\t\tstyles.elements[ headingLevel ] || {},\n\t\t  ] ) as StyleProperties )\n\t\t: ( {\n\t\t\t\t...defaultStyleObject,\n\t\t\t\t...( styles.elements.heading || {} ),\n\t\t\t\t...( styles.elements[ headingLevel ] || {} ),\n\t\t  } as StyleProperties );\n\nexport const getElementStyles = (\n\tstyles: StyleProperties,\n\telement: string,\n\theadingLevel = 'heading',\n\tmerge = false\n): StyleProperties => {\n\tswitch ( element ) {\n\t\tcase 'text':\n\t\t\treturn {\n\t\t\t\ttypography: styles.typography,\n\t\t\t\tcolor: styles.color,\n\t\t\t} as StyleProperties;\n\t\tcase 'heading':\n\t\t\treturn getHeadingElementStyles(\n\t\t\t\tstyles,\n\t\t\t\theadingLevel ?? 'heading',\n\t\t\t\tmerge\n\t\t\t);\n\t\tdefault:\n\t\t\treturn ( styles.elements[ element ] ||\n\t\t\t\tdefaultStyleObject ) as StyleProperties;\n\t}\n};\n","/**\n * External dependencies\n */\nimport { useEffect, useState, flushSync } from '@wordpress/element';\n// @ts-expect-error TS7016 Could not find a declaration file for module '@wordpress/priority-queue'\nimport { createQueue } from '@wordpress/priority-queue'; // eslint-disable-line\n\nconst blockPreviewQueue = createQueue();\n\n/**\n * Renders a component at the next idle time.\n * @param {*} props\n */\nexport function Async( { children, placeholder } ) {\n\tconst [ shouldRender, setShouldRender ] = useState( false );\n\n\t// In the future, we could try to use startTransition here, but currently\n\t// react will batch all transitions, which means all previews will be\n\t// rendered at the same time.\n\t// https://react.dev/reference/react/startTransition#caveats\n\t// > If there are multiple ongoing Transitions, React currently batches them\n\t// > together. This is a limitation that will likely be removed in a future\n\t// > release.\n\n\tuseEffect( () => {\n\t\tconst context = {};\n\t\tblockPreviewQueue.add( context, () => {\n\t\t\t// Synchronously run all renders so it consumes timeRemaining.\n\t\t\t// See https://github.com/WordPress/gutenberg/pull/48238\n\t\t\tflushSync( () => {\n\t\t\t\tsetShouldRender( true );\n\t\t\t} );\n\t\t} );\n\t\treturn () => {\n\t\t\tblockPreviewQueue.cancel( context );\n\t\t};\n\t}, [] );\n\n\tif ( ! shouldRender ) {\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\t\treturn placeholder;\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\treturn children;\n}\n","/**\n * External dependencies\n */\nimport { useState, useEffect, memo } from '@wordpress/element';\nimport { store as editorStore } from '@wordpress/editor';\nimport { dispatch } from '@wordpress/data';\nimport { Modal, Button, Flex, FlexItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { usePreviewTemplates } from '../../hooks';\nimport {\n\tEmailEditorPostType,\n\tstoreName,\n\tTemplateCategory,\n\tTemplatePreview,\n\teditorCurrentPostType,\n} from '../../store';\nimport { TemplateList } from './template-list';\nimport { TemplateCategoriesListSidebar } from './template-categories-list-sidebar';\nimport { recordEvent, recordEventOnce } from '../../events';\n\nconst TemplateCategories: Array< { name: TemplateCategory; label: string } > = [\n\t{\n\t\tname: 'recent',\n\t\tlabel: 'Recent',\n\t},\n\t{\n\t\tname: 'basic',\n\t\tlabel: 'Basic',\n\t},\n];\n\nfunction SelectTemplateBody( {\n\thasEmailPosts,\n\ttemplates,\n\thandleTemplateSelection,\n\ttemplateSelectMode,\n} ) {\n\tconst [ selectedCategory, setSelectedCategory ] = useState(\n\t\tTemplateCategories[ 1 ].name // Show the Basic category by default\n\t);\n\n\tconst hideRecentCategory = templateSelectMode === 'swap';\n\n\tconst displayCategories = TemplateCategories.filter(\n\t\t( { name } ) => name !== 'recent' || ! hideRecentCategory\n\t);\n\n\tconst handleCategorySelection = ( category: TemplateCategory ) => {\n\t\trecordEvent( 'template_select_modal_category_change', { category } );\n\t\tsetSelectedCategory( category );\n\t};\n\n\tuseEffect( () => {\n\t\tsetTimeout( () => {\n\t\t\tif ( hasEmailPosts && ! hideRecentCategory ) {\n\t\t\t\tsetSelectedCategory( TemplateCategories[ 0 ].name );\n\t\t\t}\n\t\t}, 1000 ); // using setTimeout to ensure the template styles are available before block preview\n\t}, [ hasEmailPosts, hideRecentCategory ] );\n\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-explorer\">\n\t\t\t<TemplateCategoriesListSidebar\n\t\t\t\ttemplateCategories={ displayCategories }\n\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\tonClickCategory={ handleCategorySelection }\n\t\t\t/>\n\n\t\t\t<TemplateList\n\t\t\t\ttemplates={ templates }\n\t\t\t\tonTemplateSelection={ handleTemplateSelection }\n\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nconst MemorizedSelectTemplateBody = memo( SelectTemplateBody );\n\nexport function SelectTemplateModal( {\n\tonSelectCallback,\n\tcloseCallback = null,\n\tpreviewContent = '',\n} ) {\n\tconst templateSelectMode = previewContent ? 'swap' : 'new';\n\trecordEventOnce( 'template_select_modal_opened', { templateSelectMode } );\n\n\tconst [ templates, emailPosts, hasEmailPosts ] =\n\t\tusePreviewTemplates( previewContent );\n\n\tconst hasTemplates = templates?.length > 0;\n\n\tconst handleTemplateSelection = ( template: TemplatePreview ) => {\n\t\tconst templateIsPostContent = template.type === editorCurrentPostType;\n\n\t\tconst postContent = template.template as unknown as EmailEditorPostType;\n\n\t\trecordEvent( 'template_select_modal_template_selected', {\n\t\t\ttemplateSlug: template.slug,\n\t\t\ttemplateSelectMode,\n\t\t\ttemplateType: template.type,\n\t\t} );\n\n\t\t// When we provide previewContent, we don't want to reset the blocks\n\t\tif ( ! previewContent ) {\n\t\t\tvoid dispatch( editorStore ).resetEditorBlocks(\n\t\t\t\ttemplate.emailParsed\n\t\t\t);\n\t\t}\n\n\t\tvoid dispatch( storeName ).setTemplateToPost(\n\t\t\ttemplateIsPostContent ? postContent.template : template.slug\n\t\t);\n\t\tonSelectCallback();\n\t};\n\n\tconst handleCloseWithoutSelection = () => {\n\t\tconst template = templates[ 0 ] ?? null;\n\t\tif ( ! template ) {\n\t\t\treturn;\n\t\t} // Prevent closing when templates are not loaded\n\t\trecordEvent(\n\t\t\t'template_select_modal_handle_close_without_template_selected'\n\t\t);\n\t\thandleTemplateSelection( template );\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={\n\t\t\t\ttemplateSelectMode === 'new'\n\t\t\t\t\t? __( 'Start with an email preset', 'mailpoet' )\n\t\t\t\t\t: __( 'Select a template', 'mailpoet' )\n\t\t\t}\n\t\t\tonRequestClose={ () => {\n\t\t\t\trecordEvent( 'template_select_modal_closed', {\n\t\t\t\t\ttemplateSelectMode,\n\t\t\t\t} );\n\t\t\t\treturn closeCallback\n\t\t\t\t\t? closeCallback()\n\t\t\t\t\t: handleCloseWithoutSelection();\n\t\t\t} }\n\t\t\tisFullScreen\n\t\t>\n\t\t\t<MemorizedSelectTemplateBody\n\t\t\t\thasEmailPosts={ hasEmailPosts }\n\t\t\t\ttemplates={ [ ...templates, ...emailPosts ] }\n\t\t\t\thandleTemplateSelection={ handleTemplateSelection }\n\t\t\t\ttemplateSelectMode={ templateSelectMode }\n\t\t\t/>\n\n\t\t\t<Flex className=\"email-editor-modal-footer\" justify=\"flex-end\">\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tclassName=\"email-editor-start_from_scratch_button\"\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t'template_select_modal_start_from_scratch_clicked'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn handleCloseWithoutSelection();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tisBusy={ ! hasTemplates }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Start from scratch', 'mailpoet' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</Modal>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { Button } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { TemplateCategory } from '../../store';\n\ntype Props = {\n\tselectedCategory?: TemplateCategory;\n\ttemplateCategories: Array< { name: TemplateCategory; label: string } >;\n\tonClickCategory: ( name: TemplateCategory ) => void;\n};\n\nexport function TemplateCategoriesListSidebar( {\n\tselectedCategory,\n\ttemplateCategories,\n\tonClickCategory,\n}: Props ) {\n\tconst baseClassName = 'block-editor-block-patterns-explorer__sidebar';\n\treturn (\n\t\t<div className={ baseClassName }>\n\t\t\t<div className={ `${ baseClassName }__categories-list` }>\n\t\t\t\t{ templateCategories.map( ( { name, label } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\tclassName={ `${ baseClassName }__categories-list__item` }\n\t\t\t\t\t\t\tisPressed={ selectedCategory === name }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tonClickCategory( name );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { useMemo, memo } from '@wordpress/element';\nimport { store as editorStore } from '@wordpress/editor';\nimport { useSelect } from '@wordpress/data';\nimport { Icon, info, blockDefault } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\nimport {\n\t__experimentalHStack as HStack, // eslint-disable-line\n} from '@wordpress/components';\n// @ts-expect-error No types available for this component\n// eslint-disable-next-line\nimport { BlockPreview } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { Async } from './async';\nimport { TemplateCategory, TemplatePreview } from '../../store';\nimport { useEmailCss } from '../../hooks';\n\ntype Props = {\n\ttemplates: TemplatePreview[];\n\tonTemplateSelection: ( template: TemplatePreview ) => void;\n\tselectedCategory?: TemplateCategory;\n};\n\nfunction TemplateNoResults() {\n\treturn (\n\t\t<div className=\"block-editor-inserter__no-results\">\n\t\t\t<Icon\n\t\t\t\tclassName=\"block-editor-inserter__no-results-icon\"\n\t\t\t\ticon={ blockDefault }\n\t\t\t/>\n\t\t\t<p>{ __( 'No recent templates.', 'mailpoet' ) }</p>\n\t\t\t<p>\n\t\t\t\t{ __(\n\t\t\t\t\t'Your recent creations will appear here as soon as you begin.',\n\t\t\t\t\t'mailpoet'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n\nfunction TemplateListBox( {\n\ttemplates,\n\tonTemplateSelection,\n\tselectedCategory,\n}: Props ) {\n\tconst { layout } = useSelect( ( select ) => {\n\t\tconst { getEditorSettings } = select( editorStore );\n\t\tconst editorSettings = getEditorSettings();\n\t\treturn {\n\t\t\t// @ts-expect-error There are no types for the experimental features settings.\n\t\t\t// eslint-disable-next-line no-underscore-dangle\n\t\t\tlayout: editorSettings.__experimentalFeatures.layout,\n\t\t};\n\t} );\n\n\tconst [ styles ] = useEmailCss();\n\tconst css =\n\t\tstyles.reduce( ( acc, style ) => {\n\t\t\treturn acc + ( style.css ?? '' );\n\t\t}, '' ) +\n\t\t`.is-root-container { width: ${ layout.contentSize }; margin: 0 auto; }`;\n\n\tif ( selectedCategory === 'recent' && templates.length === 0 ) {\n\t\treturn <TemplateNoResults />;\n\t}\n\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-list\" role=\"listbox\">\n\t\t\t{ templates.map( ( template ) => (\n\t\t\t\t<div\n\t\t\t\t\tkey={ `${ template.slug }_${ template.displayName }_${ template.id }` }\n\t\t\t\t\tclassName=\"block-editor-block-patterns-list__list-item email-editor-pattern__list-item\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"block-editor-block-patterns-list__item\"\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\ttabIndex={ 0 }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonTemplateSelection( template );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonKeyPress={ ( event ) => {\n\t\t\t\t\t\t\tif ( event.key === 'Enter' || event.key === ' ' ) {\n\t\t\t\t\t\t\t\tonTemplateSelection( template );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Async\n\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t{ __( 'rendering template', 'mailpoet' ) }\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockPreview\n\t\t\t\t\t\t\t\tblocks={ template.previewContentParsed }\n\t\t\t\t\t\t\t\tviewportWidth={ 900 }\n\t\t\t\t\t\t\t\tminHeight={ 300 }\n\t\t\t\t\t\t\t\tadditionalStyles={ [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcss,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<HStack className=\"block-editor-patterns__pattern-details\">\n\t\t\t\t\t\t\t\t<h4 className=\"block-editor-block-patterns-list__item-title\">\n\t\t\t\t\t\t\t\t\t{ template.displayName }\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t</Async>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) ) }\n\t\t</div>\n\t);\n}\n\nconst compareProps = ( prev, next ) =>\n\tprev.templates.length === next.templates.length &&\n\tprev.selectedCategory === next.selectedCategory;\n\nconst MemorizedTemplateListBox = memo( TemplateListBox, compareProps );\n\nexport function TemplateList( {\n\ttemplates,\n\tonTemplateSelection,\n\tselectedCategory,\n}: Props ) {\n\tconst filteredTemplates = useMemo(\n\t\t() =>\n\t\t\ttemplates.filter(\n\t\t\t\t( template ) => template.category === selectedCategory\n\t\t\t),\n\t\t[ selectedCategory, templates ]\n\t);\n\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-explorer__list\">\n\t\t\t{ selectedCategory === 'recent' && (\n\t\t\t\t<div className=\"email-editor-recent-templates-info\">\n\t\t\t\t\t<HStack spacing={ 1 } expanded={ false } justify=\"start\">\n\t\t\t\t\t\t<Icon icon={ info } />\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Templates created on the legacy editor will not appear here.',\n\t\t\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</HStack>\n\t\t\t\t</div>\n\t\t\t) }\n\n\t\t\t<MemorizedTemplateListBox\n\t\t\t\ttemplates={ filteredTemplates }\n\t\t\t\tonTemplateSelection={ onTemplateSelection }\n\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { storeName } from '../../store';\nimport { SelectTemplateModal } from './select-modal';\n\nexport function TemplateSelection() {\n\tconst [ templateSelected, setTemplateSelected ] = useState( false );\n\tconst { emailContentIsEmpty, emailHasEdits } = useSelect(\n\t\t( select ) => ( {\n\t\t\temailContentIsEmpty: select( storeName ).hasEmptyContent(),\n\t\t\temailHasEdits: select( storeName ).hasEdits(),\n\t\t} ),\n\t\t[]\n\t);\n\tif ( ! emailContentIsEmpty || emailHasEdits || templateSelected ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<SelectTemplateModal\n\t\t\tonSelectCallback={ () => setTemplateSelected( true ) }\n\t\t/>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { ComponentType } from 'react';\nimport { MediaUpload } from '@wordpress/media-utils';\nimport { addFilter } from '@wordpress/hooks';\n\nexport const initHooks = (): void => {\n\t// see https://github.com/WordPress/gutenberg/blob/master/packages/block-editor/src/components/media-upload/README.md\n\tconst replaceMediaUpload = (): ComponentType => MediaUpload;\n\taddFilter(\n\t\t'editor.MediaUpload',\n\t\t'mailpoet/email-editor/replace-media-upload',\n\t\treplaceMediaUpload\n\t);\n};\n","/**\n * External dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { StrictMode, createRoot } from '@wordpress/element';\nimport { applyFilters } from '@wordpress/hooks';\nimport '@wordpress/format-library'; // Enables text formatting capabilities\n\n/**\n * Internal dependencies\n */\nimport { initBlocks } from './blocks';\nimport { initializeLayout } from './layouts/flex-email';\nimport { InnerEditor } from './components/block-editor';\nimport { createStore, storeName, editorCurrentPostType } from './store';\nimport { initHooks } from './editor-hooks';\nimport { KeyboardShortcuts } from './components/keybord-shortcuts';\nimport { initEventCollector } from './events';\nimport './index.scss';\n\nfunction Editor() {\n\tconst { postId, settings } = useSelect(\n\t\t( select ) => ( {\n\t\t\tpostId: select( storeName ).getEmailPostId(),\n\t\t\tsettings: select( storeName ).getInitialEditorSettings(),\n\t\t} ),\n\t\t[]\n\t);\n\n\treturn (\n\t\t<StrictMode>\n\t\t\t<KeyboardShortcuts />\n\t\t\t<InnerEditor\n\t\t\t\tinitialEdits={ [] }\n\t\t\t\tpostId={ postId }\n\t\t\t\tpostType={ editorCurrentPostType }\n\t\t\t\tsettings={ settings }\n\t\t\t/>\n\t\t</StrictMode>\n\t);\n}\n\nconst WrappedEditor = applyFilters(\n\t'mailpoet_email_editor_wrap_editor_component',\n\tEditor\n) as typeof Editor;\n\nexport function initialize( elementId: string ) {\n\tconst container = document.getElementById( elementId );\n\tif ( ! container ) {\n\t\treturn;\n\t}\n\tinitEventCollector();\n\tcreateStore();\n\tinitializeLayout();\n\tinitBlocks();\n\tinitHooks();\n\tconst root = createRoot( container );\n\troot.render( <WrappedEditor /> );\n}\n","/**\n * External dependencies\n */\nimport { doAction } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tEMAIL_STRING,\n\tdispatcher,\n\tisEventTrackingEnabled,\n} from './event-pipeline';\n\nconst eventListenerHandler = ( eventData ) => {\n\tdoAction( 'mailpoet_email_editor_events', eventData.detail );\n};\n\nconst initEventCollector = () => {\n\tif ( ! isEventTrackingEnabled ) {\n\t\treturn;\n\t}\n\n\tdispatcher.addEventListener( EMAIL_STRING, eventListenerHandler );\n};\n\nwindow.addEventListener( 'unload', function () {\n\tif ( ! isEventTrackingEnabled ) {\n\t\treturn;\n\t}\n\n\tdispatcher.removeEventListener( EMAIL_STRING, eventListenerHandler );\n} );\n\nexport { initEventCollector };\n","/**\n * External dependencies\n */\nimport { debounce } from 'lodash';\nimport { applyFilters } from '@wordpress/hooks';\n\nconst isEventTrackingEnabled = applyFilters(\n\t'mailpoet_email_editor_events_tracking_enabled',\n\tfalse\n);\n\nconst EMAIL_STRING = 'email_editor_events';\n\nconst dispatcher = new EventTarget();\n\n/**\n * Record event tracking information\n * @param {string} name - event name, in format `this_is_an_event`\n * @param          data - extra properties - please use a valid JSON object\n */\nconst recordEvent = ( name: string, data = {} ) => {\n\tif ( ! isEventTrackingEnabled ) {\n\t\treturn;\n\t}\n\n\tconst recordedData = typeof data !== 'object' ? { data } : data;\n\n\tconst eventData = {\n\t\tname: `${ EMAIL_STRING }_${ name }`,\n\t\t...recordedData,\n\t};\n\n\tdispatcher.dispatchEvent(\n\t\tnew CustomEvent( EMAIL_STRING, { detail: eventData } )\n\t);\n};\n\n/**\n * Generally used for when we want to ensure the event is tracked once\n * e.g., on page render or something similar\n * Takes the exact same parameter as `recordEvent`\n */\nconst recordEventOnce = ( function () {\n\tconst cachedEventName = {};\n\treturn ( name: string, data = {} ) => {\n\t\tif ( ! isEventTrackingEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cacheKey = `${ name }_${ JSON.stringify( data ).length }`; // ensure each entry is unique by name and data\n\t\tif ( cachedEventName[ cacheKey ] ) {\n\t\t\treturn; // do not execute again\n\t\t}\n\t\trecordEvent( name, data );\n\t\tcachedEventName[ cacheKey ] = true;\n\t};\n} )();\n\nconst debouncedRecordEvent = debounce( recordEvent, 700 ); // wait 700 milliseconds. The average human reaction speed time is around 250 ms, added some delay for mouse move and keyboard press\n\nexport {\n\trecordEvent,\n\trecordEventOnce,\n\tdebouncedRecordEvent,\n\tEMAIL_STRING,\n\tdispatcher,\n\tisEventTrackingEnabled,\n};\n","/**\n * External dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { useSelect, subscribe } from '@wordpress/data';\nimport { store as coreDataStore } from '@wordpress/core-data';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tEmailContentValidationRule,\n\tstoreName as emailEditorStore,\n} from '../store';\nimport { useShallowEqual } from './use-shallow-equal';\nimport { useValidationNotices } from './use-validation-notices';\n\n// Shared reference to an empty array for cases where it is important to avoid\n// returning a new array reference on every invocation\nconst EMPTY_ARRAY = [];\n\nexport type ContentValidationData = {\n\tisInvalid: boolean;\n\tvalidateContent: () => boolean;\n};\n\nexport const useContentValidation = (): ContentValidationData => {\n\tconst { addValidationNotice, hasValidationNotice, removeValidationNotice } =\n\t\tuseValidationNotices();\n\n\tconst { editedContent, editedTemplateContent } = useSelect(\n\t\t( mapSelect ) => ( {\n\t\t\teditedContent:\n\t\t\t\tmapSelect( emailEditorStore ).getEditedEmailContent(),\n\t\t\teditedTemplateContent:\n\t\t\t\tmapSelect( emailEditorStore ).getCurrentTemplateContent(),\n\t\t} )\n\t);\n\n\tconst rules: EmailContentValidationRule[] = applyFilters(\n\t\t'mailpoet_email_editor_content_validation_rules',\n\t\tEMPTY_ARRAY\n\t) as EmailContentValidationRule[];\n\n\tconst content = useShallowEqual( editedContent );\n\tconst templateContent = useShallowEqual( editedTemplateContent );\n\n\tconst validateContent = useCallback( (): boolean => {\n\t\tlet isValid = true;\n\t\trules.forEach( ( { id, test, message, actions } ) => {\n\t\t\t// Check both content and template content for the rule.\n\t\t\tif ( test( content + templateContent ) ) {\n\t\t\t\taddValidationNotice( id, message, actions );\n\t\t\t\tisValid = false;\n\t\t\t} else if ( hasValidationNotice( id ) ) {\n\t\t\t\tremoveValidationNotice( id );\n\t\t\t}\n\t\t} );\n\t\treturn isValid;\n\t}, [\n\t\tcontent,\n\t\ttemplateContent,\n\t\taddValidationNotice,\n\t\tremoveValidationNotice,\n\t\thasValidationNotice,\n\t\trules,\n\t] );\n\n\t// Subscribe to updates so notices can be dismissed once resolved.\n\tsubscribe( () => {\n\t\tif ( ! hasValidationNotice() ) {\n\t\t\treturn;\n\t\t}\n\t\tvalidateContent();\n\t}, coreDataStore );\n\n\treturn {\n\t\tisInvalid: hasValidationNotice(),\n\t\tvalidateContent,\n\t};\n};\n","/**\n * External dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\n\nexport function useEditorMode() {\n\tconst { isEditingTemplate } = useSelect(\n\t\t( select ) => ( {\n\t\t\tisEditingTemplate:\n\t\t\t\tselect( editorStore ).getCurrentPostType() === 'wp_template',\n\t\t} ),\n\t\t[]\n\t);\n\treturn [ isEditingTemplate ? 'template' : 'email' ];\n}\n","/**\n * External dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport deepmerge from 'deepmerge';\n\n/**\n * Internal dependencies\n */\nimport { EmailStyles, storeName } from '../store';\nimport { useUserTheme } from './use-user-theme';\nimport { useGlobalStylesOutputWithConfig } from '../private-apis';\n\nexport function useEmailCss() {\n\tconst { userTheme } = useUserTheme();\n\tconst { editorTheme } = useSelect(\n\t\t( select ) => ( {\n\t\t\teditorTheme: select( storeName ).getTheme(),\n\t\t} ),\n\t\t[]\n\t);\n\n\tconst mergedConfig = useMemo(\n\t\t() =>\n\t\t\tdeepmerge.all( [\n\t\t\t\t{},\n\t\t\t\teditorTheme || {},\n\t\t\t\tuserTheme || {},\n\t\t\t] ) as EmailStyles,\n\t\t[ editorTheme, userTheme ]\n\t);\n\n\tconst [ styles ] = useGlobalStylesOutputWithConfig( mergedConfig );\n\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\treturn [ styles || [] ];\n}\n","/**\n * External dependencies\n */\nimport deepmerge from 'deepmerge';\nimport { useSelect } from '@wordpress/data';\nimport { useCallback, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { storeName, TypographyProperties } from '../store';\nimport { useUserTheme } from './use-user-theme';\n\ninterface ElementProperties {\n\ttypography: TypographyProperties;\n}\nexport interface StyleProperties {\n\tspacing?: {\n\t\tpadding: {\n\t\t\ttop: string;\n\t\t\tright: string;\n\t\t\tbottom: string;\n\t\t\tleft: string;\n\t\t};\n\t\tblockGap: string;\n\t};\n\ttypography?: TypographyProperties;\n\tcolor?: {\n\t\tbackground: string;\n\t\ttext: string;\n\t};\n\telements?: Record< string, ElementProperties >;\n}\n\ninterface EmailStylesData {\n\tstyles: StyleProperties;\n\tuserStyles: StyleProperties;\n\tdefaultStyles: StyleProperties;\n\tupdateStyleProp: ( path, newValue ) => void;\n\tupdateStyles: ( newStyles: StyleProperties ) => void;\n}\n\n/**\n * Immutably sets a value inside an object. Like `lodash#set`, but returning a\n * new object. Treats nullish initial values as empty objects. Clones any\n * nested objects. Supports arrays, too.\n *\n * @param                       setObject\n * @param {number|string|Array} setPath   Path in the object to modify.\n * @param {*}                   value     New value to set.\n * @return {Object} Cloned object with the new value set.\n */\nexport function setImmutably( setObject, setPath, value ): typeof setObject {\n\t// Normalize path\n\tconst path = Array.isArray( setPath ) ? [ ...setPath ] : [ setPath ];\n\n\t// Shallowly clone the base of the object\n\tconst object = Array.isArray( setObject )\n\t\t? [ ...setObject ]\n\t\t: { ...setObject };\n\n\tconst leaf = path.pop();\n\n\t// Traverse object from root to leaf, shallowly cloning at each level\n\tlet prev = object;\n\n\tpath.forEach( ( key ) => {\n\t\tconst lvl = prev[ key ];\n\t\tprev[ key ] = Array.isArray( lvl ) ? [ ...lvl ] : { ...lvl };\n\t\tprev = prev[ key ];\n\t} );\n\n\tprev[ leaf ] = value;\n\n\treturn object;\n}\n\n/**\n * Shorten the variable names in the styles object. Some components need the h\n * Transforms variables like var(--wp--preset--spacing--10) to var:preset|spacing|10\n *\n * @param {Object} obj The object to shorten the variable names in.\n * @return {Object} The object with the shortened variable names.\n */\nfunction shortenWpPresetVariables( obj ) {\n\t// Helper function to replace the variable string\n\tconst replaceVariable = ( value ) => {\n\t\treturn value.replace(\n\t\t\t/var\\(--([a-z]+)--([a-z]+(?:--[a-z0-9]+(?:-[a-z0-9]+)*)*)--([a-z0-9-]+)\\)/g,\n\t\t\t( _match, _prefix, group1, group2 ) => {\n\t\t\t\tconst groups = group1.split( '--' ).concat( group2 );\n\t\t\t\treturn `var:${ groups.join( '|' ) }`;\n\t\t\t}\n\t\t);\n\t};\n\n\t// Recursive function to traverse the object\n\tconst traverse = ( current ) => {\n\t\tif ( typeof current === 'object' && current !== null ) {\n\t\t\tfor ( const key in current ) {\n\t\t\t\tif ( current.hasOwnProperty( key ) ) {\n\t\t\t\t\tcurrent[ key ] = traverse( current[ key ] );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( typeof current === 'string' ) {\n\t\t\treturn replaceVariable( current );\n\t\t}\n\t\treturn current;\n\t};\n\n\treturn traverse( obj );\n}\n\n/**\n * Remove empty arrays and keys with undefined values from an object.\n * Empty values causes issues with deepmerge, because it can overwrite default value we provide in base email theme.\n *\n * @param {Object} obj The object to clean.\n * @return {Object} The cleaned object.\n */\nfunction cleanupUserStyles( obj ) {\n\tconst cleanObject = ( current ) => {\n\t\tif (\n\t\t\t( typeof current === 'object' && current !== null ) ||\n\t\t\tcurrent === undefined\n\t\t) {\n\t\t\tif ( Array.isArray( current ) && current.length === 0 ) {\n\t\t\t\treturn undefined; // Remove empty arrays\n\t\t\t}\n\n\t\t\tfor ( const key in current ) {\n\t\t\t\tif ( current.hasOwnProperty( key ) ) {\n\t\t\t\t\tconst cleanedValue = cleanObject( current[ key ] );\n\t\t\t\t\tif ( cleanedValue === undefined ) {\n\t\t\t\t\t\tdelete current[ key ]; // Remove keys with undefined values\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrent[ key ] = cleanedValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn current;\n\t};\n\n\treturn cleanObject( obj );\n}\n\nexport const useEmailStyles = (): EmailStylesData => {\n\t// const { templateTheme, updateTemplateTheme } = useEmailTheme();\n\tconst { userTheme, updateUserTheme } = useUserTheme();\n\n\t// This is email level styling stored in post meta.\n\tconst styles = useMemo(\n\t\t() =>\n\t\t\tcleanupUserStyles( shortenWpPresetVariables( userTheme?.styles ) ),\n\t\t[ userTheme ]\n\t);\n\n\t// Default styles from theme.json.\n\tconst { styles: defaultStyles } = useSelect( ( select ) => ( {\n\t\tstyles: select( storeName ).getStyles(),\n\t} ) );\n\n\t// Update email styles.\n\tconst updateStyles = useCallback(\n\t\t( newStyles ) => {\n\t\t\tconst newTheme = {\n\t\t\t\t...userTheme,\n\t\t\t\tstyles: cleanupUserStyles( newStyles ),\n\t\t\t};\n\t\t\tupdateUserTheme( newTheme );\n\t\t},\n\t\t[ updateUserTheme, userTheme ]\n\t);\n\n\t// Update an email style prop.\n\tconst updateStyleProp = useCallback(\n\t\t( path, newValue ) => {\n\t\t\tconst newTheme = setImmutably(\n\t\t\t\tuserTheme,\n\t\t\t\t[ 'styles', ...path ],\n\t\t\t\tnewValue\n\t\t\t);\n\t\t\tupdateUserTheme( newTheme );\n\t\t},\n\t\t[ updateUserTheme, userTheme ]\n\t);\n\n\treturn {\n\t\tstyles: deepmerge.all( [ defaultStyles || {}, styles || {} ] ), // Merged styles\n\t\tuserStyles: userTheme?.styles, // Styles defined by user\n\t\tdefaultStyles, // Default styles from editors theme.json\n\t\tupdateStyleProp,\n\t\tupdateStyles,\n\t};\n};\n","/**\n * External dependencies\n */\nimport { useCallback, useReducer } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\n\n/**\n * A hook that records the 'entity' history in the post editor as a user\n * navigates between editing a post and editing the post template or patterns.\n *\n * Implemented as a stack, so a little similar to the browser history API.\n *\n * Used to control displaying UI elements like the back button.\n *\n * @param {number} initialPostId        The post id of the post when the editor loaded.\n * @param {string} initialPostType      The post type of the post when the editor loaded.\n * @param {string} defaultRenderingMode The rendering mode to switch to when navigating.\n *\n * @return {Object} An object containing the `currentPost` variable and\n *                 `onNavigateToEntityRecord` and `onNavigateToPreviousEntityRecord` functions.\n */\nexport function useNavigateToEntityRecord(\n\tinitialPostId,\n\tinitialPostType,\n\tdefaultRenderingMode\n) {\n\tconst [ postHistory, dispatch ] = useReducer(\n\t\t( historyState, { type, post, previousRenderingMode } ) => {\n\t\t\tif ( type === 'push' ) {\n\t\t\t\treturn [ ...historyState, { post, previousRenderingMode } ];\n\t\t\t}\n\t\t\tif ( type === 'pop' ) {\n\t\t\t\t// Try to leave one item in the history.\n\t\t\t\tif ( historyState.length > 1 ) {\n\t\t\t\t\treturn historyState.slice( 0, -1 );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn historyState;\n\t\t},\n\t\t[\n\t\t\t{\n\t\t\t\tpost: { postId: initialPostId, postType: initialPostType },\n\t\t\t},\n\t\t]\n\t);\n\n\tconst { post, previousRenderingMode } =\n\t\tpostHistory[ postHistory.length - 1 ];\n\n\tconst { getRenderingMode } = useSelect( editorStore );\n\tconst { setRenderingMode } = useDispatch( editorStore );\n\n\tconst onNavigateToEntityRecord = useCallback(\n\t\t( params ) => {\n\t\t\tdispatch( {\n\t\t\t\ttype: 'push',\n\t\t\t\tpost: { postId: params.postId, postType: params.postType },\n\t\t\t\t// Save the current rendering mode so we can restore it when navigating back.\n\t\t\t\tpreviousRenderingMode: getRenderingMode(),\n\t\t\t} );\n\t\t\tsetRenderingMode( defaultRenderingMode );\n\t\t},\n\t\t[ getRenderingMode, setRenderingMode, defaultRenderingMode ]\n\t);\n\n\tconst onNavigateToPreviousEntityRecord = useCallback( () => {\n\t\tdispatch( { type: 'pop' } );\n\t\tif ( previousRenderingMode ) {\n\t\t\tsetRenderingMode( previousRenderingMode );\n\t\t}\n\t}, [ setRenderingMode, previousRenderingMode ] );\n\n\treturn {\n\t\tcurrentPost: post,\n\t\tonNavigateToEntityRecord,\n\t\tonNavigateToPreviousEntityRecord:\n\t\t\tpostHistory.length > 1\n\t\t\t\t? onNavigateToPreviousEntityRecord\n\t\t\t\t: undefined,\n\t};\n}\n","/**\n * External dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { parse } from '@wordpress/blocks';\nimport { BlockInstance } from '@wordpress/blocks/index';\nimport { useSelect } from '@wordpress/data';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tstoreName,\n\tEmailTemplatePreview,\n\tTemplatePreview,\n\tEmailEditorPostType,\n} from '../store';\n\n// Shared reference to an empty array for cases where it is important to avoid\n// returning a new array reference on every invocation\nconst EMPTY_ARRAY = [];\n\n/**\n * We need to merge pattern blocks and template blocks for BlockPreview component.\n * @param templateBlocks - Parsed template blocks\n * @param innerBlocks    - Blocks to be set as content blocks for the template preview\n */\nfunction setPostContentInnerBlocks(\n\ttemplateBlocks: BlockInstance[],\n\tinnerBlocks: BlockInstance[]\n): BlockInstance[] {\n\treturn templateBlocks.map( ( block: BlockInstance ) => {\n\t\tif ( block.name === 'core/post-content' ) {\n\t\t\treturn {\n\t\t\t\t...block,\n\t\t\t\tname: 'core/group', // Change the name to group to render the innerBlocks\n\t\t\t\tinnerBlocks,\n\t\t\t};\n\t\t}\n\t\tif ( block.innerBlocks?.length ) {\n\t\t\treturn {\n\t\t\t\t...block,\n\t\t\t\tinnerBlocks: setPostContentInnerBlocks(\n\t\t\t\t\tblock.innerBlocks,\n\t\t\t\t\tinnerBlocks\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\t\treturn block;\n\t} );\n}\n\nconst InternalTemplateCache = {};\n\ntype GenerateTemplateCssThemeType = {\n\tpostTemplateContent?: EmailTemplatePreview;\n};\n/**\n * @param post\n * @param allTemplates\n */\nfunction generateTemplateContent(\n\tpost: EmailEditorPostType,\n\tallTemplates: TemplatePreview[] = []\n): GenerateTemplateCssThemeType {\n\tconst contentTemplate = post.template;\n\n\tconst defaultReturnObject = {\n\t\tpostTemplateContent: null,\n\t};\n\n\tif ( ! contentTemplate ) {\n\t\treturn defaultReturnObject;\n\t}\n\n\tif ( InternalTemplateCache[ contentTemplate ] ) {\n\t\treturn InternalTemplateCache[ contentTemplate ];\n\t}\n\n\tconst postTemplate = allTemplates.find(\n\t\t( template ) => template.slug === contentTemplate\n\t);\n\n\tif ( ! postTemplate ) {\n\t\treturn defaultReturnObject;\n\t}\n\n\tconst templateContent = {\n\t\tpostTemplateContent: postTemplate?.template,\n\t};\n\n\tInternalTemplateCache[ contentTemplate ] = templateContent;\n\n\treturn templateContent;\n}\n\nexport function usePreviewTemplates(\n\tcustomEmailContent = ''\n): [ TemplatePreview[], TemplatePreview[], boolean ] {\n\tconst { templates, patterns, emailPosts, hasEmailPosts } = useSelect(\n\t\t( select ) => {\n\t\t\tconst rawEmailPosts = select( storeName ).getSentEmailEditorPosts();\n\n\t\t\treturn {\n\t\t\t\ttemplates: select( storeName ).getEmailTemplates(),\n\t\t\t\tpatterns:\n\t\t\t\t\tselect( storeName ).getBlockPatternsForEmailTemplate(),\n\t\t\t\temailPosts: rawEmailPosts,\n\t\t\t\thasEmailPosts: !! ( rawEmailPosts && rawEmailPosts?.length ),\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\n\tconst allTemplates = useMemo( () => {\n\t\tlet contentPatterns = [];\n\t\tconst parsedCustomEmailContent =\n\t\t\tcustomEmailContent && parse( customEmailContent );\n\n\t\t// If there is a custom email content passed from outside we use it as email content for preview\n\t\t// otherwise generate one preview per template and pattern\n\t\tif ( parsedCustomEmailContent ) {\n\t\t\tcontentPatterns = [ { blocks: parsedCustomEmailContent } ];\n\t\t} else {\n\t\t\tcontentPatterns = patterns;\n\t\t}\n\n\t\tif ( ! contentPatterns || ! templates ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\tconst templateToPreview = [];\n\t\t// We don't want to show the blank template in the list\n\t\ttemplates\n\t\t\t?.filter(\n\t\t\t\t( template: EmailTemplatePreview ) =>\n\t\t\t\t\ttemplate.slug !== 'email-general'\n\t\t\t)\n\t\t\t?.forEach( ( template: EmailTemplatePreview ) => {\n\t\t\t\tcontentPatterns?.forEach( ( contentPattern ) => {\n\t\t\t\t\tlet parsedTemplate = parse( template.content?.raw );\n\t\t\t\t\tparsedTemplate = setPostContentInnerBlocks(\n\t\t\t\t\t\tparsedTemplate,\n\t\t\t\t\t\tcontentPattern.blocks\n\t\t\t\t\t);\n\t\t\t\t\ttemplateToPreview.push( {\n\t\t\t\t\t\tid: template.id,\n\t\t\t\t\t\tslug: template.slug,\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\t\t\t\t\t\tpreviewContentParsed: parsedTemplate,\n\t\t\t\t\t\temailParsed: contentPattern.blocks,\n\t\t\t\t\t\ttemplate,\n\t\t\t\t\t\tcategory: 'basic', // TODO: This will be updated once template category is implemented\n\t\t\t\t\t\ttype: template.type,\n\t\t\t\t\t\tdisplayName: contentPattern.title\n\t\t\t\t\t\t\t? `${ template.title.rendered } - ${ contentPattern.title }`\n\t\t\t\t\t\t\t: template.title.rendered,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} );\n\t\treturn templateToPreview;\n\t}, [ templates, patterns, customEmailContent ] );\n\n\tconst allEmailPosts = useMemo( () => {\n\t\treturn emailPosts?.map( ( post: EmailEditorPostType ) => {\n\t\t\tconst preferredTitle = applyFilters(\n\t\t\t\t'mailpoet_email_editor_preferred_template_title',\n\t\t\t\t'',\n\t\t\t\tpost\n\t\t\t);\n\t\t\tconst { postTemplateContent } = generateTemplateContent(\n\t\t\t\tpost,\n\t\t\t\tallTemplates\n\t\t\t);\n\t\t\tconst parsedPostContent = parse( post.content?.raw );\n\n\t\t\tlet parsedPostContentWithTemplate = parsedPostContent;\n\n\t\t\tif ( postTemplateContent?.content?.raw ) {\n\t\t\t\tparsedPostContentWithTemplate = setPostContentInnerBlocks(\n\t\t\t\t\tparse( postTemplateContent?.content?.raw ),\n\t\t\t\t\tparsedPostContent\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst template = {\n\t\t\t\t...post,\n\t\t\t\ttitle: {\n\t\t\t\t\traw: post.title.raw,\n\t\t\t\t\trendered: preferredTitle || post.title.rendered,\n\t\t\t\t},\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tid: post.id,\n\t\t\t\tslug: post.slug,\n\t\t\t\tpreviewContentParsed: parsedPostContentWithTemplate,\n\t\t\t\temailParsed: parsedPostContent,\n\t\t\t\tcategory: 'recent',\n\t\t\t\ttype: post.type,\n\t\t\t\tdisplayName: template.title.rendered,\n\t\t\t\ttemplate,\n\t\t\t};\n\t\t} ) as unknown as TemplatePreview[];\n\t}, [ emailPosts, allTemplates ] );\n\n\treturn [\n\t\tallTemplates || EMPTY_ARRAY,\n\t\tallEmailPosts || EMPTY_ARRAY,\n\t\thasEmailPosts,\n\t];\n}\n","/**\n * External dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * A custom hook that compares the provided value across renders and returns the\n * previous instance if shallow equality with previous instance exists.\n *\n * This is particularly useful when non-primitive types are used as\n * dependencies for react hooks.\n *\n * @param {*} value Value to keep the same if satisfies shallow equality.\n *\n * @return {*} The previous cached instance of the value if the current has  shallow equality with it.\n */\nexport function useShallowEqual< T >( value: T ): T {\n\tconst ref = useRef< T >( value );\n\tif ( ! isShallowEqual( value, ref.current ) ) {\n\t\tref.current = value;\n\t}\n\treturn ref.current;\n}\n","/**\n * External dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { useSelect, dispatch } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport { EmailTheme, storeName } from '../store';\n\nexport function useUserTheme() {\n\tconst { globalStylePost } = useSelect( ( select ) => {\n\t\tconst post = select(\n\t\t\tstoreName\n\t\t).getGlobalEmailStylesPost() as EmailTheme & { id: number };\n\t\treturn {\n\t\t\tglobalStylePost: post,\n\t\t};\n\t}, [] );\n\n\tconst updateGlobalStylesPost = useCallback(\n\t\t( newTheme: EmailTheme ) => {\n\t\t\tif ( ! globalStylePost ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvoid dispatch( coreStore ).editEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\t'wp_global_styles',\n\t\t\t\tglobalStylePost.id,\n\t\t\t\t{\n\t\t\t\t\tstyles: newTheme.styles,\n\t\t\t\t\tsettings: newTheme.settings,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t[ globalStylePost ]\n\t);\n\n\treturn {\n\t\tuserTheme: {\n\t\t\tsettings: globalStylePost?.settings,\n\t\t\tstyles: globalStylePost?.styles,\n\t\t},\n\t\tupdateUserTheme: updateGlobalStylesPost,\n\t};\n}\n","/**\n * External dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { dispatch, useSelect } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\n\nexport type NoticeAction = {\n\tlabel: string;\n\tonClick?: React.MouseEventHandler< HTMLButtonElement >;\n};\n\nexport type Notice = {\n\tid?: string;\n\ttitle?: string;\n\tcontent?: string;\n\tclassName?: string;\n\ttype?: string;\n\tchildren?: React.ReactNode;\n\tisDismissible?: boolean;\n\thandleDismiss?: () => void;\n\tactions?: NoticeAction[];\n};\n\nexport type ValidationNoticesData = {\n\tnotices: Notice[];\n\thasValidationNotice: ( noticeId?: string ) => boolean;\n\taddValidationNotice: (\n\t\tnoticeId: string,\n\t\tmessage: string,\n\t\tactions?: NoticeAction[]\n\t) => void;\n\tremoveValidationNotice: ( noticeId: string ) => void;\n};\n\nexport const useValidationNotices = (): ValidationNoticesData => {\n\tconst context = 'email-validation';\n\tconst notices = useSelect( ( mapSelect ) =>\n\t\tmapSelect( noticesStore ).getNotices( context )\n\t);\n\n\treturn {\n\t\tnotices,\n\t\thasValidationNotice: useCallback(\n\t\t\t( noticeId?: string ): boolean => {\n\t\t\t\tif ( ! noticeId ) {\n\t\t\t\t\treturn notices?.length > 0;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\tnotices.find( ( notice ) => notice.id === noticeId ) !==\n\t\t\t\t\tundefined\n\t\t\t\t);\n\t\t\t},\n\t\t\t[ notices ]\n\t\t),\n\t\taddValidationNotice: useCallback(\n\t\t\t( noticeId: string, message: string, actions = [] ): void => {\n\t\t\t\tvoid dispatch( noticesStore ).createNotice( 'error', message, {\n\t\t\t\t\tid: noticeId,\n\t\t\t\t\tisDismissible: false,\n\t\t\t\t\tactions,\n\t\t\t\t\tcontext,\n\t\t\t\t} );\n\t\t\t},\n\t\t\t[ context ]\n\t\t),\n\t\tremoveValidationNotice: useCallback(\n\t\t\t( noticeId: string ): void => {\n\t\t\t\tvoid dispatch( noticesStore ).removeNotice( noticeId, context );\n\t\t\t},\n\t\t\t[ context ]\n\t\t),\n\t};\n};\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { Block } from '@wordpress/blocks/index';\nimport { __ } from '@wordpress/i18n';\nimport { justifyLeft, justifyCenter, justifyRight } from '@wordpress/icons';\nimport {\n\tFlex,\n\tFlexItem,\n\tPanelBody,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n} from '@wordpress/components';\nimport {\n\tBlockControls,\n\tInspectorControls,\n\t// @ts-expect-error No types for this exist yet.\n\tJustifyContentControl,\n} from '@wordpress/block-editor';\n\nconst layoutBlockSupportKey = '__experimentalEmailFlexLayout';\n\nfunction hasLayoutBlockSupport( blockName: string ) {\n\t// @ts-expect-error No types for this exist yet.\n\treturn hasBlockSupport( blockName, layoutBlockSupportKey );\n}\n\nfunction JustificationControls( {\n\tjustificationValue,\n\tonChange,\n\tisToolbar = false,\n} ) {\n\tconst justificationOptions = [\n\t\t{\n\t\t\tvalue: 'left',\n\t\t\ticon: justifyLeft,\n\t\t\tlabel: __( 'Justify items left', 'mailpoet' ),\n\t\t},\n\t\t{\n\t\t\tvalue: 'center',\n\t\t\ticon: justifyCenter,\n\t\t\tlabel: __( 'Justify items center', 'mailpoet' ),\n\t\t},\n\t\t{\n\t\t\tvalue: 'right',\n\t\t\ticon: justifyRight,\n\t\t\tlabel: __( 'Justify items right', 'mailpoet' ),\n\t\t},\n\t];\n\n\tif ( isToolbar ) {\n\t\tconst allowedValues = justificationOptions.map(\n\t\t\t( option ) => option.value\n\t\t);\n\t\treturn (\n\t\t\t<JustifyContentControl\n\t\t\t\tvalue={ justificationValue }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tallowedControls={ allowedValues }\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tplacement: 'bottom-start',\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tlabel={ __( 'Justification', 'mailpoet' ) }\n\t\t\tvalue={ justificationValue }\n\t\t\tonChange={ onChange }\n\t\t\tclassName=\"block-editor-hooks__flex-layout-justification-controls\"\n\t\t>\n\t\t\t{ justificationOptions.map( ( { value, icon, label } ) => (\n\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\tkey={ value }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</ToggleGroupControl>\n\t);\n}\n\nfunction LayoutControls( { setAttributes, attributes, name: blockName } ) {\n\tconst layoutBlockSupport = getBlockSupport(\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\t\tblockName,\n\t\t// @ts-expect-error No types for this exist yet.\n\t\tlayoutBlockSupportKey,\n\t\t{}\n\t);\n\n\tif ( ! layoutBlockSupport ) {\n\t\treturn null;\n\t}\n\n\tconst { justifyContent = 'left' } = attributes.layout || {};\n\n\tconst onJustificationChange = ( value ) => {\n\t\tsetAttributes( {\n\t\t\tlayout: {\n\t\t\t\t...attributes.layout,\n\t\t\t\tjustifyContent: value,\n\t\t\t},\n\t\t} );\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Layout', 'mailpoet' ) }>\n\t\t\t\t\t<Flex>\n\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t<JustificationControls\n\t\t\t\t\t\t\t\tjustificationValue={ justifyContent }\n\t\t\t\t\t\t\t\tonChange={ onJustificationChange }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t</Flex>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t{ /* @ts-expect-error No types for this exist yet. */ }\n\t\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\n\t\t\t\t<JustificationControls\n\t\t\t\t\tjustificationValue={ justifyContent }\n\t\t\t\t\tonChange={ onJustificationChange }\n\t\t\t\t\tisToolbar\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t</>\n\t);\n}\n\n/**\n * Filters registered block settings, extending attributes to include `layout`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings: Block ) {\n\tif ( hasLayoutBlockSupport( settings.name ) ) {\n\t\treturn {\n\t\t\t...settings,\n\t\t\tattributes: {\n\t\t\t\t...settings.attributes,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'object',\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\treturn settings;\n}\n\n/**\n * Override the default edit UI to include layout controls\n *\n * @param {Function} BlockEdit Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withLayoutControls = createHigherOrderComponent(\n\t// @ts-expect-error No types for this exist yet.\n\t( BlockEdit ) => ( props ) => {\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\t\tconst supportLayout = hasLayoutBlockSupport( props.name );\n\n\t\treturn [\n\t\t\tsupportLayout && <LayoutControls key=\"layout\" { ...props } />,\n\t\t\t<BlockEdit key=\"edit\" { ...props } />,\n\t\t];\n\t},\n\t'withLayoutControls'\n);\n\nfunction BlockWithLayoutStyles( { block: BlockListBlock, props } ) {\n\tconst { attributes } = props;\n\tconst { layout } = attributes;\n\n\tconst layoutClasses = 'is-layout-email-flex is-layout-flex';\n\tconst justify = ( layout?.justifyContent as string ) || 'left';\n\tconst justificationClass = `is-content-justification-${ justify }`;\n\n\tconst layoutClassNames = classnames( justificationClass, layoutClasses );\n\treturn <BlockListBlock { ...props } className={ layoutClassNames } />;\n}\n\n/**\n * Override the default block element to add the layout classes.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withLayoutStyles = createHigherOrderComponent(\n\t( BlockListBlock ) =>\n\t\tfunction maybeWrapWithLayoutStyles( props ) {\n\t\t\tconst blockSupportsLayout = hasLayoutBlockSupport(\n\t\t\t\tprops.name as string\n\t\t\t);\n\t\t\tif ( ! blockSupportsLayout ) {\n\t\t\t\treturn <BlockListBlock { ...props } />;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<BlockWithLayoutStyles\n\t\t\t\t\tblock={ BlockListBlock }\n\t\t\t\t\tprops={ props }\n\t\t\t\t/>\n\t\t\t);\n\t\t},\n\t'withLayoutStyles'\n);\n\nexport function initializeLayout() {\n\taddFilter(\n\t\t'blocks.registerBlockType',\n\t\t'mailpoet-email-editor/layout/addAttribute',\n\t\taddAttribute\n\t);\n\taddFilter(\n\t\t'editor.BlockListBlock',\n\t\t'mailpoet-email-editor/with-layout-styles',\n\t\twithLayoutStyles\n\t);\n\taddFilter(\n\t\t'editor.BlockEdit',\n\t\t'mailpoet-email-editor/with-inspector-controls',\n\t\twithLayoutControls\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\nimport { store as coreStore } from '@wordpress/core-data';\nimport {\n\t// @ts-expect-error No types for privateApis.\n\tprivateApis as blockEditorPrivateApis,\n} from '@wordpress/block-editor';\n\nconst { unlock } = __dangerousOptInToUnstableAPIsOnlyForCoreModules(\n\t'I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.',\n\t'@wordpress/edit-site' // The module name must be in the list of allowed, so for now I used the package name of the post editor\n);\n\n/**\n * We use the experimental block canvas to render the block editor's canvas.\n * Currently, this is needed because we use contentRef property which is not available in the stable BlockCanvas\n * The property is used for handling clicks for selecting block to edit and to display modal for switching between email and template.\n */\nconst { ExperimentalBlockCanvas: BlockCanvas } = unlock(\n\tblockEditorPrivateApis\n);\n\n/**\n * Tabs are used in the right sidebar header to switch between Email and Block settings.\n * Tabs should be close to stabilization https://github.com/WordPress/gutenberg/pull/61072\n */\nconst { Tabs } = unlock( componentsPrivateApis );\n\n/**\n * We need the following selectors from core store to fetch block patterns for the email post type.\n * @param select - select function from the core store.\n */\nconst unlockPatternsRelatedSelectorsFromCoreStore = ( select ) => {\n\tconst { hasFinishedResolution, getBlockPatternsForPostType } = unlock(\n\t\tselect( coreStore )\n\t);\n\treturn { hasFinishedResolution, getBlockPatternsForPostType };\n};\n\n/**\n * Selector getEnabledClientIdsTree for block-editor store is used to find nearest editable block to select on click in\n * useSelectNearestEditableBlock\n * We copied useSelectNearestEditableBlock from Gutenberg.\n * @param selectHook - useSelect call from the block editor store `useSelect( blockEditorStore ).\n */\nconst unlockGetEnabledClientIdsTree = ( selectHook ) => {\n\tconst { getEnabledClientIdsTree } = unlock( selectHook );\n\treturn getEnabledClientIdsTree;\n};\n\n/**\n * We use the ColorPanel component from the block editor to render the color panel in the style settings sidebar.\n */\nconst { ColorPanel: StylesColorPanel } = unlock( blockEditorPrivateApis );\n\n/**\n * The useGlobalStylesOutputWithConfig is used to generate the CSS for the email editor content from the style settings.\n */\nconst { useGlobalStylesOutputWithConfig } = unlock( blockEditorPrivateApis );\n\nexport {\n\tBlockCanvas,\n\tTabs,\n\tStylesColorPanel,\n\tunlockPatternsRelatedSelectorsFromCoreStore,\n\tunlockGetEnabledClientIdsTree,\n\tuseGlobalStylesOutputWithConfig,\n};\n","/**\n * External dependencies\n */\nimport { dispatch, select } from '@wordpress/data';\nimport { store as interfaceStore } from '@wordpress/interface';\nimport {\n\tstore as coreStore,\n\tstore as coreDataStore,\n} from '@wordpress/core-data';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { store as editorStore } from '@wordpress/editor';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { apiFetch } from '@wordpress/data-controls';\nimport wpApiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport {\n\t// @ts-expect-error No types for __unstableSerializeAndClean\n\t__unstableSerializeAndClean,\n\tparse,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tstoreName,\n\tmainSidebarDocumentTab,\n\teditorCurrentPostType,\n} from './constants';\nimport {\n\tSendingPreviewStatus,\n\tState,\n\tFeature,\n\tPersonalizationTag,\n} from './types';\nimport { recordEvent } from '../events';\n\nexport const toggleFeature =\n\t( feature: Feature ) =>\n\t( { registry } ): unknown =>\n\t\tregistry.dispatch( preferencesStore ).toggle( storeName, feature );\n\nexport const changePreviewDeviceType =\n\t( deviceType: string ) =>\n\t( { registry } ) =>\n\t\tvoid registry.dispatch( editorStore ).setDeviceType( deviceType );\n\nexport function togglePreviewModal( isOpen: boolean ) {\n\treturn {\n\t\ttype: 'CHANGE_PREVIEW_STATE',\n\t\tstate: { isModalOpened: isOpen } as Partial< State[ 'preview' ] >,\n\t} as const;\n}\n\nexport function togglePersonalizationTagsModal(\n\tisOpen: boolean,\n\tpayload: Partial< State[ 'personalizationTags' ] > = {}\n) {\n\treturn {\n\t\ttype: 'CHANGE_PERSONALIZATION_TAGS_STATE',\n\t\tstate: {\n\t\t\tisModalOpened: isOpen,\n\t\t\t...payload,\n\t\t} as Partial< State[ 'personalizationTags' ] >,\n\t} as const;\n}\n\nexport function updateSendPreviewEmail( toEmail: string ) {\n\treturn {\n\t\ttype: 'CHANGE_PREVIEW_STATE',\n\t\tstate: { toEmail } as Partial< State[ 'preview' ] >,\n\t} as const;\n}\n\nexport const openSidebar =\n\t( key = mainSidebarDocumentTab ) =>\n\t( { registry } ): unknown => {\n\t\treturn registry\n\t\t\t.dispatch( interfaceStore )\n\t\t\t.enableComplementaryArea( storeName, key );\n\t};\n\nexport const closeSidebar =\n\t() =>\n\t( { registry } ): unknown => {\n\t\treturn registry\n\t\t\t.dispatch( interfaceStore )\n\t\t\t.disableComplementaryArea( storeName );\n\t};\n\nexport function toggleSettingsSidebarActiveTab( activeTab: string ) {\n\treturn {\n\t\ttype: 'TOGGLE_SETTINGS_SIDEBAR_ACTIVE_TAB',\n\t\tstate: { activeTab } as Partial< State[ 'settingsSidebar' ] >,\n\t} as const;\n}\n\nexport function* saveEditedEmail() {\n\tconst postId = select( storeName ).getEmailPostId();\n\t// This returns a promise\n\n\tconst result = yield dispatch( coreDataStore ).saveEditedEntityRecord(\n\t\t'postType',\n\t\teditorCurrentPostType,\n\t\tpostId,\n\t\t{ throwOnError: true }\n\t);\n\n\tresult.then( () => {\n\t\tvoid dispatch( noticesStore ).createErrorNotice(\n\t\t\t__( 'Email saved!', 'mailpoet' ),\n\t\t\t{\n\t\t\t\ttype: 'snackbar',\n\t\t\t\tisDismissible: true,\n\t\t\t\tcontext: 'email-editor',\n\t\t\t}\n\t\t);\n\t} );\n\n\tresult.catch( () => {\n\t\tvoid dispatch( noticesStore ).createErrorNotice(\n\t\t\t__(\n\t\t\t\t'The email could not be saved. Please, clear browser cache and reload the page. If the problem persists, duplicate the email and try again.',\n\t\t\t\t'mailpoet'\n\t\t\t),\n\t\t\t{\n\t\t\t\ttype: 'default',\n\t\t\t\tisDismissible: true,\n\t\t\t\tcontext: 'email-editor',\n\t\t\t}\n\t\t);\n\t} );\n}\n\nexport const setTemplateToPost =\n\t( templateSlug ) =>\n\tasync ( { registry } ) => {\n\t\tconst postId = registry.select( storeName ).getEmailPostId();\n\t\tregistry\n\t\t\t.dispatch( coreDataStore )\n\t\t\t.editEntityRecord( 'postType', editorCurrentPostType, postId, {\n\t\t\t\ttemplate: templateSlug,\n\t\t\t} );\n\t};\n\nexport function* requestSendingNewsletterPreview( email: string ) {\n\t// If preview is already sending do nothing\n\tconst previewState = select( storeName ).getPreviewState();\n\tif ( previewState.isSendingPreviewEmail ) {\n\t\treturn;\n\t}\n\t// Initiate sending\n\tyield {\n\t\ttype: 'CHANGE_PREVIEW_STATE',\n\t\tstate: {\n\t\t\tsendingPreviewStatus: null,\n\t\t\tisSendingPreviewEmail: true,\n\t\t} as Partial< State[ 'preview' ] >,\n\t} as const;\n\ttry {\n\t\tconst postId = select( storeName ).getEmailPostId();\n\n\t\tyield apiFetch( {\n\t\t\tpath: '/mailpoet-email-editor/v1/send_preview_email',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\temail,\n\t\t\t\tpostId,\n\t\t\t},\n\t\t} );\n\n\t\tyield {\n\t\t\ttype: 'CHANGE_PREVIEW_STATE',\n\t\t\tstate: {\n\t\t\t\tsendingPreviewStatus: SendingPreviewStatus.SUCCESS,\n\t\t\t\tisSendingPreviewEmail: false,\n\t\t\t},\n\t\t};\n\t\trecordEvent( 'sent_preview_email', { postId, email } );\n\t} catch ( errorResponse ) {\n\t\trecordEvent( 'sent_preview_email_error', { email } );\n\t\tyield {\n\t\t\ttype: 'CHANGE_PREVIEW_STATE',\n\t\t\tstate: {\n\t\t\t\tsendingPreviewStatus: SendingPreviewStatus.ERROR,\n\t\t\t\tisSendingPreviewEmail: false,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t// @ts-ignore\n\t\t\t\terrorMessage: JSON.stringify( errorResponse?.error ),\n\t\t\t},\n\t\t};\n\t}\n}\n\n/**\n * Revert template modifications to defaults\n * Created based on https://github.com/WordPress/gutenberg/blob/4d225cc2ba6f09822227e7a820b8a555be7c4d48/packages/editor/src/store/private-actions.js#L241\n * @param template - Template post object\n */\nexport function revertAndSaveTemplate( template ) {\n\treturn async ( { registry } ) => {\n\t\ttry {\n\t\t\tconst templateEntityConfig = registry\n\t\t\t\t.select( coreStore )\n\t\t\t\t.getEntityConfig( 'postType', template.type as string );\n\n\t\t\tconst fileTemplatePath = addQueryArgs(\n\t\t\t\t`${ templateEntityConfig.baseURL as string }/${\n\t\t\t\t\ttemplate.id as string\n\t\t\t\t}`,\n\t\t\t\t{ context: 'edit', source: 'theme' }\n\t\t\t);\n\n\t\t\tconst fileTemplate = await wpApiFetch( { path: fileTemplatePath } );\n\n\t\t\tconst serializeBlocks = ( {\n\t\t\t\tblocks: blocksForSerialization = [],\n\t\t\t} ) => __unstableSerializeAndClean( blocksForSerialization );\n\n\t\t\t// @ts-expect-error template type is not defined\n\t\t\tconst blocks = parse( fileTemplate?.content?.raw as string );\n\n\t\t\tawait registry.dispatch( coreStore ).editEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\ttemplate.type as string,\n\t\t\t\t// @ts-expect-error template type is not defined\n\t\t\t\tfileTemplate.id as string,\n\t\t\t\t{\n\t\t\t\t\tcontent: serializeBlocks,\n\t\t\t\t\tblocks,\n\t\t\t\t\tsource: 'theme',\n\t\t\t\t}\n\t\t\t);\n\t\t\tawait registry\n\t\t\t\t.dispatch( coreStore )\n\t\t\t\t.saveEditedEntityRecord(\n\t\t\t\t\t'postType',\n\t\t\t\t\ttemplate.type,\n\t\t\t\t\ttemplate.id,\n\t\t\t\t\t{}\n\t\t\t\t);\n\t\t\tvoid registry.dispatch( noticesStore ).createSuccessNotice(\n\t\t\t\tsprintf(\n\t\t\t\t\t/* translators: The template/part's name. */\n\t\t\t\t\t__( '\"%s\" reset.', 'mailpoet' ),\n\t\t\t\t\tdecodeEntities( template.title )\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\tid: 'edit-site-template-reverted',\n\t\t\t\t}\n\t\t\t);\n\t\t} catch ( error ) {\n\t\t\tvoid registry\n\t\t\t\t.dispatch( noticesStore )\n\t\t\t\t.createErrorNotice(\n\t\t\t\t\t__(\n\t\t\t\t\t\t'An error occurred while reverting the template.',\n\t\t\t\t\t\t'mailpoet'\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\t};\n}\n\nexport function setIsFetchingPersonalizationTags( isFetching: boolean ) {\n\treturn {\n\t\ttype: 'SET_IS_FETCHING_PERSONALIZATION_TAGS',\n\t\tstate: {\n\t\t\tisFetching,\n\t\t} as Partial< State[ 'personalizationTags' ] >,\n\t} as const;\n}\n\nexport function setPersonalizationTagsList( list: PersonalizationTag[] ) {\n\treturn {\n\t\ttype: 'SET_PERSONALIZATION_TAGS_LIST',\n\t\tstate: {\n\t\t\tlist,\n\t\t} as Partial< State[ 'personalizationTags' ] >,\n\t} as const;\n}\n","export const storeName = 'email-editor/editor';\n\nexport const mainSidebarId = 'email-editor/editor/main';\nexport const mainSidebarDocumentTab = 'document';\nexport const mainSidebarBlockTab = 'block';\nexport const stylesSidebarId = 'email-editor/editor/styles';\n\n// these values are set once on a page load, so it's fine to keep them here.\nexport const editorCurrentPostType =\n\twindow.MailPoetEmailEditor.current_post_type;\nexport const editorCurrentPostId = parseInt(\n\twindow.MailPoetEmailEditor.current_post_id,\n\t10\n);\n","/**\n * Internal dependencies\n */\nimport { mainSidebarDocumentTab, editorCurrentPostId } from './constants';\nimport { State } from './types';\nimport { getEditorSettings, getEditorTheme, getUrls } from './settings';\n\nexport function getInitialState(): State {\n\tconst postId = editorCurrentPostId;\n\treturn {\n\t\tinserterSidebar: {\n\t\t\tisOpened: false,\n\t\t},\n\t\tlistviewSidebar: {\n\t\t\tisOpened: false,\n\t\t},\n\t\tsettingsSidebar: {\n\t\t\tactiveTab: mainSidebarDocumentTab,\n\t\t},\n\t\tpostId,\n\t\teditorSettings: getEditorSettings(),\n\t\ttheme: getEditorTheme(),\n\t\tstyles: {\n\t\t\tglobalStylesPostId: window.MailPoetEmailEditor.user_theme_post_id,\n\t\t},\n\t\tautosaveInterval: 60,\n\t\turls: getUrls(),\n\t\tpreview: {\n\t\t\tdeviceType: 'Desktop',\n\t\t\ttoEmail: window.MailPoetEmailEditor.current_wp_user_email,\n\t\t\tisModalOpened: false,\n\t\t\tisSendingPreviewEmail: false,\n\t\t\tsendingPreviewStatus: null,\n\t\t},\n\t\tpersonalizationTags: {\n\t\t\tlist: [],\n\t\t\tisFetching: false,\n\t\t},\n\t};\n}\n","/**\n * Internal dependencies\n */\nimport { State } from './types';\n\nexport function reducer( state: State, action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'CHANGE_PREVIEW_STATE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpreview: { ...state.preview, ...action.state },\n\t\t\t};\n\t\tcase 'CHANGE_PERSONALIZATION_TAGS_STATE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpersonalizationTags: {\n\t\t\t\t\t...state.personalizationTags,\n\t\t\t\t\t...action.state,\n\t\t\t\t},\n\t\t\t};\n\t\tcase 'TOGGLE_SETTINGS_SIDEBAR_ACTIVE_TAB':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsettingsSidebar: {\n\t\t\t\t\t...state.settingsSidebar,\n\t\t\t\t\tactiveTab: action.state.activeTab,\n\t\t\t\t},\n\t\t\t};\n\t\tcase 'SET_PERSONALIZATION_TAGS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpersonalizationTags: {\n\t\t\t\t\t...state.personalizationTags,\n\t\t\t\t\tlist: action.personalizationTags,\n\t\t\t\t},\n\t\t\t};\n\t\tcase 'SET_IS_FETCHING_PERSONALIZATION_TAGS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpersonalizationTags: {\n\t\t\t\t\t...state.personalizationTags,\n\t\t\t\t\t...action.state,\n\t\t\t\t},\n\t\t\t};\n\t\tcase 'SET_PERSONALIZATION_TAGS_LIST':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpersonalizationTags: {\n\t\t\t\t\t...state.personalizationTags,\n\t\t\t\t\t...action.state,\n\t\t\t\t},\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","/**\n * External dependencies\n */\nimport { apiFetch } from '@wordpress/data-controls';\nimport { select } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tsetPersonalizationTagsList,\n\tsetIsFetchingPersonalizationTags,\n} from './actions';\nimport { storeName } from './constants';\n\nexport function* getPersonalizationTagsList() {\n\t// Access the state to check if already fetching\n\tconst state = yield select( storeName );\n\tconst isAlreadyFetching = state.personalizationTags?.isFetching;\n\n\t// Exit if a fetch operation is already in progress\n\tif ( isAlreadyFetching ) {\n\t\treturn;\n\t}\n\n\t// Mark as fetching\n\tyield setIsFetchingPersonalizationTags( true );\n\n\ttry {\n\t\tconst data = yield apiFetch( {\n\t\t\tpath: `/mailpoet-email-editor/v1/get_personalization_tags`,\n\t\t\tmethod: 'GET',\n\t\t} );\n\n\t\tyield setPersonalizationTagsList( data.result );\n\t} finally {\n\t\t// Ensure fetching status is reset\n\t\tyield setIsFetchingPersonalizationTags( false );\n\t}\n}\n","/**\n * External dependencies\n */\nimport { createRegistrySelector, createSelector } from '@wordpress/data';\nimport { store as coreDataStore } from '@wordpress/core-data';\nimport { store as interfaceStore } from '@wordpress/interface';\nimport { store as editorStore } from '@wordpress/editor';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { serialize, parse } from '@wordpress/blocks';\nimport { BlockInstance } from '@wordpress/blocks/index';\nimport { Post } from '@wordpress/core-data/build-types/entity-types/post';\n\n/**\n * Internal dependencies\n */\nimport { storeName, editorCurrentPostType } from './constants';\nimport { State, Feature, EmailTemplate, EmailEditorPostType } from './types';\n\nfunction getContentFromEntity( entity ): string {\n\tif ( entity?.content && typeof entity.content === 'function' ) {\n\t\treturn entity.content( entity ) as string;\n\t}\n\tif ( entity?.blocks ) {\n\t\treturn serialize( entity.blocks );\n\t}\n\tif ( entity?.content ) {\n\t\treturn entity.content as string;\n\t}\n\treturn '';\n}\n\nconst patternsWithParsedBlocks = new WeakMap();\nfunction enhancePatternWithParsedBlocks( pattern ) {\n\tlet enhancedPattern = patternsWithParsedBlocks.get( pattern );\n\tif ( ! enhancedPattern ) {\n\t\tenhancedPattern = {\n\t\t\t...pattern,\n\t\t\tget blocks() {\n\t\t\t\treturn parse( pattern.content );\n\t\t\t},\n\t\t};\n\t\tpatternsWithParsedBlocks.set( pattern, enhancedPattern );\n\t}\n\treturn enhancedPattern;\n}\n\nexport const isFeatureActive = createRegistrySelector(\n\t( select ) =>\n\t\t( _, feature: Feature ): boolean =>\n\t\t\t!! select( preferencesStore ).get( storeName, feature )\n);\n\nexport const isSidebarOpened = createRegistrySelector(\n\t( select ) => (): boolean =>\n\t\t!! select( interfaceStore ).getActiveComplementaryArea( storeName )\n);\n\nexport const hasEdits = createRegistrySelector( ( select ) => (): boolean => {\n\tconst postId = select( storeName ).getEmailPostId();\n\treturn !! select( coreDataStore ).hasEditsForEntityRecord(\n\t\t'postType',\n\t\teditorCurrentPostType,\n\t\tpostId\n\t);\n} );\n\nexport const isEmailLoaded = createRegistrySelector(\n\t( select ) => (): boolean => {\n\t\tconst postId = select( storeName ).getEmailPostId();\n\t\treturn !! select( coreDataStore ).getEntityRecord(\n\t\t\t'postType',\n\t\t\teditorCurrentPostType,\n\t\t\tpostId\n\t\t);\n\t}\n);\n\nexport const isSaving = createRegistrySelector( ( select ) => (): boolean => {\n\tconst postId = select( storeName ).getEmailPostId();\n\treturn !! select( coreDataStore ).isSavingEntityRecord(\n\t\t'postType',\n\t\teditorCurrentPostType,\n\t\tpostId\n\t);\n} );\n\nexport const isEmpty = createRegistrySelector( ( select ) => (): boolean => {\n\tconst postId = select( storeName ).getEmailPostId();\n\n\tconst post: EmailEditorPostType = select( coreDataStore ).getEntityRecord(\n\t\t'postType',\n\t\teditorCurrentPostType,\n\t\tpostId\n\t);\n\tif ( ! post ) {\n\t\treturn true;\n\t}\n\n\tconst { content, title } = post;\n\treturn ! content.raw && ! title.raw;\n} );\n\nexport const hasEmptyContent = createRegistrySelector(\n\t( select ) => (): boolean => {\n\t\tconst postId = select( storeName ).getEmailPostId();\n\n\t\tconst post = select( coreDataStore ).getEntityRecord(\n\t\t\t'postType',\n\t\t\teditorCurrentPostType,\n\t\t\tpostId\n\t\t);\n\t\tif ( ! post ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// @ts-expect-error Missing property in type\n\t\tconst { content } = post;\n\t\treturn ! content.raw;\n\t}\n);\n\nexport const isEmailSent = createRegistrySelector(\n\t( select ) => (): boolean => {\n\t\tconst postId = select( storeName ).getEmailPostId();\n\n\t\tconst post = select( coreDataStore ).getEntityRecord(\n\t\t\t'postType',\n\t\t\teditorCurrentPostType,\n\t\t\tpostId\n\t\t);\n\t\tif ( ! post ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// @ts-expect-error Missing property in type\n\t\tconst status = post.status;\n\t\treturn status === 'sent';\n\t}\n);\n\n/**\n * Returns the content of the email being edited.\n *\n * @param {Object} state Global application state.\n * @return {string} Post content.\n */\nexport const getEditedEmailContent = createRegistrySelector(\n\t( select ) => (): string => {\n\t\tconst postId = select( storeName ).getEmailPostId();\n\t\tconst record = select( coreDataStore ).getEditedEntityRecord(\n\t\t\t'postType',\n\t\t\teditorCurrentPostType,\n\t\t\tpostId\n\t\t) as unknown as\n\t\t\t| { content: string | unknown; blocks: BlockInstance[] }\n\t\t\t| undefined;\n\n\t\tif ( record ) {\n\t\t\treturn getContentFromEntity( record );\n\t\t}\n\t\treturn '';\n\t}\n);\n\nexport const getSentEmailEditorPosts = createRegistrySelector(\n\t( select ) => () =>\n\t\tselect( coreDataStore )\n\t\t\t.getEntityRecords( 'postType', editorCurrentPostType, {\n\t\t\t\tper_page: 30, // show a maximum of 30 for now\n\t\t\t\tstatus: 'publish,sent', // show only sent emails\n\t\t\t} )\n\t\t\t?.filter(\n\t\t\t\t( post: EmailEditorPostType ) => post?.content?.raw !== '' // filter out empty content\n\t\t\t) || []\n);\n\nexport const getBlockPatternsForEmailTemplate = createRegistrySelector(\n\t( select ) =>\n\t\tcreateSelector(\n\t\t\t() =>\n\t\t\t\tselect( coreDataStore )\n\t\t\t\t\t.getBlockPatterns()\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t( { templateTypes } ) =>\n\t\t\t\t\t\t\tArray.isArray( templateTypes ) &&\n\t\t\t\t\t\t\ttemplateTypes.includes( 'email-template' )\n\t\t\t\t\t)\n\t\t\t\t\t.map( enhancePatternWithParsedBlocks ),\n\t\t\t() => [ select( coreDataStore ).getBlockPatterns() ]\n\t\t)\n);\n\n/**\n * COPIED FROM https://github.com/WordPress/gutenberg/blob/9c6d4fe59763b188d27ad937c2f0daa39e4d9341/packages/edit-post/src/store/selectors.js\n * Retrieves the template of the currently edited post.\n *\n * @return {Object?} Post Template.\n */\nexport const getEditedPostTemplate = createRegistrySelector(\n\t( select ) => (): EmailTemplate => {\n\t\tconst currentTemplate =\n\t\t\t// @ts-expect-error Expected 0 arguments, but got 1.\n\t\t\tselect( editorStore ).getEditedPostAttribute( 'template' );\n\n\t\tif ( currentTemplate ) {\n\t\t\tconst templateWithSameSlug = select( coreDataStore )\n\t\t\t\t.getEntityRecords( 'postType', 'wp_template', { per_page: -1 } )\n\t\t\t\t// @ts-expect-error Missing property in type\n\t\t\t\t?.find( ( template ) => template.slug === currentTemplate );\n\n\t\t\tif ( ! templateWithSameSlug ) {\n\t\t\t\treturn templateWithSameSlug as EmailTemplate;\n\t\t\t}\n\n\t\t\treturn select( coreDataStore ).getEditedEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\t'wp_template',\n\n\t\t\t\t// @ts-expect-error getEditedPostAttribute\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\t\t\t\ttemplateWithSameSlug.id\n\t\t\t) as unknown as EmailTemplate;\n\t\t}\n\n\t\tconst defaultTemplateId = select( coreDataStore ).getDefaultTemplateId(\n\t\t\t{\n\t\t\t\tslug: 'email-general',\n\t\t\t}\n\t\t);\n\n\t\treturn select( coreDataStore ).getEditedEntityRecord(\n\t\t\t'postType',\n\t\t\t'wp_template',\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\t\t\tdefaultTemplateId\n\t\t) as unknown as EmailTemplate;\n\t}\n);\n\nexport const getCurrentTemplate = createRegistrySelector( ( select ) => () => {\n\tconst isEditingTemplate =\n\t\tselect( editorStore ).getCurrentPostType() === 'wp_template';\n\n\tif ( isEditingTemplate ) {\n\t\tconst templateId = select( editorStore ).getCurrentPostId();\n\n\t\treturn select( coreDataStore ).getEditedEntityRecord(\n\t\t\t'postType',\n\t\t\t'wp_template',\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\t\t\ttemplateId\n\t\t) as unknown as EmailTemplate;\n\t}\n\treturn getEditedPostTemplate();\n} );\n\nexport const getCurrentTemplateContent = () => {\n\tconst template = getCurrentTemplate();\n\tif ( template ) {\n\t\treturn getContentFromEntity( template );\n\t}\n\treturn '';\n};\n\nexport const getGlobalEmailStylesPost = createRegistrySelector(\n\t( select ) => () => {\n\t\tconst postId = select( storeName ).getGlobalStylesPostId();\n\n\t\tif ( postId ) {\n\t\t\treturn select( coreDataStore ).getEditedEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\t'wp_global_styles',\n\t\t\t\tpostId\n\t\t\t) as unknown as Post;\n\t\t}\n\t\treturn getEditedPostTemplate();\n\t}\n);\n\n/**\n * Retrieves the email templates.\n */\nexport const getEmailTemplates = createRegistrySelector(\n\t( select ) => () =>\n\t\tselect( coreDataStore )\n\t\t\t.getEntityRecords( 'postType', 'wp_template', {\n\t\t\t\tper_page: -1,\n\t\t\t\tpost_type: editorCurrentPostType,\n\t\t\t} )\n\t\t\t// We still need to filter the templates because, in some cases, the API also returns custom templates\n\t\t\t// ignoring the post_type filter in the query\n\t\t\t?.filter( ( template ) =>\n\t\t\t\t// @ts-expect-error Missing property in type\n\t\t\t\ttemplate.post_types.includes( editorCurrentPostType )\n\t\t\t)\n);\n\nexport function getEmailPostId( state: State ): number {\n\treturn state.postId;\n}\n\nexport function getSettingsSidebarActiveTab( state: State ): string {\n\treturn state.settingsSidebar.activeTab;\n}\n\nexport function getInitialEditorSettings(\n\tstate: State\n): State[ 'editorSettings' ] {\n\treturn state.editorSettings;\n}\n\nexport function getPaletteColors(\n\tstate: State\n): State[ 'editorSettings' ][ '__experimentalFeatures' ][ 'color' ][ 'palette' ] {\n\t// eslint-disable-next-line no-underscore-dangle\n\treturn state.editorSettings.__experimentalFeatures.color.palette;\n}\n\nexport function getPreviewState( state: State ): State[ 'preview' ] {\n\treturn state.preview;\n}\n\nexport function getPersonalizationTagsState(\n\tstate: State\n): State[ 'personalizationTags' ] {\n\treturn state.personalizationTags;\n}\n\nexport function getPersonalizationTagsList(\n\tstate: State\n): State[ 'personalizationTags' ][ 'list' ] {\n\treturn state.personalizationTags.list;\n}\n\nexport const getDeviceType = createRegistrySelector(\n\t( select ) => () =>\n\t\t// @ts-expect-error getDeviceType is missing in types.\n\t\tselect( editorStore ).getDeviceType() as string\n);\n\nexport function getStyles( state: State ): State[ 'theme' ][ 'styles' ] {\n\treturn state.theme.styles;\n}\n\nexport function getAutosaveInterval(\n\tstate: State\n): State[ 'autosaveInterval' ] {\n\treturn state.autosaveInterval;\n}\n\nexport function getTheme( state: State ): State[ 'theme' ] {\n\treturn state.theme;\n}\n\nexport function getGlobalStylesPostId( state: State ): number | null {\n\treturn state.styles.globalStylesPostId;\n}\n\nexport function getUrls( state: State ): State[ 'urls' ] {\n\treturn state.urls;\n}\n","/**\n * Internal dependencies\n */\nimport { EmailEditorSettings, EmailTheme, EmailEditorUrls } from './types';\n\nexport function getEditorSettings(): EmailEditorSettings {\n\treturn window.MailPoetEmailEditor.editor_settings as EmailEditorSettings;\n}\n\nexport function getEditorTheme(): EmailTheme {\n\treturn window.MailPoetEmailEditor.editor_theme as EmailTheme;\n}\n\nexport function getUrls(): EmailEditorUrls {\n\treturn window.MailPoetEmailEditor.urls as EmailEditorUrls;\n}\n","/**\n * External dependencies\n */\nimport { createReduxStore, register } from '@wordpress/data';\nimport {\n\tReduxStoreConfig,\n\tStoreDescriptor as GenericStoreDescriptor,\n} from '@wordpress/data/build-types/types';\nimport { controls } from '@wordpress/data-controls';\n\n/**\n * Internal dependencies\n */\nimport * as actions from './actions';\nimport { storeName } from './constants';\nimport { getInitialState } from './initial-state';\nimport { reducer } from './reducer';\nimport * as selectors from './selectors';\nimport * as resolvers from './resolvers';\n\nconst getConfig = () =>\n\t( {\n\t\tactions,\n\t\tcontrols,\n\t\tselectors,\n\t\tresolvers,\n\t\treducer,\n\t\tinitialState: getInitialState(),\n\t} ) as const;\n\nexport type EditorStoreConfig = ReturnType< typeof getConfig >;\n\nexport const createStore = () => {\n\tconst store = createReduxStore( storeName, getConfig() );\n\tregister( store );\n\treturn store;\n};\n\nexport interface EmailEditorStore {\n\tgetActions: () => EditorStoreConfig[ 'actions' ];\n\tgetSelectors: () => EditorStoreConfig[ 'selectors' ];\n}\n\ndeclare module '@wordpress/data' {\n\tinterface StoreMap {\n\t\t[ storeName ]: GenericStoreDescriptor<\n\t\t\tReduxStoreConfig<\n\t\t\t\tunknown,\n\t\t\t\tReturnType< EmailEditorStore[ 'getActions' ] >,\n\t\t\t\tReturnType< EmailEditorStore[ 'getSelectors' ] >\n\t\t\t>\n\t\t>;\n\t}\n}\n\nexport { actions, selectors };\n","/**\n * External dependencies\n */\nimport { EditorSettings, EditorColor } from '@wordpress/block-editor/index';\nimport { BlockInstance } from '@wordpress/blocks/index';\nimport { Post } from '@wordpress/core-data/build-types/entity-types/post';\n\nexport enum SendingPreviewStatus {\n\tSUCCESS = 'success',\n\tERROR = 'error',\n}\n\nexport type ExperimentalSettings = {\n\t__experimentalFeatures: {\n\t\tcolor: {\n\t\t\tcustom: boolean;\n\t\t\ttext: boolean;\n\t\t\tbackground: boolean;\n\t\t\tcustomGradient: boolean;\n\t\t\tdefaultPalette: boolean;\n\t\t\tpalette: {\n\t\t\t\tdefault: EditorColor[];\n\t\t\t\ttheme: EditorColor[];\n\t\t\t};\n\t\t\tgradients: {\n\t\t\t\tdefault: EditorColor[];\n\t\t\t};\n\t\t};\n\t};\n};\n\nexport type EmailEditorSettings = EditorSettings & ExperimentalSettings;\n\nexport type EmailTheme = {\n\tversion?: number;\n\tstyles?: EmailStyles;\n\t// Ref: https://github.com/WordPress/gutenberg/blob/38d0a4351105e6ba4b72c4dcb90985305aacf921/packages/block-editor/src/components/global-styles/hooks.js#L24C7-L24C21\n\tsettings?: {\n\t\tappearanceTools?: boolean;\n\t\tuseRootPaddingAwareAlignments?: boolean;\n\t\tbackground?: {\n\t\t\tbackgroundImage?: boolean;\n\t\t\tbackgroundRepeat?: boolean;\n\t\t\tbackgroundSize?: boolean;\n\t\t\tbackgroundPosition?: boolean;\n\t\t};\n\t\tborder?: {\n\t\t\tradius?: boolean;\n\t\t\twidth?: boolean;\n\t\t\tstyle?: boolean;\n\t\t\tcolor?: boolean;\n\t\t};\n\t\tshadow?: {\n\t\t\tpresets?: boolean;\n\t\t\tdefaultPresets?: boolean;\n\t\t};\n\t\tcolor?: {\n\t\t\tbackground?: boolean;\n\t\t\tbutton?: boolean;\n\t\t\tcaption?: boolean;\n\t\t\tcustom?: boolean;\n\t\t\tcustomDuotone?: boolean;\n\t\t\tcustomGradient?: boolean;\n\t\t\tdefaultDuotone?: boolean;\n\t\t\tdefaultGradients?: boolean;\n\t\t\tdefaultPalette?: boolean;\n\t\t\tduotone?: boolean;\n\t\t\tgradients?: {\n\t\t\t\tdefault?: boolean;\n\t\t\t\ttheme?: boolean;\n\t\t\t\tcustom?: boolean;\n\t\t\t};\n\t\t\theading?: boolean;\n\t\t\tlink?: boolean;\n\t\t\tpalette?: boolean;\n\t\t\ttext?: boolean;\n\t\t};\n\t\tdimensions?: {\n\t\t\taspectRatio?: boolean;\n\t\t\tminHeight?: boolean;\n\t\t};\n\t\tlayout?: {\n\t\t\tcontentSize?: string;\n\t\t\twideSize?: string;\n\t\t};\n\t\tspacing?: {\n\t\t\tcustomSpacingSize?: number;\n\t\t\tblockGap?: number;\n\t\t\tmargin?: boolean;\n\t\t\tpadding?: boolean;\n\t\t\tspacingSizes?: number[];\n\t\t\tspacingScale?: number;\n\t\t\tunits?: string[];\n\t\t};\n\t\tposition?: {\n\t\t\tfixed?: boolean;\n\t\t\tsticky?: boolean;\n\t\t};\n\t\ttypography?: {\n\t\t\tcustomFontSize?: boolean;\n\t\t\tdefaultFontSizes?: boolean;\n\t\t\tdropCap?: boolean;\n\t\t\tfontFamilies?: boolean;\n\t\t\tfontSizes?: boolean;\n\t\t\tfontStyle?: boolean;\n\t\t\tfontWeight?: boolean;\n\t\t\tletterSpacing?: boolean;\n\t\t\tlineHeight?: boolean;\n\t\t\ttextColumns?: boolean;\n\t\t\ttextDecoration?: boolean;\n\t\t\ttextTransform?: boolean;\n\t\t\twritingMode?: boolean;\n\t\t};\n\t\tlightbox?: {\n\t\t\tenabled?: boolean;\n\t\t\tallowEditing?: boolean;\n\t\t};\n\t};\n};\n\nexport interface TypographyProperties {\n\tfontSize: string;\n\tfontFamily: string;\n\tfontStyle: string;\n\tfontWeight: string;\n\tletterSpacing: string;\n\tlineHeight: string;\n\ttextDecoration: string;\n\ttextTransform:\n\t\t| 'none'\n\t\t| 'capitalize'\n\t\t| 'uppercase'\n\t\t| 'lowercase'\n\t\t| 'full-width'\n\t\t| 'full-size-kana';\n}\n\nexport type EmailStyles = {\n\tspacing?: {\n\t\tblockGap: string;\n\t\tpadding: {\n\t\t\tbottom: string;\n\t\t\tleft: string;\n\t\t\tright: string;\n\t\t\ttop: string;\n\t\t};\n\t};\n\tcolor?: {\n\t\tbackground: string;\n\t\ttext: string;\n\t};\n\ttypography?: TypographyProperties;\n\telements?: {\n\t\theading: {\n\t\t\tcolor: {\n\t\t\t\ttext: string;\n\t\t\t};\n\t\t\ttypography: TypographyProperties;\n\t\t};\n\t};\n};\n\nexport type EmailEditorLayout = {\n\ttype: string;\n\tcontentSize: string;\n};\n\nexport type EmailEditorUrls = {\n\tsend?: string;\n\tlistings: string;\n};\n\nexport type PersonalizationTag = {\n\tname: string;\n\ttoken: string;\n\tcategory: string;\n\tattributes: string[];\n\tvalueToInsert: string;\n};\n\nexport type State = {\n\tinserterSidebar: {\n\t\tisOpened: boolean;\n\t};\n\tlistviewSidebar: {\n\t\tisOpened: boolean;\n\t};\n\tsettingsSidebar: {\n\t\tactiveTab: string;\n\t};\n\tpostId: number;\n\teditorSettings: EmailEditorSettings;\n\ttheme: EmailTheme;\n\tstyles: {\n\t\tglobalStylesPostId: number | null;\n\t};\n\tautosaveInterval: number;\n\turls: EmailEditorUrls;\n\tpreview: {\n\t\tdeviceType: string;\n\t\ttoEmail: string;\n\t\tisModalOpened: boolean;\n\t\tisSendingPreviewEmail: boolean;\n\t\tsendingPreviewStatus: SendingPreviewStatus | null;\n\t\terrorMessage?: string;\n\t};\n\tpersonalizationTags: {\n\t\tlist: PersonalizationTag[];\n\t\tisFetching: boolean;\n\t};\n};\n\nexport type EmailTemplate = {\n\tid: string;\n\tslug: string;\n\tcontent: string;\n\ttitle: string;\n\ttype: string;\n};\n\nexport type EmailTemplatePreview = Omit<\n\tEmailTemplate,\n\t'content' | 'title'\n> & {\n\tcontent: {\n\t\tblock_version: number;\n\t\traw: string;\n\t};\n\ttitle: {\n\t\traw: string;\n\t\trendered: string;\n\t};\n};\n\nexport type TemplatePreview = {\n\tid: string;\n\tslug: string;\n\tdisplayName: string;\n\tpreviewContentParsed: BlockInstance[];\n\temailParsed: BlockInstance[];\n\ttemplate: EmailTemplatePreview;\n\tcategory?: TemplateCategory;\n\ttype: string;\n};\n\nexport type TemplateCategory = 'recent' | 'basic';\n\nexport type Feature =\n\t| 'fullscreenMode'\n\t| 'showIconLabels'\n\t| 'fixedToolbar'\n\t| 'focusMode';\n\nexport type MailPoetEmailPostContentExtended = {\n\tid?: string;\n\tsubject: string;\n\tpreheader: string;\n\tpreview_url: string;\n\tdeleted_at?: string;\n};\n\nexport type EmailEditorPostType = Omit< Post, 'type' > & {\n\ttype: string;\n};\n\nexport type EmailContentValidationAction = {\n\tlabel: string;\n\tonClick: () => void;\n};\n\nexport type EmailContentValidationRule = {\n\tid: string;\n\ttest: ( emailContent: string ) => boolean;\n\tmessage: string;\n\tactions: EmailContentValidationAction[];\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nvar React = require('react');\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types.\nvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\nvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\nvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nvar REACT_PROVIDER_TYPE = Symbol.for('react.provider');\nvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\nvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nvar REACT_MEMO_TYPE = Symbol.for('react.memo');\nvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\nvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// -----------------------------------------------------------------------------\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\nvar enableCacheElement = false;\nvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\nvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\n// stuff. Intended to enable React core members to more easily debug scheduling\n// issues in DEV builds.\n\nvar enableDebugTracing = false; // Track which Fiber(s) schedule render work.\n\nvar REACT_MODULE_REFERENCE;\n\n{\n  REACT_MODULE_REFERENCE = Symbol.for('react.module.reference');\n}\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_MODULE_REFERENCE || type.getModuleId !== undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var displayName = outerType.displayName;\n\n  if (displayName) {\n    return displayName;\n  }\n\n  var functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n} // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\n\nfunction getComponentNameFromType(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  {\n    if (typeof type.tag === 'number') {\n      error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n    }\n  }\n\n  if (typeof type === 'function') {\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n        return getContextName(context) + '.Consumer';\n\n      case REACT_PROVIDER_TYPE:\n        var provider = type;\n        return getContextName(provider._context) + '.Provider';\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        var outerName = type.displayName || null;\n\n        if (outerName !== null) {\n          return outerName;\n        }\n\n        return getComponentNameFromType(type.type) || 'Memo';\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentNameFromType(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n\n      // eslint-disable-next-line no-fallthrough\n    }\n  }\n\n  return null;\n}\n\nvar assign = Object.assign;\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: assign({}, props, {\n          value: prevLog\n        }),\n        info: assign({}, props, {\n          value: prevInfo\n        }),\n        warn: assign({}, props, {\n          value: prevWarn\n        }),\n        error: assign({}, props, {\n          value: prevError\n        }),\n        group: assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, source, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if ( !fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  var control;\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n\n  try {\n    // This should throw.\n    if (construct) {\n      // Something should be setting the props in the constructor.\n      var Fake = function () {\n        throw Error();\n      }; // $FlowFixMe\n\n\n      Object.defineProperty(Fake.prototype, 'props', {\n        set: function () {\n          // We use a throwing setter instead of frozen or non-writable props\n          // because that won't throw in a non-strict mode function.\n          throw Error();\n        }\n      });\n\n      if (typeof Reflect === 'object' && Reflect.construct) {\n        // We construct a different control for this case to include any extra\n        // frames added by the construct call.\n        try {\n          Reflect.construct(Fake, []);\n        } catch (x) {\n          control = x;\n        }\n\n        Reflect.construct(fn, [], Fake);\n      } else {\n        try {\n          Fake.call();\n        } catch (x) {\n          control = x;\n        }\n\n        fn.call(Fake.prototype);\n      }\n    } else {\n      try {\n        throw Error();\n      } catch (x) {\n        control = x;\n      }\n\n      fn();\n    }\n  } catch (sample) {\n    // This is inlined manually because closure doesn't do it for us.\n    if (sample && control && typeof sample.stack === 'string') {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sample.stack.split('\\n');\n      var controlLines = control.stack.split('\\n');\n      var s = sampleLines.length - 1;\n      var c = controlLines.length - 1;\n\n      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n        // We expect at least one stack frame to be shared.\n        // Typically this will be the root most one. However, stack frames may be\n        // cut off due to maximum stack limits. In this case, one maybe cut off\n        // earlier than the other. We assume that the sample is longer or the same\n        // and there for cut off earlier. So we should find the root most frame in\n        // the sample somewhere in the control.\n        c--;\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n\n\n                if (fn.displayName && _frame.includes('<anonymous>')) {\n                  _frame = _frame.replace('<anonymous>', fn.displayName);\n                }\n\n                {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, source, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar loggedTypeFailures = {};\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction checkPropTypes(typeSpecs, values, location, componentName, element) {\n  {\n    // $FlowFixMe This is okay but Flow doesn't know it.\n    var has = Function.call.bind(hasOwnProperty);\n\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            // eslint-disable-next-line react-internal/prod-error-codes\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error$1 = ex;\n        }\n\n        if (error$1 && !(error$1 instanceof Error)) {\n          setCurrentlyValidatingElement(element);\n\n          error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);\n\n          setCurrentlyValidatingElement(null);\n        }\n\n        if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error$1.message] = true;\n          setCurrentlyValidatingElement(element);\n\n          error('Failed %s type: %s', location, error$1.message);\n\n          setCurrentlyValidatingElement(null);\n        }\n      }\n    }\n  }\n}\n\nvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\nfunction isArray(a) {\n  return isArrayImpl(a);\n}\n\n/*\n * The `'' + value` pattern (used in in perf-sensitive code) throws for Symbol\n * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n *\n * The functions in this module will throw an easier-to-understand,\n * easier-to-debug exception with a clear errors message message explaining the\n * problem. (Instead of a confusing exception thrown inside the implementation\n * of the `value` object).\n */\n// $FlowFixMe only called in DEV, so void return is not possible.\nfunction typeName(value) {\n  {\n    // toStringTag is needed for namespaced types like Temporal.Instant\n    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object';\n    return type;\n  }\n} // $FlowFixMe only called in DEV, so void return is not possible.\n\n\nfunction willCoercionThrow(value) {\n  {\n    try {\n      testStringCoercion(value);\n      return false;\n    } catch (e) {\n      return true;\n    }\n  }\n}\n\nfunction testStringCoercion(value) {\n  // If you ended up here by following an exception call stack, here's what's\n  // happened: you supplied an object or symbol value to React (as a prop, key,\n  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n  // coerce it to a string using `'' + value`, an exception was thrown.\n  //\n  // The most common types that will cause this exception are `Symbol` instances\n  // and Temporal objects like `Temporal.Instant`. But any object that has a\n  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n  // exception. (Library authors do this to prevent users from using built-in\n  // numeric operators like `+` or comparison operators like `>=` because custom\n  // methods are needed to perform accurate arithmetic or comparison.)\n  //\n  // To fix the problem, coerce this object or symbol value to a string before\n  // passing it to React. The most reliable way is usually `String(value)`.\n  //\n  // To find which value is throwing, check the browser or debugger console.\n  // Before this exception was thrown, there should be `console.error` output\n  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n  // problem and how that type was used: key, atrribute, input value prop, etc.\n  // In most cases, this console output also shows the component and its\n  // ancestor components where the exception happened.\n  //\n  // eslint-disable-next-line react-internal/safe-string-coercion\n  return '' + value;\n}\nfunction checkKeyStringCoercion(value) {\n  {\n    if (willCoercionThrow(value)) {\n      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before before using it here.', typeName(value));\n\n      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n    }\n  }\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar RESERVED_PROPS = {\n  key: true,\n  ref: true,\n  __self: true,\n  __source: true\n};\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentNameFromType(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingRef = function () {\n      if (!specialPropRefWarningShown) {\n        specialPropRefWarningShown = true;\n\n        error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingRef.isReactWarning = true;\n    Object.defineProperty(props, 'ref', {\n      get: warnAboutAccessingRef,\n      configurable: true\n    });\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nvar ReactElement = function (type, key, ref, self, source, owner, props) {\n  var element = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n    // Record the component responsible for creating this element.\n    _owner: owner\n  };\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // self and source are DEV only properties.\n\n    Object.defineProperty(element, '_self', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: self\n    }); // Two elements created in two different places should be considered\n    // equal for testing purposes and therefore we hide it from enumeration.\n\n    Object.defineProperty(element, '_source', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: source\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV(type, config, maybeKey, source, self) {\n  {\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      {\n        checkKeyStringCoercion(maybeKey);\n      }\n\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      ref = config.ref;\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n  }\n}\n\nvar ReactCurrentOwner$1 = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement$1(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n    }\n  }\n}\n\nvar propTypesMisspellWarningShown;\n\n{\n  propTypesMisspellWarningShown = false;\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\n\nfunction isValidElement(object) {\n  {\n    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner$1.current) {\n      var name = getComponentNameFromType(ReactCurrentOwner$1.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n\nfunction getSourceInfoErrorAddendum(source) {\n  {\n    if (source !== undefined) {\n      var fileName = source.fileName.replace(/^.*[\\\\\\/]/, '');\n      var lineNumber = source.lineNumber;\n      return '\\n\\nCheck your code at ' + fileName + ':' + lineNumber + '.';\n    }\n\n    return '';\n  }\n}\n/**\n * Warn if there's no key explicitly set on dynamic arrays of children or\n * object keys are not valid. This allows us to keep track of children between\n * updates.\n */\n\n\nvar ownerHasKeyUseWarning = {};\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = typeof parentType === 'string' ? parentType : parentType.displayName || parentType.name;\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner$1.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement$1(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement$1(null);\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object') {\n      return;\n    }\n\n    if (isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else if (node) {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Given an element, validate that its props follow the propTypes definition,\n * provided by the type.\n *\n * @param {ReactElement} element\n */\n\n\nfunction validatePropTypes(element) {\n  {\n    var type = element.type;\n\n    if (type === null || type === undefined || typeof type === 'string') {\n      return;\n    }\n\n    var propTypes;\n\n    if (typeof type === 'function') {\n      propTypes = type.propTypes;\n    } else if (typeof type === 'object' && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n    // Inner props are checked in the reconciler.\n    type.$$typeof === REACT_MEMO_TYPE)) {\n      propTypes = type.propTypes;\n    } else {\n      return;\n    }\n\n    if (propTypes) {\n      // Intentionally inside to avoid triggering lazy initializers:\n      var name = getComponentNameFromType(type);\n      checkPropTypes(propTypes, element.props, 'prop', name, element);\n    } else if (type.PropTypes !== undefined && !propTypesMisspellWarningShown) {\n      propTypesMisspellWarningShown = true; // Intentionally inside to avoid triggering lazy initializers:\n\n      var _name = getComponentNameFromType(type);\n\n      error('Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?', _name || 'Unknown');\n    }\n\n    if (typeof type.getDefaultProps === 'function' && !type.getDefaultProps.isReactClassApproved) {\n      error('getDefaultProps is only used on classic React.createClass ' + 'definitions. Use a static property named `defaultProps` instead.');\n    }\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement$1(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement$1(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement$1(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement$1(null);\n    }\n  }\n}\n\nvar didWarnAboutKeySpread = {};\nfunction jsxWithValidation(type, props, key, isStaticChildren, source, self) {\n  {\n    var validType = isValidElementType(type); // We warn in this case but don't throw. We expect the element creation to\n    // succeed and there will likely be errors in render.\n\n    if (!validType) {\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var sourceInfo = getSourceInfoErrorAddendum(source);\n\n      if (sourceInfo) {\n        info += sourceInfo;\n      } else {\n        info += getDeclarationErrorAddendum();\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    }\n\n    var element = jsxDEV(type, props, key, source, self); // The result can be nullish if a mock or a custom function is used.\n    // TODO: Drop this when these are no longer allowed as the type argument.\n\n    if (element == null) {\n      return element;\n    } // Skip key warning if the type isn't valid since our key validation logic\n    // doesn't expect a non-string/function type and can throw confusing errors.\n    // We don't want exception behavior to differ between dev and prod.\n    // (Rendering will throw with a helpful message and as soon as the type is\n    // fixed, the key warnings will appear.)\n\n\n    if (validType) {\n      var children = props.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    }\n\n    {\n      if (hasOwnProperty.call(props, 'key')) {\n        var componentName = getComponentNameFromType(type);\n        var keys = Object.keys(props).filter(function (k) {\n          return k !== 'key';\n        });\n        var beforeExample = keys.length > 0 ? '{key: someKey, ' + keys.join(': ..., ') + ': ...}' : '{key: someKey}';\n\n        if (!didWarnAboutKeySpread[componentName + beforeExample]) {\n          var afterExample = keys.length > 0 ? '{' + keys.join(': ..., ') + ': ...}' : '{}';\n\n          error('A props object containing a \"key\" prop is being spread into JSX:\\n' + '  let props = %s;\\n' + '  <%s {...props} />\\n' + 'React keys must be passed directly to JSX without using spread:\\n' + '  let props = %s;\\n' + '  <%s key={someKey} {...props} />', beforeExample, componentName, afterExample, componentName);\n\n          didWarnAboutKeySpread[componentName + beforeExample] = true;\n        }\n      }\n    }\n\n    if (type === REACT_FRAGMENT_TYPE) {\n      validateFragmentProps(element);\n    } else {\n      validatePropTypes(element);\n    }\n\n    return element;\n  }\n} // These two functions exist to still get child warnings in dev\n// even with the prod transform. This means that jsxDEV is purely\n// opt-in behavior for better messages but that we won't stop\n// giving you warnings if you use production apis.\n\nfunction jsxWithValidationStatic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, true);\n  }\n}\nfunction jsxWithValidationDynamic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, false);\n  }\n}\n\nvar jsx =  jsxWithValidationDynamic ; // we may want to special case jsxs internally to take advantage of static children.\n// for now we can ship identical prod functions\n\nvar jsxs =  jsxWithValidationStatic ;\n\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsx;\nexports.jsxs = jsxs;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","module.exports = window[\"React\"];","module.exports = window[\"lodash\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blockLibrary\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"dataControls\"];","module.exports = window[\"wp\"][\"deprecated\"];","module.exports = window[\"wp\"][\"editor\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"formatLibrary\"];","module.exports = window[\"wp\"][\"hooks\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"isShallowEqual\"];","module.exports = window[\"wp\"][\"keyboardShortcuts\"];","module.exports = window[\"wp\"][\"keycodes\"];","module.exports = window[\"wp\"][\"mediaUtils\"];","module.exports = window[\"wp\"][\"notices\"];","module.exports = window[\"wp\"][\"plugins\"];","module.exports = window[\"wp\"][\"preferences\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"wp\"][\"priorityQueue\"];","module.exports = window[\"wp\"][\"privateApis\"];","module.exports = window[\"wp\"][\"richText\"];","module.exports = window[\"wp\"][\"url\"];","module.exports = window[\"wp\"][\"viewport\"];","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Internal dependencies\n */\nimport { initialize } from './editor';\n\nwindow.addEventListener( 'DOMContentLoaded', () => {\n\tinitialize( 'mailpoet-email-editor' );\n} );\n"],"names":["addFilter","enhanceButtonBlock","settings","name","styles","enhanceButtonsBlock","supports","layout","__experimentalEmailFlexLayout","enhanceColumnBlock","background","backgroundImage","InspectorControls","createHigherOrderComponent","columnsEditCallback","BlockEdit","alterBlocksEdits","props","createElement","deactivateToggleCss","Fragment","deactivateStackOnMobile","disableColumnsLayout","enhanceColumnsBlock","alterSupportConfiguration","shadow","disableGroupVariations","variations","filter","variation","imageEditCallback","disableImageFilter","duetone","hideExpandOnClick","__","useBlockProps","Placeholder","layoutClassNames","blockProps","className","PostContentEdit","OriginalEditComponent","Edit","context","__unstableLayoutClassNames","postId","contextPostId","postType","contextPostType","hasContent","enhancePostContentBlock","edit","registerFormatType","unregisterFormatType","applyFormat","insert","create","toHTMLString","BlockControls","ToolbarButton","ToolbarGroup","useSelect","useDispatch","useCallback","useState","React","getCursorPosition","replacePersonalizationTagsWithHTMLComments","PersonalizationTagsModal","storeName","PersonalizationTagsPopover","PersonalizationTagsLinkPopover","recordEvent","disableCertainRichTextFormats","PersonalizationTagsButton","contentRef","isModalOpened","setIsModalOpened","selectedBlockId","select","getSelectedBlockClientId","updateBlockAttributes","blockContent","attributes","getBlockAttributes","content","originalHTML","handleInsert","tag","linkText","start","end","updatedContent","richTextValue","html","length","type","contenteditable","style","value","icon","title","onClick","onUpdate","originalTag","updatedTag","replace","htmlElement","newTag","newText","oldTag","getAttribute","regex","RegExp","textContent","_","beforeAttrs","afterAttrs","isOpened","onInsert","closeCallback","canInsertLink","openedBy","extendRichTextFormats","tagName","personalizationTagsLiveContentUpdate","setAttributes","list","getPersonalizationTagsList","updateContent","handleSetAttributes","newAttributes","undefined","replacedContent","activatePersonalizationTagsReplacing","registerCoreBlocks","initBlocks","useEffect","AutosaveMonitor","hasEdits","autosaveInterval","getAutosaveInterval","saveEditedEmail","autosaveTimer","setTimeout","clearTimeout","ErrorBoundary","PostLockedModal","EditorProvider","useMemo","SlotFillProvider","Spinner","store","coreStore","Layout","useNavigateToEntityRecord","unlockPatternsRelatedSelectorsFromCoreStore","InnerEditor","initialPostId","initialPostType","initialEdits","currentPost","onNavigateToEntityRecord","onNavigateToPreviousEntityRecord","post","template","getEntityRecord","getEditedPostTemplate","postObject","blockPatterns","hasFinishedResolution","getBlockPatternsForPostType","patterns","editorSettings","defaultRenderingMode","supportsTemplateMode","__experimentalBlockPatterns","width","height","useSubRegistry","__unstableTemplate","BlockSelectionClearer","editorStore","UnsavedChangesWarning","uploadMedia","classnames","ComplementaryArea","FullscreenMode","InterfaceSkeleton","useRef","useEmailCss","BlockCompatibilityWarnings","Sidebar","Header","ListviewSidebar","InserterSidebar","EditorNotices","SentEmailNotice","StylesSidebar","VisualEditor","TemplateSelection","recordEventOnce","isFullscreenActive","isSidebarOpened","initialSettings","previewDeviceType","isInserterSidebarOpened","isListviewSidebarOpened","canUserEditMedia","hasFixedToolbar","focusMode","isFeatureActive","isInserterOpened","isListViewOpened","getInitialEditorSettings","getDeviceType","canUser","getStyles","setIsInserterOpened","emailCss","canvasStyles","color","fontFamily","typography","transition","mediaUpload","isActive","header","editorNotices","disableIframe","iframeProps","sidebar","Slot","scope","secondarySidebar","__experimentalConfirmDialog","ConfirmDialog","EditTemplateBlocksNotification","templateId","getEditorSettings","getCurrentTemplateId","isDialogOpen","setIsDialogOpen","handleDblClick","event","target","classList","contains","canvas","current","addEventListener","removeEventListener","isOpen","confirmButtonText","onConfirm","onCancel","size","useRefEffect","blockEditorStore","unlockGetEnabledClientIdsTree","DISTANCE_THRESHOLD","clamp","min","max","Math","distanceFromRect","x","y","rect","dx","Number","left","right","dy","top","bottom","sqrt","useSelectNearestEditableBlock","isEnabled","getEnabledClientIdsTree","getBlockName","getBlockOrder","selectBlock","element","selectNearestEditableBlock","editableBlockClientIds","flatMap","clientId","blockName","innerBlocks","nearestClientIdData","reduce","acc","block","querySelector","getBoundingClientRect","distance","POSITIVE_INFINITY","nearestClientId","handleClick","shouldSelect","clientX","clientY","useMergeRefs","BlockList","__unstableUseTypewriter","useTypewriter","RecursionProvider","__experimentalUseResizeCanvas","useResizeCanvas","BlockCanvas","TEMPLATE_POST_TYPE","TEMPLATE_PART_POST_TYPE","PATTERN_POST_TYPE","NAVIGATION_POST_TYPE","DESIGN_POST_TYPES","_ref","renderingMode","wrapperBlockName","wrapperUniqueId","deviceType","isFocusedEntity","getCurrentPostId","getCurrentPostType","getRenderingMode","postTypeSlug","checkRenderingMode","checkWrapperBlockName","isDesignPostType","includes","isPreview","__unstableIsPreviewMode","__experimentalFeatures","deviceStyles","blockListLayout","localRef","typewriterRef","newContentRef","shouldIframe","containerWidth","contentSize","iframeStyles","css","uniqueId","toLowerCase","dropZoneElement","parentNode","__unstableDisableDropZone","chevronDown","useEntityProp","Button","Dropdown","VisuallyHidden","__experimentalText","Text","TextControl","editorCurrentPostType","CampaignName","showIconLabels","getEmailPostId","emailTitle","setTitle","titleRef","ref","popoverProps","placement","anchor","contentClassName","renderToggle","onToggle","as","label","renderContent","onChange","newTitle","help","PinnedItems","ToolbarItem","WpToolbarItem","NavigableToolbar","BlockToolbar","WPBlockToolbar","coreDataStore","preferencesStore","plus","listView","undo","redo","next","previous","DocumentBar","useEntitiesSavedStatesIsDirty","MoreMenu","PreviewDropdown","SaveEmailButton","SendButton","SaveAllButton","useContentValidation","useEditorMode","inserterButton","listviewButton","undoButton","redoButton","isBlockToolsCollapsed","setIsBlockToolsCollapsed","undoAction","redoAction","setIsListViewOpened","isFixedToolbarActive","isBlockSelected","hasUndo","hasRedo","get","getBlockSelectionStart","editorMode","validateContent","isInvalid","dirtyEntityRecords","hasNonEmailEdits","some","entity","preventDefault","toggleTheInserterSidebar","toggleTheListviewSidebar","shortLabelInserter","variant","isPressed","onMouseDown","disabled","showTooltip","hideDragHandle","collapsed","isContentInvalid","MenuGroup","MenuItem","DropdownMenu","displayShortcut","moreVertical","_x","PreferenceToggleMenuItem","TrashModal","showTrashModal","setShowTrashModal","urls","getUrls","status","setStatus","goToListings","window","location","href","listings","onClose","info","messageActivated","messageDeactivated","shortcut","secondary","isDestructive","onRemove","EntitiesSavedStates","SaveAllContent","panels","document","querySelectorAll","forEach","panel","titleButton","trim","rows","close","isSaving","buttonRef","check","cloud","Icon","isEmpty","isSaved","isDisabled","applyFilters","isDirty","hasEmptyContent","isEmailSent","sendAction","send","action","Modal","noticesStore","getLastEntityDeleteError","deleteEntityRecord","createErrorNotice","trashCallback","success","throwOnError","lastError","code","errorMessage","message","isDismissible","onRequestClose","focusOnMount","__experimentalLibrary","Library","postContentId","blocks","getBlocks","find","showMostUsedBlocks","showInserterHelpPanel","rootClientId","onSelect","selectedBlock","useShortcut","keyboardShortcutsStore","KeyboardShortcuts","openSidebar","closeSidebar","toggleFeature","registerShortcut","category","description","keyCombination","modifier","character","__experimentalListView","ListView","NoticeList","ValidationNotices","EditorSnackbars","notices","getNotices","removeNotice","dismissibleNotices","nonDismissibleNotices","id","dispatch","createNotice","SnackbarList","globalNoticeChangeMap","removeActions","snackbarNotices","map","notice","actions","Notice","useValidationNotices","key","CategoryMenu","groupedTags","activeCategory","onCategorySelect","getMenuItemClass","Object","keys","index","array","CategorySection","openLinkModal","categoriesToRender","entries","items","item","token","valueToInsert","display","flexDirection","alignItems","LinkModal","setLinkText","isPrimary","Popover","SelectControl","isPopoverVisible","setIsPopoverVisible","linkElement","setLinkElement","linkHref","setLinkHref","container","handleContainerClick","closest","position","__nextHasNoMarginBottom","__next40pxDefaultSize","autoComplete","options","isTertiary","ExternalLink","SearchControl","setActiveCategory","searchQuery","setSearchQuery","selectedTag","setSelectedTag","isLinkModalOpened","setIsLinkModalOpened","groups","push","theSearchQuery","insertedTag","setAnchor","updatedValue","setUpdatedValue","originalValue","setOriginalValue","commentSpan","innerText","getChildElement","rootElement","currentElement","children","findReplacementIndex","replacements","replacement","findLatestFormatIndex","formats","latestFormatIndex","formatList","format","richTextRef","selection","ownerDocument","defaultView","getSelection","rangeCount","range","getRangeAt","anchorNode","previousSibling","anchorOffset","toString","formatIndex","replacementIndex","text","tags","slice","baseToken","substring","match","BaseControl","RichText","RichTextWithButton","labelSuffix","placeholder","attributeName","attributeValue","updateProperty","selectionRange","setSelectionRange","handleInsertPersonalizationTag","currentValue","currentSelectionRange","_currentSelectionRang","_currentSelectionRang2","finalLabel","onFocus","onKeyUp","_value","external","mobile","desktop","PostPreviewButton","SendPreviewEmail","changePreviewDeviceType","togglePreviewModal","changeDeviceType","newDeviceType","deviceIcons","role","forceIsAutosaveable","onPreview","sprintf","createInterpolateElement","memo","ENTER","isEmail","SendingPreviewStatus","sendingMethodConfigurationLink","RawSendPreviewEmail","sendToRef","requestSendingNewsletterPreview","updateSendPreviewEmail","toEmail","previewToEmail","isSendingPreviewEmail","sendingPreviewStatus","getPreviewState","handleSendPreviewEmail","focus","ERROR","link","rel","link1","link2","email","onKeyDown","keyCode","required","SUCCESS","fill","hasBlockSupport","getBlockSupport","Fill","hasBackgroundImageSupport","nameOrType","backgroundSupport","sel","getSelectedBlock","hasBorderSupport","PanelBody","SidebarExtensionComponent","DetailsPanel","data","opened","Flex","FlexItem","EditTemplateModal","getCurrentTemplate","__experimentalHideHeader","justify","Panel","EmailTypeInfo","EmailSettings","PanelRow","megaphone","SelectTemplateModal","currentEmailContent","getEditedEmailContent","isEditTemplateModalOpen","setEditTemplateModalOpen","isSelectTemplateModalOpen","setSelectTemplateModalOpen","toggleProps","currentTemplate","onSelectCallback","previewContent","mainSidebarDocumentTab","mainSidebarBlockTab","Tabs","HeaderTabs","TabList","Tab","tabId","forwardRef","useContext","BlockInspector","drawerRight","mainSidebarId","TemplateSettings","SidebarContent","tabListRef","tabsContextValue","Context","identifier","closeLabel","headerClassName","Provider","smallScreenTitle","isActiveByDefault","TabPanel","RawSidebar","toggleSettingsSidebarActiveTab","activeTab","getSettingsSidebarActiveTab","selectedTabId","tabKey","TemplateRevertModal","TemplateInfo","isResetConfirmOpen","setResetConfirmOpen","revertAndSaveTemplate","isEqual","__experimentalSpacingSizesControl","SpacingSizesControl","useSettings","__experimentalToolsPanel","ToolsPanel","__experimentalToolsPanelItem","ToolsPanelItem","__experimentalUseCustomUnits","useCustomUnits","useEmailStyles","debouncedRecordEvent","DimensionsPanel","availableUnits","units","defaultStyles","updateStyleProp","resetAll","spacing","isShownByDefault","hasValue","padding","onDeselect","allowReset","values","sides","blockGap","showSideInLabel","FontSizePicker","__experimentalFontAppearanceControl","FontAppearanceControl","__experimentalLetterSpacingControl","LetterSpacingControl","__experimentalFontFamilyControl","FontFamilyControl","LineHeightControl","__experimentalTextDecorationControl","TextDecorationControl","__experimentalTextTransformControl","TextTransformControl","getElementStyles","DEFAULT_CONTROLS","fontSize","fontAppearance","lineHeight","letterSpacing","textTransform","textDecoration","writingMode","textColumns","TypographyElementPanel","headingLevel","defaultControls","fontSizes","blockLevelFontFamilies","fontFamilies","default","elementStyles","defaultElementStyles","fontStyle","fontWeight","defaultFontFamily","defaultFontSize","defaultFontStyle","defaultFontWeight","defaultLineHeight","defaultLetterSpacing","defaultTextDecoration","defaultTextTransform","hasFontFamily","hasFontSize","hasFontAppearance","hasLineHeight","hasLetterSpacing","hasTextDecoration","hasTextTransform","showToolFontSize","updateElementStyleProp","path","newValue","setLetterSpacing","selectedDefaultLetterSpacing","setLineHeight","selectedDefaultLineHeight","setFontSize","selectedDefaultFontSize","setFontFamily","selectedDefaultFontFamily","setTextDecoration","selectedDefaultTextDecoration","setTextTransform","selectedDefaultTextTransform","setFontAppearance","newFontStyle","newFontWeight","selectedDefaultFontStyle","selectedDefaultFontWeight","disableCustomFontSizes","withReset","withSlider","hasFontStyles","hasFontWeights","__unstableInputWidth","showNone","isBlock","__experimentalItemGroup","ItemGroup","__experimentalItem","Item","__experimentalVStack","VStack","__experimentalHStack","HStack","__experimentalHeading","Heading","__experimentalNavigatorButton","NavigatorButton","Card","CardBody","ElementItem","textColor","navigationButtonLabel","TypographyPanel","isBorderless","level","isBordered","isSeparated","TypographyPreview","extraStyles","__unstableMotion","motion","firstFrame","scale","opacity","hover","midFrame","secondFrame","normalizedHeight","normalizedColorSwatchSize","Preview","isFocused","withHoverView","colors","getPaletteColors","backgroundColor","headingFontFamily","elements","heading","headingColor","headingFontWeight","paletteColors","theme","concat","highlightedColors","ratio","isHovered","setIsHovered","onMouseEnter","onMouseLeave","div","cursor","initial","animate","variants","overflow","delay","slug","borderRadius","flexGrow","boxSizing","textAlign","ScreenHeader","StylesColorPanel","ScreenColors","userStyles","updateStyles","getTheme","handleOnChange","newStyles","inheritedValue","panelId","chevronLeft","__experimentalSpacer","Spacer","__experimentalView","View","__experimentalNavigatorToParentButton","NavigatorToParentButton","onBack","marginBottom","paddingX","paddingY","minWidth","ScreenLayout","CardMedia","ScreenRoot","__experimentalToggleGroupControl","ToggleGroupControl","__experimentalToggleGroupControlOption","ToggleGroupControlOption","PANELS","button","ScreenTypographyElement","setHeadingLevel","marginX","hideLabelFromVision","ScreenTypography","__experimentalNavigatorProvider","NavigatorProvider","__experimentalNavigatorScreen","NavigatorScreen","stylesSidebarId","RawStylesSidebar","initialPath","deepmerge","defaultStyleObject","getHeadingElementStyles","merge","all","flushSync","createQueue","blockPreviewQueue","Async","shouldRender","setShouldRender","add","cancel","usePreviewTemplates","TemplateList","TemplateCategoriesListSidebar","TemplateCategories","SelectTemplateBody","hasEmailPosts","templates","handleTemplateSelection","templateSelectMode","selectedCategory","setSelectedCategory","hideRecentCategory","displayCategories","handleCategorySelection","templateCategories","onClickCategory","onTemplateSelection","MemorizedSelectTemplateBody","emailPosts","hasTemplates","templateIsPostContent","postContent","templateSlug","templateType","resetEditorBlocks","emailParsed","setTemplateToPost","handleCloseWithoutSelection","_templates$","isFullScreen","isBusy","baseClassName","blockDefault","BlockPreview","TemplateNoResults","TemplateListBox","_style$css","displayName","tabIndex","onKeyPress","previewContentParsed","viewportWidth","minHeight","additionalStyles","compareProps","prev","MemorizedTemplateListBox","filteredTemplates","expanded","templateSelected","setTemplateSelected","emailContentIsEmpty","emailHasEdits","MediaUpload","initHooks","replaceMediaUpload","StrictMode","createRoot","initializeLayout","createStore","initEventCollector","Editor","WrappedEditor","initialize","elementId","getElementById","root","render","doAction","EMAIL_STRING","dispatcher","isEventTrackingEnabled","eventListenerHandler","eventData","detail","debounce","EventTarget","recordedData","dispatchEvent","CustomEvent","cachedEventName","cacheKey","JSON","stringify","subscribe","emailEditorStore","useShallowEqual","EMPTY_ARRAY","addValidationNotice","hasValidationNotice","removeValidationNotice","editedContent","editedTemplateContent","mapSelect","getCurrentTemplateContent","rules","templateContent","isValid","test","isEditingTemplate","useUserTheme","useGlobalStylesOutputWithConfig","userTheme","editorTheme","mergedConfig","setImmutably","setObject","setPath","Array","isArray","object","leaf","pop","lvl","shortenWpPresetVariables","obj","replaceVariable","_match","_prefix","group1","group2","split","join","traverse","hasOwnProperty","cleanupUserStyles","cleanObject","cleanedValue","updateUserTheme","newTheme","useReducer","postHistory","historyState","previousRenderingMode","setRenderingMode","params","parse","setPostContentInnerBlocks","templateBlocks","InternalTemplateCache","generateTemplateContent","allTemplates","contentTemplate","defaultReturnObject","postTemplateContent","postTemplate","customEmailContent","rawEmailPosts","getSentEmailEditorPosts","getEmailTemplates","getBlockPatternsForEmailTemplate","contentPatterns","parsedCustomEmailContent","templateToPreview","contentPattern","parsedTemplate","raw","rendered","allEmailPosts","preferredTitle","parsedPostContent","parsedPostContentWithTemplate","isShallowEqual","globalStylePost","getGlobalEmailStylesPost","updateGlobalStylesPost","editEntityRecord","noticeId","justifyLeft","justifyCenter","justifyRight","__experimentalToggleGroupControlOptionIcon","ToggleGroupControlOptionIcon","JustifyContentControl","layoutBlockSupportKey","hasLayoutBlockSupport","JustificationControls","justificationValue","isToolbar","justificationOptions","allowedValues","option","allowedControls","LayoutControls","layoutBlockSupport","justifyContent","onJustificationChange","group","__experimentalShareWithChildBlocks","addAttribute","withLayoutControls","supportLayout","BlockWithLayoutStyles","BlockListBlock","layoutClasses","justificationClass","withLayoutStyles","maybeWrapWithLayoutStyles","blockSupportsLayout","__dangerousOptInToUnstableAPIsOnlyForCoreModules","privateApis","componentsPrivateApis","blockEditorPrivateApis","unlock","ExperimentalBlockCanvas","selectHook","ColorPanel","interfaceStore","apiFetch","wpApiFetch","addQueryArgs","decodeEntities","__unstableSerializeAndClean","feature","registry","toggle","setDeviceType","state","togglePersonalizationTagsModal","payload","enableComplementaryArea","disableComplementaryArea","result","saveEditedEntityRecord","then","catch","previewState","method","errorResponse","error","templateEntityConfig","getEntityConfig","fileTemplatePath","baseURL","source","fileTemplate","serializeBlocks","blocksForSerialization","createSuccessNotice","setIsFetchingPersonalizationTags","isFetching","setPersonalizationTagsList","MailPoetEmailEditor","current_post_type","editorCurrentPostId","parseInt","current_post_id","getEditorTheme","getInitialState","inserterSidebar","listviewSidebar","settingsSidebar","globalStylesPostId","user_theme_post_id","preview","current_wp_user_email","personalizationTags","reducer","isAlreadyFetching","createRegistrySelector","createSelector","serialize","getContentFromEntity","patternsWithParsedBlocks","WeakMap","enhancePatternWithParsedBlocks","pattern","enhancedPattern","set","getActiveComplementaryArea","hasEditsForEntityRecord","isEmailLoaded","isSavingEntityRecord","record","getEditedEntityRecord","getEntityRecords","per_page","getBlockPatterns","templateTypes","getEditedPostAttribute","templateWithSameSlug","defaultTemplateId","getDefaultTemplateId","getGlobalStylesPostId","post_type","post_types","palette","getPersonalizationTagsState","editor_settings","editor_theme","createReduxStore","register","controls","selectors","resolvers","getConfig","initialState"],"sourceRoot":""}